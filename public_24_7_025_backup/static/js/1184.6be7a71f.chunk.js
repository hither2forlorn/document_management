"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[1184],{30358:(e,t,s)=>{s.d(t,{MR:()=>d,SN:()=>o,cM:()=>u,d7:()=>c,p9:()=>i,t0:()=>h,ys:()=>r});var n=s(76400);const a="/branches",l="/district";function r(e,t){n.E8.post(`${a}`,e).then((e=>e.data)).then((e=>{t(null,e)})).catch((e=>{console.log(e),t(e)}))}function i(e){n.E8.get(`${a}`).then((e=>e.data)).then((t=>{e(null,t)})).catch((t=>{console.log(t),e(t)}))}function h(e,t){n.E8.put(`${a}`,e).then((e=>e.data)).then((e=>{t(null,e)})).catch((e=>{console.log(e),t(e)}))}function c(e,t){n.E8.get(`${a}/${e}`).then((e=>e.data)).then((e=>{t(null,e)})).catch((e=>{console.log(e),t(e)}))}function d(e,t){n.E8.get(`${a}/logo/${e}`).then((e=>e.data)).then((e=>{t(null,e)})).catch((e=>{console.log(e),t(e)}))}function o(e,t){n.E8.delete(`${a}/${e}`).then((e=>e.data)).then((e=>{t(null,e)})).catch((e=>{console.log(e),t(e)}))}function u(e){n.E8.get(`${l}`).then((e=>e.data)).then((t=>{e(null,t)})).catch((t=>{console.log(t),e(t)}))}},91184:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var n=s(65043),a=s(25852),l=s(13718),r=s(94576),i=s(75304),h=s(38477),c=s(44864),d=s(45413),o=s(8586),u=s(64412),m=s(83407),p=s(87382),x=s(3531),A=s(58441),j=s(83565),f=s(80231),v=s(97508),y=s(28096),g=s(19368),b=s(30358),N=s(70579);class $ extends n.Component{constructor(){super(...arguments),this.state={user:{},roles:[],selectedBranch:null,security_hierarchy:[],branches:[],departments:[],departmentId:null},this.handleBranchChange=e=>{e.value&&this.setState({selectedBranch:e})},this.handleChange=e=>{let{user:t}=this.state;const{name:s,value:n,type:a}=e.target;if("hierarchy"===s){let e=null,s=null;if(n.startsWith("Dept_")){const s=n.match(/\d+$/);s&&(e=s[0]),this.setState({departmentId:e,branchId:null}),t.departmentId=e,t.branchId=null}else if(n.startsWith("Branch_")){const e=n.match(/\d+$/);e&&(s=e[0]),this.setState({branchId:s,departmentId:null}),t.branchId=s,t.departmentId=null}this.setState({security_hierarchy:n})}switch(a){case"checkbox":t[s]=e.checked;break;case"textarea":t.notes=n;break;default:t[s]=n}this.setState({user:t})},this.handleSubmit=e=>{e.preventDefault();const t={...this.state.user};if(t.hierarchy.startsWith("Dept_")){const e=t.hierarchy.match(/\d+$/);e&&(t.departmentId=e[0]),t.branchId=null}if(t.hierarchy.startsWith("Branch_")){const e=t.hierarchy.match(/\d+$/);e&&(t.branchId=e[0]),t.departmentId=null}(0,x.gw)(t,((e,t)=>{e||t&&(this.props.history.push(f.A.adminLdapUsers),y.oR.success("Successfully edited user details"))}))}}componentDidMount(){const e=j.parse(this.props.location.search),t=A.A.getId(e["?i"]);Number(t)?((0,b.p9)(((e,t)=>{e||this.setState({branches:t.data})})),(0,x.wz)(t,((e,t)=>{var s,n,a;if(e)return;const l=(null===(s=this.state.branches)||void 0===s?void 0:s.find((e=>e.value===t.branchId)))||null,r=null===(n=this.props.allFields)||void 0===n||null===(a=n.hierarchy)||void 0===a?void 0:a.find((e=>e.code===t.hierarchy));this.setState({user:t,selectedBranch:l,hierarchy:(null===r||void 0===r?void 0:r.code)||""})}))):this.props.history.push(f.A.adminLdapUsers)}render(){var e,t;null===(e=this.state.user.hierarchy)||void 0===e||e.startsWith("Dept_");return(0,N.jsx)("div",{className:"animated fadeIn",children:(0,N.jsx)(a.A,{children:(0,N.jsx)(l.A,{xl:12,children:(0,N.jsx)(r.A,{onSubmit:this.handleSubmit,onChange:this.handleChange,children:(0,N.jsxs)(i.A,{className:"shadow",children:[(0,N.jsx)(h.A,{children:(0,N.jsx)("p",{className:"h5",children:"AD Users"})}),(0,N.jsx)(c.A,{children:(0,N.jsxs)(a.A,{children:[(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"isActive",children:(0,N.jsx)("strong",{children:"Status"})}),(0,N.jsxs)(u.A,{className:"rounded",type:"select",id:"isActive",name:"isActive",onChange:this.handleChange,placeholder:"Active",value:!!this.state.user.isActive&&this.state.user.isActive,children:[(0,N.jsx)("option",{value:!0,children:"Active"}),(0,N.jsx)("option",{value:!1,children:"Inactive"})]})]})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"email",children:"Email"}),(0,N.jsx)(u.A,{className:"rounded",type:"text",id:"email",name:"email",placeholder:"Email",value:this.state.user.email?this.state.user.email:"",readOnly:!0})]})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"phoneNumber",children:"Phone Number"}),(0,N.jsx)(u.A,{className:"rounded",type:"text",id:"phoneNumber",name:"phoneNumber",placeholder:"Phone Number",value:this.state.user.phoneNumber?this.state.user.phoneNumber:"",readOnly:!0})]})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"username",children:"Username"}),(0,N.jsx)(u.A,{className:"rounded",type:"text",id:"username",name:"username",placeholder:"User Name",value:this.state.user.username?this.state.user.username:"",readOnly:!0})]})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"name",children:"Name"}),(0,N.jsx)(u.A,{className:"rounded",type:"text",id:"name",name:"name",placeholder:"Name",value:this.state.user.name?this.state.user.name:"",readOnly:!0})]})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"roleId",children:"Role"}),(0,N.jsxs)(u.A,{className:"rounded",type:"select",id:"roleId",name:"roleId",required:!0,value:this.state.user.roleId,children:[(0,N.jsx)("option",{value:"",children:"Select Role for the user"}),null===(t=this.props.roles)||void 0===t?void 0:t.map(((e,t)=>(0,N.jsx)("option",{value:e.id,children:e.name},t)))]})]})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsx)(g.Ae,{required:!0,label:"Security Hierarchy",name:"hierarchy",options:this.props.allFields.hierarchy,onChange:this.handleChange,object:this.state.user,value:this.state.hierarchy,isEdit:!0})}),(0,N.jsx)(l.A,{xs:"4",children:(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{htmlFor:"loginAttempts",children:"Login Attempts"}),(0,N.jsxs)(u.A,{className:"rounded",type:"select",id:"loginAttempts",name:"loginAttempts",required:!0,value:this.state.user.loginAttempts,children:[(0,N.jsx)("option",{value:3,children:"3"}),(0,N.jsx)("option",{value:5,children:"5"}),(0,N.jsx)("option",{value:10,children:"10"})]})]})})]})}),(0,N.jsxs)(m.A,{className:"d-flex justify-content-end",children:[(0,N.jsx)(p.A,{onClick:()=>window.history.back(),type:"button",color:"danger",className:"mx-2 text-white",children:"Cancel"}),(0,N.jsx)(p.A,{type:"submit",color:"primary",children:"Update"})]})]})})})})})}}const I=(0,v.Ng)((e=>({users:e.allFields.users,roles:e.allFields.roles,branches:e.allFields.branches,departments:e.allFields.departments,allFields:e.allFields})))($)},3531:(e,t,s)=>{s.d(t,{en:()=>r,gw:()=>c,hG:()=>d,lo:()=>l,nu:()=>h,wz:()=>i});var n=s(76400);const a="/ad-users";function l(e){n.E8.get(`${a}`).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}function r(e){n.E8.get(`${a}/ldap`).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}function i(e,t){n.E8.get(`${a}/${e}`).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}function h(e,t){n.E8.post(`${a}`,JSON.stringify(e)).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}function c(e,t){n.E8.put(`${a}/${e.id}`,JSON.stringify(e)).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}function d(e,t){n.E8.delete(`${a}/${e}`).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}}}]);
//# sourceMappingURL=1184.6be7a71f.chunk.js.map