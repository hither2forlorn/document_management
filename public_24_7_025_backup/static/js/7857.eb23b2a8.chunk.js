"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[7857],{86710:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var n=a(64854),i=a(45413),l=a(8586),s=a(70579);function r(e){var t,a;let{label:r,onChange:o,required:d,errors:h,object:c,options:u,isEdit:p,name:m,getFieldValue:b,...v}=e;return u=null===(t=u)||void 0===t?void 0:t.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:(null===e||void 0===e?void 0:e[b])||(null===e||void 0===e?void 0:e.id)}))),u=null===(a=u)||void 0===a?void 0:a.map((e=>{let t="",a=null!==e&&void 0!==e&&e.level?null===e||void 0===e?void 0:e.level:0;for(;a-- >0;)t+="---";return{...e,label:t+" "+e.label}})),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(i.A,{children:[(0,s.jsxs)(l.A,{children:[r||"",d&&(0,s.jsx)("span",{className:"text-danger h6 ml-1",children:(0,s.jsx)("b",{children:"*"})})]}),(0,s.jsx)(n.default,{...p?{value:c[m]?c[m]:""}:{},name:m,options:u,onChange:o,...v}),h?(0,s.jsx)("span",{className:"text text-danger",children:h[0]}):null]})})}},17857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(65043),i=a(24408),l=a(40013),s=a(86453),r=a(37519),o=a(97508),d=a(28096),h=a(80231),c=a(75304),u=a(38477),p=a(19423),m=a(70579);class b extends n.Component{constructor(e){super(e),this.state={locationTypes:[],locationMaps:[],locationMap:{},validationErrors:{},isDisabled:!1},this.handleChange=(e,t)=>{if(null!==t&&void 0!==t&&t.name)this.setState({locationMap:{...this.state.locationMap,[null===t||void 0===t?void 0:t.name]:e}});else{e.preventDefault();const t=e.target.name;let a=e.target.value;"name"==t&&(a=(0,p.A)(a),this.setState({locationMap:{...this.state.locationMap,[t]:a}}))}},this.handleSubmit=e=>{e.preventDefault();const t=(0,s.tg)(e),a=this.state.locationMaps.filter((e=>e.id===Number(t.parentId)?1:0))[0];a?(t.parentId=a.id,t.level=a.level+1):t.level=0,t.multiple_hierarchy=this.state.locationMap.multiple_hierarchy,(0,l.$g)(t,((e,t)=>{if(e)return this.setState({validationErrors:e.response.data.data}),void d.oR.error(e.response.data.message);t.success?(d.oR.success(t.message),this.props.history.push(h.A.adminLocationMaps),this.props.dispatch((0,r.Ni)()),this.setState({isDisabled:!0})):d.oR.warn(t.message)}))},this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){this.setState(this.props.allFields)}renderItems(){return(0,m.jsxs)(c.A,{className:"shadow",children:[(0,m.jsx)(u.A,{children:(0,m.jsx)("p",{className:"h5",children:"Add Location Map"})}),(0,m.jsx)(i.A,{handleSubmit:this.handleSubmit,handleChange:this.handleChange,validationErrors:this.state.validationErrors?this.state.validationErrors:null,...this.state,...this.props})]})}render(){return this.renderItems()}}const v=(0,o.Ng)((e=>({allFields:e.allFields})))(b)},24408:(e,t,a)=>{a.d(t,{A:()=>j});a(65043);var n=a(25852),i=a(13718),l=a(87382),s=a(19368),r=a(97956),o=a(10810),d=a(94576),h=a(44864),c=a(83407),u=a(97508),p=a(15421),m=a(86710),b=a(28344),v=a(70579);const j=(0,u.Ng)((e=>({...e.allFields,userProfile:e.userProfile})))((e=>{const t=e.locationMap?e.locationMap:{},a=e.validationErrors?e.validationErrors:null,u=!!e.isEdit;return(0,v.jsxs)(d.A,{onSubmit:e.handleSubmit,children:[(0,v.jsxs)(h.A,{children:[(0,v.jsxs)(n.A,{children:[(0,v.jsx)(i.A,{md:4,children:(0,v.jsx)(s.wi,{required:!0,object:t,isEdit:u||t.name,label:"Name",name:"name",onInput:e=>(0,b.P)(e.target),value:t.name,errors:a?a.name:null,onChange:e.handleChange})}),(0,v.jsx)(i.A,{md:4,children:(0,v.jsx)(s.wi,{object:t,isEdit:u,label:"Description",onInput:e=>(0,b.P)(e.target),name:"description",errors:a?a.description:null,onChange:e.handleChange})}),(0,v.jsx)(i.A,{md:4,children:(0,v.jsx)(s.Ae,{object:t,isEdit:u,required:!0,label:"Location Type",name:"locationTypeId",errors:a?a.locationTypeId:null,options:e.locationTypes,onChange:e.handleChange})}),(0,v.jsx)(i.A,{md:4,children:(0,v.jsx)(s.Ae,{object:t,isEdit:u,label:"Parent Category",name:"parentId",errors:a?a.parentId:null,options:e.locationMaps,onChange:e.handleChange})}),(0,p.onlyForThisVendor)([p.banks.rbb.name,p.banks.citizen.name])&&(0,v.jsx)(i.A,{md:4,children:(0,v.jsx)(s.Ae,{required:1!=e.userProfile.id,label:"Security Hierarchy",name:"hierarchy",onChange:e.handleChange,object:t,options:e.hierarchy,isEdit:u,errors:a?a.hierarchy:null})}),(0,p.onlyForThisVendor)([p.banks.rbb.name,p.banks.citizen.name])&&(0,v.jsx)(i.A,{md:4,children:(0,v.jsx)(m.A,{label:"Multiple Security Hierarchy",name:"multiple_hierarchy",onChange:e.handleChange,object:t,isMulti:!0,options:e.hierarchy,isEdit:u,errors:a?a.hierarchy:null})})]}),(0,v.jsxs)("div",{className:"alert alert-dark",role:"alert",children:["Note: If Security hierarchy is set to none then all user will able to view location."," "]})]}),(0,v.jsx)(c.A,{className:"d-flex justify-content-end",children:u?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.A,{onClick:()=>window.history.back(),type:"button",color:"danger",className:"mx-2 text-white",children:"Cancel"}),(0,v.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update"})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.A,{onClick:()=>window.history.back()}),(0,v.jsx)(o.A,{isDisabled:e.isDisabled})]})})]})}))},40013:(e,t,a)=>{a.d(t,{$g:()=>r,DG:()=>l,FW:()=>d,Q8:()=>s,SW:()=>o});var n=a(76400);const i="/location-map";function l(e){n.E8.get(`${i}`).then((t=>{e(null,t.data)})).catch((t=>{e(t)}))}function s(e,t){n.E8.get(`${i}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function r(e,t){n.E8.post(`${i}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function o(e,t){n.E8.put(`${i}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function d(e,t){n.E8.delete(`${i}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}},28344:(e,t,a)=>{a.d(t,{P:()=>n});const n=e=>{/^\s/.test(e.value)&&(e.value="")}},19423:(e,t,a)=>{function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}a.d(t,{A:()=>n})}}]);
//# sourceMappingURL=7857.eb23b2a8.chunk.js.map