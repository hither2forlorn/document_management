{"version":3,"file":"static/js/1387.d9d4d6a8.chunk.js","mappings":"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","sources":["admin/components/ReactSelect.js","admin/views/UsersLdap/AddUser.js","admin/views/UsersLdap/api.js"],"sourcesContent":["import React from \"react\";\r\nimport Select from \"react-select\";\r\n\r\nimport { Label, Input, FormGroup, Col } from \"reactstrap\";\r\nexport default function ReactSelect({\r\n  label,\r\n  onChange,\r\n  required,\r\n  errors,\r\n  object,\r\n  options,\r\n  isEdit,\r\n  name,\r\n  getFieldValue,\r\n  ...rest\r\n}) {\r\n  options = options?.map((row) => {\r\n    return { ...row, label: row?.name, value: row?.[getFieldValue] || row?.id };\r\n  });\r\n\r\n  options = options?.map((row) => {\r\n    let padding = \"\";\r\n    let level = row?.level ? row?.level : 0;\r\n    while (level-- > 0) {\r\n      padding += \"---\";\r\n    }\r\n\r\n    return { ...row, label: padding + \" \" + row.label };\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <FormGroup>\r\n        <Label>\r\n          {label ? label : \"\"}\r\n          {required && (\r\n            <span className=\"text-danger h6 ml-1\">\r\n              <b>*</b>\r\n            </span>\r\n          )}\r\n        </Label>\r\n        <Select\r\n          {...(isEdit\r\n            ? {\r\n              value: object[name] ? object[name] : \"\",\r\n            }\r\n            : {})}\r\n          name={name}\r\n          options={options}\r\n          onChange={onChange}\r\n          {...rest}\r\n        />\r\n        {errors ? <span className=\"text text-danger\">{errors[0]}</span> : null}\r\n      </FormGroup>\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Card, CardBody, CardHeader, CardFooter, Form, Col, Row, FormGroup, Input, Label } from \"reactstrap\";\r\nimport Select from \"react-select\";\r\nimport { getFormData } from \"config/form\";\r\nimport { getLdapUsers, addUser } from \"./api\";\r\nimport { connect } from \"react-redux\";\r\nimport metaRoutes from \"config/meta_routes\";\r\nimport { toast } from \"react-toastify\";\r\nimport CustomSubmit from \"admin/components/CustomSubmit\";\r\nimport CustomCancel from \"admin/components/CustomCancel\";\r\nimport { CustomSelect } from \"admin/components\";\r\nimport ReactSelect from \"admin/components/ReactSelect\";\r\n\r\nclass AddUser extends Component {\r\n  state = {\r\n    users: [],\r\n    user: {},\r\n    selectedBranch: null,\r\n    branches: [],\r\n    selectedOption: {},\r\n    selectedOptions: [],\r\n    isDisabled: false,\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    let { user } = this.state;\r\n    const { name, value, type } = event.target;\r\n\r\n    switch (name) {\r\n      case \"hierarchy\":\r\n        let departmentId = null;\r\n        let branchId = null;\r\n\r\n        if (value.startsWith(\"Dept_\")) {\r\n          // Extract departmentId from hierarchy and reset branchId\r\n          const match = value.match(/\\d+$/);\r\n          if (match) {\r\n            departmentId = match[0]; // Extract departmentId\r\n          }\r\n\r\n          this.setState({\r\n            departmentId,  // Set departmentId based on hierarchy\r\n            branchId: null, // Reset branchId when Dept_ is selected\r\n          });\r\n\r\n          user[\"departmentId\"] = departmentId;\r\n          user[\"branchId\"] = null; // Ensure branchId is null when Dept_ is selected\r\n        } else if (value.startsWith(\"Branch_\")) {\r\n          // Extract branchId from hierarchy and reset departmentId\r\n          const match = value.match(/\\d+$/);\r\n          if (match) {\r\n            branchId = match[0]; // Extract branchId\r\n          }\r\n\r\n          this.setState({\r\n            branchId,        // Set branchId based on hierarchy\r\n            departmentId: null, // Reset departmentId when Branch_ is selected\r\n          });\r\n\r\n          user[\"branchId\"] = branchId;\r\n          user[\"departmentId\"] = null; // Ensure departmentId is null when Branch_ is selected\r\n        }\r\n\r\n        this.setState({ security_hierarchy: value });\r\n        break;\r\n\r\n      // Other case handling if needed\r\n    }\r\n    if (name === \"roleId\") {\r\n      user[\"roleId\"] = value;\r\n    }\r\n\r\n    switch (type) {\r\n      case \"checkbox\":\r\n        user[name] = event.checked;\r\n        break;\r\n      case \"textarea\":\r\n        user.notes = value;\r\n        break;\r\n      default:\r\n        user[name] = value;\r\n        break;\r\n    }\r\n    this.setState({ user });\r\n  };\r\n\r\n  handleUserChange = (selectedOption) => {\r\n    const distinguishedName = selectedOption.value;\r\n    if (distinguishedName) {\r\n      this.setState({ selectedOption });\r\n      const user = this.state.users?.filter((u) => (u.sAMAccountName === distinguishedName ? 1 : 0))[0];\r\n      this.setState({ user: user ? user : {} });\r\n    } else {\r\n      const keys = Object.keys(this.state.user);\r\n      const user = {};\r\n      keys.forEach((k) => (user[k] = \"\"));\r\n      this.setState({ user: user });\r\n    }\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = { ...this.state.user };\r\n    if (!formData.roleId) {\r\n      return toast.warn(\"Role must be selected\");\r\n    }\r\n    if (!formData.hierarchy) return toast.warn(\"Hierarchy must be selected\");\r\n    if (!this.state.user.sAMAccountName) return toast.warn(\"User must be selected\");\r\n    if (formData.hierarchy.startsWith(\"Dept_\")) {\r\n      const match = formData.hierarchy.match(/\\d+$/);\r\n      if (match) {\r\n        formData.departmentId = match[0];\r\n      }\r\n      formData.branchId = null;\r\n    }\r\n\r\n    if (formData.hierarchy.startsWith(\"Branch_\")) {\r\n      const match = formData.hierarchy.match(/\\d+$/);\r\n      if (match) {\r\n        formData.branchId = match[0];\r\n      }\r\n      formData.departmentId = null;\r\n    }\r\n\r\n    addUser(formData, (err, json) => {\r\n      if (err) {\r\n        if (err?.response?.status === 403) {\r\n          toast.error(\"Unable to add user maximum number exceeded\");\r\n          this.setState({\r\n            isDisabled: false,\r\n          });\r\n          return;\r\n        }\r\n        toast.error(\"There are some errors with the data provided.\");\r\n        return;\r\n      };\r\n      if (json) {\r\n        this.props.history.push(metaRoutes.adminLdapUsers);\r\n        this.setState({ isDisabled: true });\r\n      }\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    const branches = this.props.branches?.map((d) => {\r\n      return {\r\n        value: d.id,\r\n        label: d.name,\r\n      };\r\n    });\r\n    this.setState({\r\n      branches: branches,\r\n    });\r\n    getLdapUsers((err, users) => {\r\n      if (err) return;\r\n      const selectedOptions = users.data?.map((u) => {\r\n        return {\r\n          value: u.sAMAccountName,\r\n          label: u.displayName,\r\n        };\r\n      });\r\n      this.setState({\r\n        users: users.data,\r\n        selectedOptions: selectedOptions,\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { selectedOptions } = this.state;\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n          <Col xl={12}>\r\n            <Form onSubmit={this.handleSubmit}>\r\n              <Card className=\"shadow\">\r\n                <CardHeader>\r\n                  <p className=\"h5\">AD Users</p>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <FormGroup>\r\n                    <Label htmlFor=\"user\">User</Label>\r\n                    <Select\r\n                      value={this.state.selectedOption}\r\n                      onChange={this.handleUserChange}\r\n                      options={selectedOptions ? selectedOptions : []}\r\n                    />\r\n                  </FormGroup>\r\n\r\n                  <Row>\r\n                    <Col xs=\"6\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"email\">Email</Label>\r\n                        <Input\r\n                          type=\"text\"\r\n                          id=\"email\"\r\n                          placeholder=\"Email\"\r\n                          value={this.state.user.mail ? this.state.user.mail : \"\"}\r\n                          readOnly\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col xs=\"6\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"telephoneNumber\">Phone Number</Label>\r\n                        <Input\r\n                          className=\"rounded\"\r\n                          type=\"text\"\r\n                          id=\"telephoneNumber\"\r\n                          placeholder=\"Phone Number\"\r\n                          value={this.state.user.telephoneNumber ? this.state.user.telephoneNumber : \"\"}\r\n                          readOnly\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col xs=\"4\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"username\">Username</Label>\r\n                        <Input\r\n                          className=\"rounded\"\r\n                          type=\"text\"\r\n                          id=\"username\"\r\n                          placeholder=\"User Name\"\r\n                          value={this.state.user.sAMAccountName ? this.state.user.sAMAccountName : \"\"}\r\n                          readOnly\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col xs=\"4\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"Name\">Name</Label>\r\n                        <Input\r\n                          className=\"rounded\"\r\n                          type=\"text\"\r\n                          id=\"name\"\r\n                          placeholder=\"Name\"\r\n                          value={\r\n                            (this.state.user.givenName ? this.state.user.givenName : \"\") +\r\n                            \" \" +\r\n                            (this.state.user.sn ? this.state.user.sn : \"\")\r\n                          }\r\n                          readOnly\r\n                        />\r\n                      </FormGroup>\r\n                    </Col>\r\n                    <Col xs=\"4\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"roleId\">Role</Label>\r\n                        <Input\r\n                          className=\"rounded\"\r\n                          type=\"select\"\r\n                          id=\"roleId\"\r\n                          name=\"roleId\"\r\n                          required\r\n                          onChange={this.handleChange}\r\n                        >\r\n                          <option value=\"\">Select User Role</option>\r\n                          {this.props.roles?.map((role, index) => (\r\n                            <option key={index} value={role.id}>\r\n                              {role.name}\r\n                            </option>\r\n                          ))}\r\n                        </Input>\r\n                      </FormGroup>\r\n                    </Col>\r\n\r\n                    <Col xs=\"4\">\r\n                      <CustomSelect\r\n                        required\r\n                        label=\"Security Hierarchy\"\r\n                        name=\"hierarchy\"\r\n                        options={this.props.allFields.hierarchy}\r\n                        onChange={this.handleChange}\r\n                        object={this.state.user}\r\n                        value={this.state.hierarchy}\r\n                        isEdit={true}\r\n                      />\r\n                    </Col>\r\n                    {/* <Col xs=\"4\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"branchId\">Branch</Label>\r\n                        <Select\r\n                          className=\"rounded\"\r\n                          id=\"branchId\"\r\n                          name=\"branchId\"\r\n                          value={this.state.selectedBranch ? this.state.selectedBranch : \"\"}\r\n                          onChange={this.handleBranchChange}\r\n                          options={branches ? branches : []}\r\n                        />\r\n                      </FormGroup>\r\n                    </Col> */}\r\n                    {/* <Col xs=\"4\">\r\n                      <ReactSelect label=\"DepartmentId\" name=\"departmentId\" options={this.props.departments} />\r\n                    </Col> */}\r\n                    <Col xs=\"4\">\r\n                      <FormGroup>\r\n                        <Label htmlFor=\"loginAttempts\">Login Attempts</Label>\r\n                        <Input className=\"rounded\" type=\"select\" id=\"loginAttempts\" name=\"loginAttempts\" required>\r\n                          <option value={10}>10</option>\r\n                          <option value={5}>5</option>\r\n                          <option value={3}>3</option>\r\n                        </Input>\r\n                      </FormGroup>\r\n                    </Col>\r\n                  </Row>\r\n                </CardBody>\r\n                <CardFooter>\r\n                  {/* <Button  type=\"submit\" size=\"sm\" color=\"success\">\r\n                    Submit\r\n                  </Button> */}\r\n                  <div className=\"float-right\">\r\n                    <CustomCancel onClick={() => window.history.back()} />\r\n                    <CustomSubmit isDisabled={this.state.isDisabled} />\r\n                  </div>\r\n                </CardFooter>\r\n              </Card>\r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect((state) => ({\r\n  allFields: state.allFields,\r\n  roles: state.allFields.roles,\r\n  branches: state.allFields.branches,\r\n  departments: state.allFields.departments,\r\n}))(AddUser);\r\n","import { server } from \"admin/config/server\";\r\n\r\nconst url = \"/ad-users\";\r\n\r\n/**\r\n *\r\n * @param {Function} callback\r\n */\r\nfunction getUsers(callback) {\r\n  server\r\n    .get(`${url}`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction getLdapUsers(callback) {\r\n  server\r\n    .get(`${url}/ldap`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction getUser(id, callback) {\r\n  server\r\n    .get(`${url}/${id}`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction addUser(user, callback) {\r\n  server\r\n    .post(`${url}`, JSON.stringify(user))\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction editUser(user, callback) {\r\n  server\r\n    .put(`${url}/${user.id}`, JSON.stringify(user))\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction deleteUser(id, callback) {\r\n  server\r\n    .delete(`${url}/${id}`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nexport { getUsers, getLdapUsers, getUser, addUser, editUser, deleteUser };\r\n"],"names":["ReactSelect","_ref","_options","_options2","label","onChange","required","errors","object","options","isEdit","name","getFieldValue","rest","map","row","value","id","padding","level","_jsx","_Fragment","children","_jsxs","FormGroup","Label","className","Select","AddUser","Component","constructor","arguments","state","users","user","selectedBranch","branches","selectedOption","selectedOptions","isDisabled","handleChange","event","this","type","target","departmentId","branchId","startsWith","match","setState","security_hierarchy","checked","notes","handleUserChange","distinguishedName","_this$state$users","filter","u","sAMAccountName","keys","Object","forEach","k","handleSubmit","e","preventDefault","formData","roleId","toast","warn","hierarchy","addUser","err","json","_err$response","response","status","error","props","history","push","metaRoutes","adminLdapUsers","componentDidMount","_this$props$branches","_isMounted","d","getLdapUsers","_users$data","data","displayName","render","_this$props$roles","Row","Col","xl","Form","onSubmit","Card","CardHeader","CardBody","htmlFor","xs","Input","placeholder","mail","readOnly","telephoneNumber","givenName","sn","roles","role","index","CustomSelect","allFields","CardFooter","CustomCancel","onClick","window","back","CustomSubmit","connect","departments","url","getUsers","callback","server","get","then","catch","getUser","post","JSON","stringify","editUser","put","deleteUser","delete"],"sourceRoot":""}