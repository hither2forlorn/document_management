"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[6120],{56120:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var t=s(65043),n=s(62582),r=s(30358),l=s(18039),c=s(80231),o=s(58441),i=(s(10577),s(70579));var d=s(75304),h=s(38477),u=s(44864),m=s(97508),p=s(97404),x=s(11594),g=s(15421);class b extends t.Component{constructor(){super(...arguments),this.state={branches:[],currentPageNumber:1,startOffset:0},this.handleSelect=e=>{e>0&&e-1<this.state.branches.length/10&&this.setState({currentPageNumber:e,startOffset:10*(e-1)})},this.deleteBranch=e=>{window.confirm("Are you sure you want to delete?")&&(0,r.SN)(e,((e,a)=>{e&&this.history.push(c.A.adminBranches),a.success?this.updateData():window.alert(a.message)}))},this.p=this.props.permissions||{},this.columnData=[{Header:"S.N",accessor:"serial"},{Header:"Name",accessor:"name",Cell:e=>{let{row:a}=e;return(0,i.jsx)(n.Link,{className:"text-break",style:{color:"#17a2b8",cursor:"pointer"},to:c.A.adminBranchesView+"?i="+o.A.getHash(a.original.id),children:a.values.name})}},{Header:"Street",accessor:"street"},{Header:"City",accessor:"city"},{Header:"Country",accessor:"country"},{Header:"Phone",accessor:"phoneNumber",disableSortBy:!0},{Header:"Mail Id",accessor:"mailId",disableSortBy:!0},{Header:"Actions",accessor:"action",disableSortBy:!0,Cell:e=>{let{row:a}=e;return(0,i.jsxs)("div",{style:{cursor:"pointer"},children:[(0,i.jsx)(x.A,{to:c.A.adminBranchesEdit+"?i="+o.A.getHash(a.original.id),buttonType:"edit",permission:this.p.branch}),(0,i.jsx)(x.A,{onClick:()=>this.deleteBranch(a.original.id),buttonType:"delete",permission:this.p.branch})]})}}]}updateData(){(0,r.p9)(((e,a)=>{e||a.success&&(a.data.forEach(((e,a)=>{e.serial=a+1})),this.setState({branches:a.data}))}))}componentDidMount(){this.updateData()}render(){return(0,i.jsxs)(d.A,{className:"shadow",children:[(0,i.jsxs)(h.A,{children:[(0,i.jsx)("p",{className:"h5",children:"Branch List"}),this.p.branch===l.Xd||this.p.branch===l.n7?(0,i.jsxs)(n.Link,{to:c.A.adminBranchesAdd,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,i.jsx)("i",{className:"fa fa-plus"}),"Add Branch"]}):null]}),(0,g.onlyForThisVendor)([g.banks.rbb.name,g.banks.citizen.name])&&(0,i.jsx)("div",{className:"alert alert-dark mr-3 ml-3 mt-3",role:"alert",children:"Note: Only admin or centeral head is allowed add branch."}),(0,i.jsx)(u.A,{children:(0,i.jsx)(p.A,{columns:this.columnData,data:this.state.branches})})]})}}const j=(0,m.Ng)((e=>({allFields:e.allFields})))(b)},30358:(e,a,s)=>{s.d(a,{MR:()=>d,SN:()=>h,cM:()=>u,d7:()=>i,p9:()=>c,t0:()=>o,ys:()=>l});var t=s(76400);const n="/branches",r="/district";function l(e,a){t.E8.post(`${n}`,e).then((e=>e.data)).then((e=>{a(null,e)})).catch((e=>{console.log(e),a(e)}))}function c(e){t.E8.get(`${n}`).then((e=>e.data)).then((a=>{e(null,a)})).catch((a=>{console.log(a),e(a)}))}function o(e,a){t.E8.put(`${n}`,e).then((e=>e.data)).then((e=>{a(null,e)})).catch((e=>{console.log(e),a(e)}))}function i(e,a){t.E8.get(`${n}/${e}`).then((e=>e.data)).then((e=>{a(null,e)})).catch((e=>{console.log(e),a(e)}))}function d(e,a){t.E8.get(`${n}/logo/${e}`).then((e=>e.data)).then((e=>{a(null,e)})).catch((e=>{console.log(e),a(e)}))}function h(e,a){t.E8.delete(`${n}/${e}`).then((e=>e.data)).then((e=>{a(null,e)})).catch((e=>{console.log(e),a(e)}))}function u(e){t.E8.get(`${r}`).then((e=>e.data)).then((a=>{e(null,a)})).catch((a=>{console.log(a),e(a)}))}},97404:(e,a,s)=>{s.d(a,{A:()=>x});var t=s(65043),n=s(71094),r=s(58472),l=s(25852),c=s(13718),o=s(97508),i=s(59135),d=s(87561),h=s(7467),u=s(88988),m=s(95702),p=(s(15421),s(70579));const x=(0,o.Ng)((e=>({allFields:e.allFields,searchData:e.docSearchData})))((function(e){const{columns:a,data:s,allData:o}=e,[x,g]=(0,t.useState)(""),{getTableProps:b,getTableBodyProps:j,headerGroups:f,page:N,gotoPage:A,setPageSize:y,prepareRow:v,setFilter:S,state:{pageIndex:w,pageSize:D}}=(0,n.useTable)({columns:a,data:x&&(e.LocationMapBata||e.securityHierarchyBata)?o:s},n.useFilters,n.useSortBy,n.usePagination);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"form-group rounded",children:(0,p.jsxs)("div",{className:"input-group mb-2",children:[(0,p.jsx)("div",{className:"input-group-prepend rounded",children:(0,p.jsx)("div",{className:"input-group-text rounded",children:(0,p.jsx)("i",{className:"fas fa-search"})})}),(0,p.jsx)("input",{name:e.name||"name",value:x,className:"form-control rounded",onChange:e=>{const a=e.target.value||void 0;if("DocumentName"===e.target.name)S("DocumentName",a),g(a);else S("name",a),g(a)},placeholder:"Search by name column"})]})}),(0,p.jsxs)(r.A,{responsive:!0,bordered:!0,hover:!0,...b(),id:"toExcelData",children:[(0,p.jsx)("thead",{className:"table-active",children:f.map((e=>(0,p.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,p.jsxs)("th",{...e.getHeaderProps(e.getSortByToggleProps()),className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:[e.render("Header"),(0,p.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,p.jsxs)("span",{children:["  ",(0,p.jsx)("i",{className:"fas fa-caret-square-down text-info ml-2"})]}):(0,p.jsxs)("span",{children:["  ",(0,p.jsx)("i",{className:"fas fa-caret-square-up text-info pl-1"})]}):(0,p.jsxs)("span",{children:[" ",(0,p.jsx)("i",{className:"fas fa-sort text-info pl-1"})]})})]})))})))}),(0,p.jsx)("tbody",{...j(),children:N.map(((e,a)=>(v(e),(0,p.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>(0,p.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),(0,p.jsxs)(l.A,{children:[(0,p.jsx)(c.A,{children:(0,p.jsx)(i.A,{count:parseInt(Math.ceil(s.length/D)),onChange:(e,a)=>{A(a-1)},shape:"rounded",page:w+1})}),(0,p.jsx)(c.A,{children:(0,p.jsxs)("div",{className:"float-right mt-2 d-flex align-items-center",children:[(0,p.jsx)("p",{className:"mb-0 mr-2",children:"Items Per Page"}),(0,p.jsx)(d.A,{children:(0,p.jsxs)(h.A,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:D,onChange:e=>{y(Number(e.target.value))},className:"form-control rounded",children:[(0,p.jsx)(u.A,{value:5,children:"5"}),(0,p.jsx)(u.A,{value:10,children:"10"}),(0,p.jsx)(u.A,{value:20,children:"20"})]})}),(0,p.jsxs)("p",{className:"mb-0 ml-2",children:["Total Documents :",(0,p.jsx)("b",{className:"mr-2",children:s.length})," Page :",(0,p.jsxs)("b",{children:[" ",w+1]})]}),(0,p.jsx)(m.A,{id:"toExcel-button",className:"btn btn-sm ml-2 btn-primary text-white float-right",table:"toExcelData",filename:"attachmentstable",sheet:"tablexls",buttonText:"Download Report"})]})})]})]})}))}}]);
//# sourceMappingURL=6120.b97ecf58.chunk.js.map