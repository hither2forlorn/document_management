"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[9538],{97404:(e,t,s)=>{s.d(t,{A:()=>x});var a=s(65043),i=s(71094),o=s(58472),n=s(25852),r=s(13718),l=s(97508),c=s(59135),d=s(87561),h=s(7467),p=s(88988),u=s(95702),m=(s(15421),s(70579));const x=(0,l.Ng)((e=>({allFields:e.allFields,searchData:e.docSearchData})))((function(e){const{columns:t,data:s,allData:l}=e,[x,g]=(0,a.useState)(""),{getTableProps:j,getTableBodyProps:f,headerGroups:y,page:b,gotoPage:v,setPageSize:N,prepareRow:M,setFilter:A,state:{pageIndex:C,pageSize:S}}=(0,i.useTable)({columns:t,data:x&&(e.LocationMapBata||e.securityHierarchyBata)?l:s},i.useFilters,i.useSortBy,i.usePagination);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"form-group rounded",children:(0,m.jsxs)("div",{className:"input-group mb-2",children:[(0,m.jsx)("div",{className:"input-group-prepend rounded",children:(0,m.jsx)("div",{className:"input-group-text rounded",children:(0,m.jsx)("i",{className:"fas fa-search"})})}),(0,m.jsx)("input",{name:e.name||"name",value:x,className:"form-control rounded",onChange:e=>{const t=e.target.value||void 0;if("DocumentName"===e.target.name)A("DocumentName",t),g(t);else A("name",t),g(t)},placeholder:"Search by name column"})]})}),(0,m.jsxs)(o.A,{responsive:!0,bordered:!0,hover:!0,...j(),id:"toExcelData",children:[(0,m.jsx)("thead",{className:"table-active",children:y.map((e=>(0,m.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,m.jsxs)("th",{...e.getHeaderProps(e.getSortByToggleProps()),className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:[e.render("Header"),(0,m.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,m.jsxs)("span",{children:["  ",(0,m.jsx)("i",{className:"fas fa-caret-square-down text-info ml-2"})]}):(0,m.jsxs)("span",{children:["  ",(0,m.jsx)("i",{className:"fas fa-caret-square-up text-info pl-1"})]}):(0,m.jsxs)("span",{children:[" ",(0,m.jsx)("i",{className:"fas fa-sort text-info pl-1"})]})})]})))})))}),(0,m.jsx)("tbody",{...f(),children:b.map(((e,t)=>(M(e),(0,m.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>(0,m.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),(0,m.jsxs)(n.A,{children:[(0,m.jsx)(r.A,{children:(0,m.jsx)(c.A,{count:parseInt(Math.ceil(s.length/S)),onChange:(e,t)=>{v(t-1)},shape:"rounded",page:C+1})}),(0,m.jsx)(r.A,{children:(0,m.jsxs)("div",{className:"float-right mt-2 d-flex align-items-center",children:[(0,m.jsx)("p",{className:"mb-0 mr-2",children:"Items Per Page"}),(0,m.jsx)(d.A,{children:(0,m.jsxs)(h.A,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:S,onChange:e=>{N(Number(e.target.value))},className:"form-control rounded",children:[(0,m.jsx)(p.A,{value:5,children:"5"}),(0,m.jsx)(p.A,{value:10,children:"10"}),(0,m.jsx)(p.A,{value:20,children:"20"})]})}),(0,m.jsxs)("p",{className:"mb-0 ml-2",children:["Total Documents :",(0,m.jsx)("b",{className:"mr-2",children:s.length})," Page :",(0,m.jsxs)("b",{children:[" ",C+1]})]}),(0,m.jsx)(u.A,{id:"toExcel-button",className:"btn btn-sm ml-2 btn-primary text-white float-right",table:"toExcelData",filename:"attachmentstable",sheet:"tablexls",buttonText:"Download Report"})]})})]})]})}))},79538:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(65043),i=s(75304),o=s(38477),n=s(25852),r=s(44864),l=s(62582),c=s(58441),d=s(80231),h=s(70579);class p extends a.Component{constructor(e){super(e),this.state={editButtonShow:!1},this.getLocationChildren=this.getLocationChildren.bind(this)}toggleChildren(e){const t="cursor-pointer"+e,s=document.getElementsByClassName(t);for(let a=0;a<s.length;a++){const e=s[a];"none"===e.style.display?e.style.display="block":e.style.display="none"}}getSecurityHierarchyPath(e){var t,s;const a=[];if(!e)return;const i=this.props.hierarchy.filter((t=>t.code===e));return null!==(null===(t=i[0])||void 0===t?void 0:t.parentId)&&this.props.hierarchy.forEach((e=>{var t;e.id===(null===(t=i[0])||void 0===t?void 0:t.parentId)&&a.push(e.name)})),a.push(null===(s=i[0])||void 0===s?void 0:s.name),a.toString().replace(","," --\x3e ")}getLocationChildren(e){const t=this.props.locationMaps;let s=[];return t.filter((t=>(null===t||void 0===t?void 0:t.parentId)===e?1:0)).forEach(((e,t)=>{s.push((0,h.jsxs)("div",{className:"cursor-pointer"+e.parentId,style:{marginLeft:20,cursor:"pointer",display:"none"},children:[(0,h.jsx)("i",{className:"fa fa-angle-down mr-2",onClick:()=>this.toggleChildren(e.id)}),(0,h.jsxs)("span",{onClick:()=>this.props.onFilter(e.id)&this.toggleChildren(e.id),title:this.getSecurityHierarchyPath(e.hierarchy),children:[(0,h.jsx)("i",{className:"fa fa-folder-o mr-2"}),e.name+" ",(0,h.jsx)(l.Link,{to:d.A.adminLocationMapsEdit+"?i="+c.A.getHash(e.id),style:{display:this.state.editButtonShow?"inline":"none",cursor:this.state.editButtonShow?"pointer":"none"},children:"[EDIT]"})]}),(0,h.jsx)("br",{}),this.getLocationChildren(e.id)]},t))})),s.map((e=>e))}toggleEditButton(){this.setState({editButtonShow:!this.state.editButtonShow})}render(){return(0,h.jsxs)(i.A,{className:"shadow",children:[(0,h.jsx)(o.A,{children:(0,h.jsxs)(n.A,{children:[(0,h.jsxs)("p",{className:"h5",children:[(0,h.jsx)("i",{className:"fas fa-map-marked mr-1"}),"Location Map List"]}),(0,h.jsx)("span",{style:{cursor:"pointer"},onClick:()=>this.props.onFilter(null),className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:(0,h.jsx)("i",{className:"fa fa-refresh"})})]})}),(0,h.jsx)(r.A,{children:this.props.locationMaps.map(((e,t)=>{var s;let a=null===(s=this.props.locationMaps[0])||void 0===s?void 0:s.level;return this.props.locationMaps.forEach((e=>{a>=e.level&&(a=e.level)})),e.level===a?(0,h.jsxs)("div",{id:"cursor-pointer",className:"cursor-pointer",style:{marginLeft:20*e.level,cursor:"pointer"},onMouseOver:()=>this.setState({editButtonShow:!0}),onMouseOut:()=>this.setState({editButtonShow:!1}),children:[(0,h.jsx)("i",{className:"fa fa-caret-down mr-2",onClick:()=>this.toggleChildren(e.id)}),(0,h.jsxs)("span",{onClick:()=>this.props.onFilter(e.id)&this.toggleChildren(e.id),title:this.getSecurityHierarchyPath(e.hierarchy),children:[(0,h.jsx)("i",{className:"fa fa-folder-o mr-2"}),e.name+" ",(0,h.jsxs)(l.Link,{to:d.A.adminLocationMapsEdit+"?i="+c.A.getHash(e.id),style:{display:this.state.editButtonShow?"inline":"none",cursor:this.state.editButtonShow?"pointer":"none"},children:["[EDIT]"," "]})]}),(0,h.jsx)("br",{}),this.getLocationChildren(e.id)]},t):null}))})]})}}var u=s(18039),m=s(46759),x=s(97508),g=s(11594),j=s(97404),f=s(86178),y=s.n(f),b=s(39966);class v extends a.Component{constructor(){super(...arguments),this.columnData=[{Header:"S.N",accessor:"serial"},{Header:"Name",accessor:"name"},{Header:"Description",accessor:"description"},{Header:"Location Type",accessor:"locationTypeId",Cell:e=>{let{row:t}=e;return(0,m._W)(this.props.locationTypes,t.original.locationTypeId)}},{Header:"Created By",accessor:"createdBy",Cell:e=>{let{row:t}=e;return console.log(this.props.allFields.users,t.original.createdBy),(0,m._W)(this.props.allFields.users,t.original.createdBy)}},1==this.props.userProfile.id?{Header:"Hierarchy",accessor:"hierarchy"}:null,{Header:"Created At",accessor:"createdAt",Cell:e=>y()(e).format("dddd, MMMM Do YYYY")},{Header:"Actions",accessor:"action",disableSortBy:!0,Cell:e=>{let{row:t}=e;const s=this.props.permissions||{};return(0,h.jsxs)("div",{style:{cursor:"pointer"},children:[(0,h.jsx)(g.A,{to:d.A.adminLocationMapsEdit+"?i="+c.A.getHash(t.original.id),buttonType:"edit",permission:s.locationMap}),(0,h.jsx)(g.A,{onClick:()=>this.props.deleteLocationMap(t.original.id),buttonType:"delete",permission:s.locationType})]})}}],this.columnData=this.columnData.filter((e=>null!=e))}render(){(0,b.z8)(this.props.locationMapsOnTable),(0,b.z8)(this.props.allLocationData);const e=this.props.permissions||{};return(0,h.jsxs)(i.A,{className:"sh adow",children:[(0,h.jsxs)(o.A,{children:[(0,h.jsx)("p",{className:"h5",children:"Location Maps"}),e.locationMap===u.Xd||e.locationMap===u.n7?(0,h.jsxs)(l.Link,{to:d.A.adminLocationMapsAdd,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,h.jsx)("i",{className:"fa fa-plus"}),"Add Location Map"]}):null]}),(0,h.jsx)(r.A,{children:(0,h.jsx)(j.A,{columns:this.columnData,LocationMapBata:!0,data:this.props.locationMapsOnTable,allData:this.props.allLocationData})})]})}}const N=(0,x.Ng)((e=>({locationTypes:e.allFields.locationTypes||[],userProfile:e.userProfile||[]})))(v);var M=s(40013),A=s(37519),C=s(28096),S=s(13718);class D extends a.Component{constructor(e){super(e),this.state={locationMaps:[],locationMapsOnTable:[]},this.deleteLocationMap=e=>{window.confirm("Are you sure, you want to delete?")&&(0,M.FW)(e,((e,t)=>{e&&this.history.push(d.A.adminLocationMaps),t.success?(C.oR.success("Success!"),this.updateData(),this.props.dispatch((0,A.Ni)())):C.oR.error(t.message)}))},this.updateData=()=>{(0,M.DG)(((e,t)=>{e||this.setState({locationMaps:t.data},(()=>{this.onFilter(null)}))}))},this.onFilter=this.onFilter.bind(this)}onFilter(e){const t=this.state.locationMaps.filter((t=>t.parentId===e?1:0));this.setState({locationMapsOnTable:t})}componentDidMount(){this.updateData()}renderItems(){return(0,h.jsxs)(n.A,{children:[(0,h.jsx)(S.A,{md:4,children:(0,h.jsx)(p,{locationMaps:this.state.locationMaps,hierarchy:this.props.allFields.hierarchy,onFilter:this.onFilter})}),(0,h.jsx)(S.A,{md:8,className:"pl-3 pl-md-0",children:(0,h.jsx)(N,{allLocationData:this.state.locationMaps,locationMapsOnTable:this.state.locationMapsOnTable,deleteLocationMap:this.deleteLocationMap,...this.props})})]})}render(){return this.renderItems()}}const L=(0,x.Ng)((e=>({allFields:e.allFields||[]})))(D)},40013:(e,t,s)=>{s.d(t,{$g:()=>r,DG:()=>o,FW:()=>c,Q8:()=>n,SW:()=>l});var a=s(76400);const i="/location-map";function o(e){a.E8.get(`${i}`).then((t=>{e(null,t.data)})).catch((t=>{e(t)}))}function n(e,t){a.E8.get(`${i}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function r(e,t){a.E8.post(`${i}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function l(e,t){a.E8.put(`${i}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function c(e,t){a.E8.delete(`${i}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}}}]);
//# sourceMappingURL=9538.670e1551.chunk.js.map