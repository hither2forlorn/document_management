{"version":3,"file":"static/js/8264.c87fc2fb.chunk.js","mappings":"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","sources":["admin/views/Memo/MemoNew.js","admin/views/Memo/api/form.js","admin/views/Memo/api/memo.js","admin/views/Memo/components/HTMLFormRender.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Card, CardFooter, CardBody, CardHeader, Label, Form, Button } from \"reactstrap\";\r\nimport FormBuilder from \"gentech-form-builder\";\r\nimport { getForm } from \"./api/form\";\r\nimport { getFormData } from \"config/form\";\r\nimport { ADMIN_USER } from \"config/values\";\r\nimport { addMemo } from \"./api/memo\";\r\nimport A from \"config/url\";\r\nimport { toast } from \"react-toastify\";\r\nimport query from \"querystring\";\r\nimport HTMLFormRender from \"./components/HTMLFormRender\";\r\nimport metaRoutes from \"config/meta_routes\";\r\n\r\nconst MemoNew = (props) => {\r\n  const qs = query.parse(props.location.search);\r\n  const formIdOrTag = qs.tag || A.getId(qs[\"?i\"]);\r\n  const [form, setForm] = useState({});\r\n  const [formData, setFormData] = useState([]);\r\n  const [isMounted, setMounted] = useState(false);\r\n  useEffect(() => {\r\n    if (!formIdOrTag) {\r\n      props.history.push(metaRoutes.formList);\r\n    } else {\r\n      getForm(formIdOrTag).then((form) => {\r\n        setMounted(true);\r\n        setForm({ ...form });\r\n        switch (form.type) {\r\n          case \"html\":\r\n            setFormData(form.formData);\r\n            break;\r\n          case \"dynamic\":\r\n            setFormData(JSON.parse(form.formData));\r\n            break;\r\n          default:\r\n            toast.warn(\"Error occurred!\");\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }, []); //eslint-disable-line\r\n  const submitFormHTML = (e) => {\r\n    e.preventDefault();\r\n    const formData = getFormData(e);\r\n    const memoValues = Object.keys(formData).map((key) => ({\r\n      name: key,\r\n      value: formData[key],\r\n    }));\r\n    const memo = {\r\n      formId: form.id,\r\n      workflowId: form.workflowId,\r\n      memoValues: memoValues,\r\n    };\r\n    submitForm(memo);\r\n  };\r\n  const submitFormBuilder = (data) => {\r\n    const memoValues = data;\r\n    const memo = {\r\n      formId: form.id,\r\n      workflowId: form.workflowId,\r\n      memoValues: memoValues,\r\n    };\r\n    submitForm(memo);\r\n  };\r\n  const submitForm = (memo) => {\r\n    addMemo(memo, (err, json) => {\r\n      if (err) toast.error(\"Error!\");\r\n      else {\r\n        toast.success(\"Success! Request have been generated\");\r\n      }\r\n      props.history.push(metaRoutes.adminDashboard);\r\n    });\r\n  };\r\n  return !isMounted ? null : (\r\n    <Card className=\"shadow\">\r\n      <CardHeader>\r\n        <Label>Name: {form.name}</Label>\r\n        <br />\r\n        <Label>Description:</Label>\r\n        <p>{form.description}</p>\r\n      </CardHeader>\r\n      <CardBody>\r\n        {form.type === \"html\" ? (\r\n          <Form onSubmit={submitFormHTML}>\r\n            <HTMLFormRender type={ADMIN_USER} formData={formData} />\r\n            <Button type=\"submit\" size=\"sm\" color=\"success\">\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        ) : null}\r\n        {form.type === \"dynamic\" ? (\r\n          <FormBuilder.ReactFormGenerator onSubmit={submitFormBuilder} answer_data={[]} data={formData} />\r\n        ) : null}\r\n      </CardBody>\r\n      <CardFooter></CardFooter>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MemoNew;\r\n","import { server } from \"admin/config/server\";\r\n\r\nconst url = \"/forms\";\r\n\r\nexport const getForms = (callback) => {\r\n  server\r\n    .get(`${url}`)\r\n    .then((res) => {\r\n      callback(null, res.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const addForm = (data, callback) => {\r\n  server\r\n    .post(`${url}`, data)\r\n    .then((res) => {\r\n      callback(null, res.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const editForm = (data, callback) => {\r\n  server\r\n    .put(`${url}`, data)\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const getForm = (id) => {\r\n  return server.get(`${url}/${id}`).then((res) => res.data);\r\n};\r\n\r\nexport const deleteForm = (id, callback) => {\r\n  server\r\n    .delete(`${url}/${id}`)\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n","import { server } from \"admin/config/server\";\r\n\r\nconst url = \"/memo\";\r\n\r\nexport const startWorkflow = (data, callback) => {\r\n  const memoId = data.memoId;\r\n  server\r\n    .post(`${url}/start/${memoId}`)\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => callback(err));\r\n};\r\n\r\nexport const addMemo = (data, callback) => {\r\n  server\r\n    .post(`${url}`, data)\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => callback(err));\r\n};\r\n\r\nexport const getMemoList = (formData, callback) => {\r\n  server\r\n    .get(`${url}`, { params: formData })\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => callback(err));\r\n};\r\n\r\nexport const getMemo = (id, callback) => {\r\n  server\r\n    .get(`${url}/${id}`)\r\n    .then((res) => {\r\n      callback(null, res.data);\r\n    })\r\n    .catch((err) => callback(err));\r\n};\r\n\r\nexport const deleteMemo = (id, callback) => {\r\n  server\r\n    .delete(`${url}/${id}`)\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => callback(err));\r\n};\r\n\r\nexport const editMemo = (data, callback) => {\r\n  server\r\n    .put(`${url}`, data)\r\n    .then((res) => callback(null, res.data))\r\n    .catch((err) => callback(err));\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { ADMIN_USER, CLIENT_USER } from \"config/values\";\r\n\r\nconst HTMLFormRender = (props) => {\r\n  const type = props.type || null;\r\n  const isEdit = props.isEdit || false;\r\n  const bankUserEdit = props.isEditBank || false;\r\n  const memoValues = props.memoValues || [];\r\n  const formData = props.formData || \"\";\r\n  useEffect(() => {\r\n    switch (type) {\r\n      case ADMIN_USER:\r\n        break;\r\n      case CLIENT_USER:\r\n        const el = document.getElementById(\"bank-segment\");\r\n        if (el) el.parentNode.removeChild(el);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    memoValues.forEach(({ name, value }) => {\r\n      const elements = document.getElementsByName(name);\r\n      if (elements.length !== 0) {\r\n        elements.forEach((element) => {\r\n          console.log(isEdit, bankUserEdit);\r\n          if (isEdit || (bankUserEdit && element.parentNode.id === \"bank-segment\")) {\r\n            element.setAttribute(\"name\", name);\r\n          } else {\r\n            element.setAttribute(\"readonly\", \"readonly\");\r\n            element.removeAttribute(\"name\");\r\n          }\r\n          switch (element.type) {\r\n            case \"checkbox\":\r\n              if (value === \"true\") {\r\n                element.setAttribute(\"checked\", true);\r\n              } else {\r\n                element.removeAttribute(\"checked\");\r\n              }\r\n              break;\r\n            case \"radio\":\r\n              if (JSON.stringify(element.value) === value) {\r\n                element.setAttribute(\"checked\", true);\r\n              }\r\n              break;\r\n            default:\r\n              const formValue = value.slice(1, -1);\r\n              element.setAttribute(\"value\", formValue);\r\n              element.value = JSON.parse(value);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }, [memoValues, isEdit, type]); //eslint-disable-line\r\n  return (\r\n    <div\r\n      id=\"html-form-segment\"\r\n      className=\"my-2\"\r\n      dangerouslySetInnerHTML={{\r\n        __html: formData,\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default HTMLFormRender;\r\n"],"names":["props","qs","query","location","search","formIdOrTag","tag","A","getId","form","setForm","useState","formData","setFormData","isMounted","setMounted","useEffect","getForm","then","type","JSON","parse","toast","warn","history","push","metaRoutes","formList","submitForm","memo","addMemo","err","json","error","success","adminDashboard","_jsxs","Card","className","children","CardHeader","Label","name","_jsx","description","CardBody","Form","onSubmit","e","preventDefault","getFormData","memoValues","Object","keys","map","key","value","formId","id","workflowId","HTMLFormRender","ADMIN_USER","Button","size","color","FormBuilder","data","answer_data","CardFooter","url","getForms","callback","server","get","res","catch","addForm","post","editForm","put","deleteForm","delete","startWorkflow","memoId","getMemoList","params","getMemo","deleteMemo","editMemo","isEdit","bankUserEdit","isEditBank","CLIENT_USER","el","document","getElementById","parentNode","removeChild","forEach","_ref","elements","getElementsByName","length","element","console","log","setAttribute","removeAttribute","stringify","formValue","slice","dangerouslySetInnerHTML","__html"],"sourceRoot":""}