"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[7256],{22552:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(78976),s=(a(65043),a(70579));function l(e){let{isLoading:t}=e;return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.a,{color:"dark",size:"sm",variant:"oval"}),"  ","Loading.."]}):(0,s.jsx)(s.Fragment,{children:" Proceed To Upload"})}},86710:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var n=a(64854),s=a(45413),l=a(8586),i=a(70579);function r(e){var t,a;let{label:r,onChange:d,required:h,errors:c,object:o,options:u,isEdit:m,name:p,getFieldValue:v,...x}=e;return u=null===(t=u)||void 0===t?void 0:t.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:(null===e||void 0===e?void 0:e[v])||(null===e||void 0===e?void 0:e.id)}))),u=null===(a=u)||void 0===a?void 0:a.map((e=>{let t="",a=null!==e&&void 0!==e&&e.level?null===e||void 0===e?void 0:e.level:0;for(;a-- >0;)t+="---";return{...e,label:t+" "+e.label}})),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.A,{children:[(0,i.jsxs)(l.A,{children:[r||"",h&&(0,i.jsx)("span",{className:"text-danger h6 ml-1",children:(0,i.jsx)("b",{children:"*"})})]}),(0,i.jsx)(n.default,{...m?{value:o[p]?o[p]:""}:{},name:p,options:u,onChange:d,...x}),c?(0,i.jsx)("span",{className:"text text-danger",children:c[0]}):null]})})}},57256:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var n=a(65043),s=a(17305),l=a(86453),i=a(37519),r=a(97508),d=a(28096),h=a(80231),c=a(97956),o=a(10810),u=a(75304),m=a(38477),p=a(25852),v=a(13718),x=a(94576),g=a(44864),j=a(45413),A=a(8586),b=a(64412),f=a(83407),y=(a(22552),a(19423)),C=a(28344),S=a(10951),E=a(91815),N=a(70579);class $ extends n.Component{constructor(e){super(e),this.state={departments:[],color:"#ffffff",isDisabled:!1,capitalName:"",securityHierarchyBranches:[],selectedBranches:[],parentList:[],hierarchy:[]},this.handleChange=e=>{const t=e.target.name,a=e.target.value;"colorCode"===t&&this.setState({color:a})},this.handleSelectedBranchesChange=e=>{this.state.selectedBranches=e},this.handleSubmit=e=>{var t,a;e.preventDefault();const n=(0,l.tg)(e),r={hierarchyId:null===this||void 0===this||null===(t=this.state)||void 0===t||null===(a=t.selectedBranches)||void 0===a?void 0:a.map((e=>e.id||[])),...n},c=this.state.hierarchy.filter((e=>e.id===Number(r.parentId)?1:0))[0];r.level=c?c.level:0,(0,s.YE)(r,((e,t)=>{e?(console.log(e.data,t),d.oR.error(e.response.data.message)):(d.oR.success(t.message),this.props.history.push(h.A.adminDepartments),this.props.dispatch((0,i.Ni)()),this.setState({isDisabled:!0}))}))},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this),this.handleSelectedBranchesChange=this.handleSelectedBranchesChange.bind(this)}componentDidMount(){(0,E.wl)(((e,t)=>{var a;const n=null===t||void 0===t||null===(a=t.branches)||void 0===a?void 0:a.filter((e=>e.code.includes("Branch")));e?console.log(e):t.success&&t.branches&&this.setState({securityHierarchyBranches:n})})),(0,s.ax)(((e,t)=>{e||this.setState({parentList:t})})),this.setState({...this.props.allFields}),(0,E.qY)(((e,t)=>{const a=null===t||void 0===t?void 0:t.filter((e=>!e.code.includes("Branch")));e||this.setState({hierarchy:a})}))}renderItems(){return(0,N.jsxs)(u.A,{className:"shadow",children:[(0,N.jsx)(m.A,{children:(0,N.jsx)(p.A,{children:(0,N.jsxs)(v.A,{children:[" ",(0,N.jsx)("i",{className:"fa fa-cogs mr-1"}),"Add Department"]})})}),(0,N.jsxs)(x.A,{onSubmit:this.handleSubmit,onChange:this.handleChange,children:[(0,N.jsxs)(g.A,{children:[(0,N.jsx)(j.A,{children:(0,N.jsxs)(p.A,{children:[(0,N.jsxs)(v.A,{md:4,children:[" ",(0,N.jsx)(A.A,{children:"Name"})]}),(0,N.jsx)(v.A,{md:8,children:(0,N.jsx)(b.A,{onInput:e=>(0,C.P)(e.target),required:!0,name:"name",id:"name",value:this.state.capitalName,onChange:e=>this.setState({capitalName:(0,y.A)(e.target.value)})})})]})}),(0,N.jsx)(j.A,{children:(0,N.jsxs)(p.A,{children:[(0,N.jsx)(v.A,{md:4,children:(0,N.jsx)(A.A,{children:"Security Hierarchy Parent Category"})}),(0,N.jsx)(v.A,{md:8,children:(0,N.jsxs)(b.A,{type:"select",name:"parentId",id:"parentId",children:[(0,N.jsx)("option",{value:"",children:"--- NONE ---"}),this.state.hierarchy.map((e=>{let t="",a=e.id,n=e.level;for(;n-- >0;)t+="---";return(0,N.jsx)("option",{value:a,children:t+" "+e.name},a)}))]})})]})}),(0,N.jsx)(j.A,{children:(0,N.jsxs)(p.A,{className:"align-items-center",children:[(0,N.jsx)(v.A,{md:4,children:(0,N.jsx)(A.A,{children:"Branches"})}),(0,N.jsx)(v.A,{md:8,children:(0,N.jsx)(S.A,{branches:this.state.securityHierarchyBranches,setSelectedValues:this.handleSelectedBranchesChange})})]})})]}),(0,N.jsxs)(f.A,{className:"d-flex justify-content-end",children:[" ",(0,N.jsx)(c.A,{onClick:()=>window.history.back()}),(0,N.jsx)(o.A,{isDisabled:this.state.isDisabled})]})]})]})}render(){return this.renderItems()}}const B=(0,r.Ng)((e=>({allFields:e.allFields})))($)},10951:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(65043),s=a(86710),l=a(70579);function i(e){let{branches:t,setSelectedValues:a,selectedBranches:i}=e;const[r,d]=(0,n.useState)(null);return(0,l.jsx)("div",{children:(0,l.jsx)(s.A,{options:t,value:i,getFieldValue:"id",onChange:e=>{d(e),a(e)},isMulti:!0,getOptionLabel:e=>e.name,getOptionValue:e=>e.id})})}},17305:(e,t,a)=>{a.d(t,{Aj:()=>h,D9:()=>i,YE:()=>r,ax:()=>l,df:()=>d});var n=a(76400);const s="/department";function l(e){n.E8.get(`${s}`).then((t=>{e(null,t.data)})).catch((t=>{e(t)}))}function i(e,t){n.E8.get(`${s}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function r(e,t){n.E8.post(`${s}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function d(e,t){n.E8.put(`${s}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function h(e,t){n.E8.delete(`${s}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}},91815:(e,t,a)=>{a.d(t,{$k:()=>c,Pb:()=>d,aY:()=>o,mI:()=>r,nV:()=>u,nn:()=>h,qY:()=>l,wl:()=>i});var n=a(76400);const s="/security-hierarchy",l=e=>{n.E8.get(`${s}`).then((t=>{e(null,t.data)})).catch((t=>{e(t)}))},i=e=>{n.E8.get("/security-hierarchy-branches").then((t=>{e(null,t.data)})).catch((t=>{e(t)}))},r=(e,t)=>{n.E8.get(`${s}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))},d=(e,t)=>{n.E8.post(`${s}`,e).then((e=>{console.log(e.data),t(null,e.data)})).catch((e=>{t(e)}))},h=e=>{n.E8.get("/branchesFilter").then((t=>{e(null,t.data)})).catch((t=>{e(t)}))},c=e=>{n.E8.get("/departmentsFilter").then((t=>{e(null,t.data)})).catch((t=>{e(t)}))},o=(e,t)=>{n.E8.put(`${s}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))},u=(e,t)=>{n.E8.delete(`${s}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}},28344:(e,t,a)=>{a.d(t,{P:()=>n});const n=e=>{/^\s/.test(e.value)&&(e.value="")}},19423:(e,t,a)=>{function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}a.d(t,{A:()=>n})}}]);
//# sourceMappingURL=7256.22689100.chunk.js.map