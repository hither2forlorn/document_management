{"version":3,"file":"static/js/3443.b313f6eb.chunk.js","mappings":"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","sources":["admin/components/ReactSelect.js","admin/views/Departments/Component/DepartmentBranchSelect.js","admin/views/Departments/EditDepartment.js","admin/views/Departments/api.js","admin/views/SecurityHierarchy/api.js"],"sourcesContent":["import React from \"react\";\r\nimport Select from \"react-select\";\r\n\r\nimport { Label, Input, FormGroup, Col } from \"reactstrap\";\r\nexport default function ReactSelect({\r\n  label,\r\n  onChange,\r\n  required,\r\n  errors,\r\n  object,\r\n  options,\r\n  isEdit,\r\n  name,\r\n  getFieldValue,\r\n  ...rest\r\n}) {\r\n  options = options?.map((row) => {\r\n    return { ...row, label: row?.name, value: row?.[getFieldValue] || row?.id };\r\n  });\r\n\r\n  options = options?.map((row) => {\r\n    let padding = \"\";\r\n    let level = row?.level ? row?.level : 0;\r\n    while (level-- > 0) {\r\n      padding += \"---\";\r\n    }\r\n\r\n    return { ...row, label: padding + \" \" + row.label };\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <FormGroup>\r\n        <Label>\r\n          {label ? label : \"\"}\r\n          {required && (\r\n            <span className=\"text-danger h6 ml-1\">\r\n              <b>*</b>\r\n            </span>\r\n          )}\r\n        </Label>\r\n        <Select\r\n          {...(isEdit\r\n            ? {\r\n              value: object[name] ? object[name] : \"\",\r\n            }\r\n            : {})}\r\n          name={name}\r\n          options={options}\r\n          onChange={onChange}\r\n          {...rest}\r\n        />\r\n        {errors ? <span className=\"text text-danger\">{errors[0]}</span> : null}\r\n      </FormGroup>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport ReactSelect, { StylesConfig } from \"../../../components/ReactSelect\";\r\n\r\n\r\n\r\n\r\nexport default function DepartmentBranchSelect({ branches, setSelectedValues, selectedBranches }) {\r\n  const [selectedOption, setSelectedOption] = useState(null);\r\n  const handleSelectChange = (selectedOption) => {\r\n    setSelectedOption(selectedOption);\r\n    setSelectedValues(selectedOption);\r\n  };\r\n  return (\r\n    <div>\r\n      <ReactSelect\r\n        // name=\"department\"\r\n        options={branches}\r\n        // required={true}\r\n        // errors={errors}\r\n        // object={object}\r\n        value={selectedBranches}\r\n        getFieldValue=\"id\"\r\n        onChange={handleSelectChange}\r\n        isMulti\r\n        getOptionLabel={(e) => e.name}\r\n        getOptionValue={(e) => e.id}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { editDepartment, getDepartment, getDepartments } from \"./api\";\r\nimport A from \"config/url\";\r\nimport { loadAllFields } from \"redux/actions/apiAction\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button } from \"reactstrap\";\r\nimport metaRoutes from \"config/meta_routes\";\r\nimport query from \"querystring\";\r\nimport { Card, CardBody, CardHeader, Row, Col, CardFooter, Label, Input, FormGroup, Form } from \"reactstrap\";\r\nimport titleCase from \"utils/textCapital\";\r\nimport DepartmentBranchSelect from \"./Component/DepartmentBranchSelect\";\r\nimport { getSecurityHierarchy, getSecurityHierarchyBranches } from \"../SecurityHierarchy/api\";\r\nimport { getFormData } from \"config/form\";\r\n\r\nclass EditDepartment extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    // this.branches = this.branches.bind(this);\r\n    this.handleSelectedBranchesChange = this.handleSelectedBranchesChange.bind(this);\r\n  }\r\n\r\n  state = {\r\n    department: {},\r\n    departments: [],\r\n    securityHierarchyBranches: [],\r\n    selectedBranches: [],\r\n    parentList: [],\r\n    selectedBranchesList: [],\r\n    hierarchy: []\r\n  };\r\n\r\n  componentDidMount() {\r\n    const qs = query.parse(this.props.location.search);\r\n    const id = A.getId(qs[\"?i\"]);\r\n    A.getId(this.props.match.params.id);\r\n    if (!id) {\r\n      window.location.replace(metaRoutes.adminDepartments);\r\n      return;\r\n    }\r\n    getDepartment(id, (err, data) => {\r\n      if (err) return;\r\n      if (data.success && data.data) {\r\n        this.setState({\r\n          department: data.data,\r\n          selectedBranchesList: data.data.branches.map(branch => ({\r\n            id: branch.branchId,\r\n            name: branch.branchName,\r\n          })),\r\n        });\r\n      }\r\n    });\r\n    getSecurityHierarchy((err, hierarchy) => {\r\n      const securityHierarchy = hierarchy?.filter((h) => !h.code.includes(\"Branch\"))\r\n      if (err) return;\r\n      this.setState({\r\n        hierarchy: securityHierarchy\r\n      })\r\n    })\r\n    getSecurityHierarchyBranches((err, data) => {\r\n      const branches = data?.branches?.filter((d) => d.code.includes(\"Branch\"));\r\n      if (err) {\r\n        console.log(err);\r\n        return;\r\n      }\r\n      if (data.success && data.branches) {\r\n        this.setState(\r\n          {\r\n            securityHierarchyBranches: branches\r\n          }\r\n        );\r\n      }\r\n    });\r\n    getDepartments((err, departments) => {\r\n      if (err) return;\r\n      this.setState(\r\n        {\r\n          parentList: departments\r\n        }\r\n      );\r\n    });\r\n    this.setState({\r\n      ...this.props.allFields,\r\n    });\r\n  }\r\n  handleSelectedBranchesChange = (selectedOption) => {\r\n    this.setState({ selectedBranchesList: selectedOption });\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const name = event.target.name;\r\n    let value = event.target.value;\r\n    const department = this.state.department;\r\n\r\n    if (name === \"name\") {\r\n      this.setState({\r\n        department: { ...department, [name]: value },\r\n      });\r\n      return;\r\n    }\r\n    if (name === \"parentId\") {\r\n      const hierarchy = this.state.hierarchy;\r\n      const parent = hierarchy.find((item) => item.id === Number(value));\r\n      if (parent) {\r\n        if (parent.id === hierarchy.id) {\r\n          toast.warn(\"Cannot select itself as parent!\");\r\n          return;\r\n        }\r\n        department.securityHierarchyId = parent.id;\r\n        department.level = parent.level + 1;\r\n      } else {\r\n        department.securityHierarchyId = null;\r\n        department.level = 0;\r\n      }\r\n    }\r\n    this.setState({\r\n      department: { ...department, [name]: value },\r\n    });\r\n  };\r\n\r\n\r\n  handleDepartmentParentChange = (event) => {\r\n    const name = event.target.name;\r\n    let value = event.target.value;\r\n    const department = this.state.department;\r\n    const parent = this.state.parentList.find((item) => item.id === Number(value));\r\n\r\n    if (parent) {\r\n      if (parent.id === department.id) {\r\n        toast.warn(\"Cannot select itself as parent!\");\r\n        return;\r\n      } else {\r\n        department.parentId = parent.id;\r\n        department.level = parent.level + 1;\r\n      }\r\n    } else {\r\n      department.parentId = null;\r\n      department.level = 0;\r\n    }\r\n    this.setState({\r\n      department: { ...department, [name]: value },\r\n    });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const formData = getFormData(event);\r\n    const updateData = { hierarchyId: this.state.selectedBranchesList?.map((branch) => branch.id) || [], ...formData, id: this.state.department.id }\r\n    const parent = this.state.hierarchy.filter((item) => {\r\n      if (item.id === Number(updateData.parentId)) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    })[0];\r\n    if (parent) {\r\n      // updateData.level = parent.level + 1;\r\n      updateData.level = parent.level;\r\n    } else {\r\n      updateData.level = 0;\r\n    }\r\n    editDepartment(updateData, (err, data) => {\r\n      if (err.response && err.response.data && err.response.data.message) {\r\n        toast.error(err.response.data.message);\r\n      } else {\r\n        toast.success(\"Edited Sucessfully.\");\r\n      }\r\n\r\n      if (data) {\r\n        if (data.message) {\r\n          toast.success(data.message);\r\n        } else {\r\n          toast.error(\"Unexpected response structure.\");\r\n        }\r\n      }\r\n\r\n      this.props.history.push(metaRoutes.adminDepartments);\r\n      this.props.dispatch(loadAllFields());\r\n    });\r\n  };\r\n  renderItems() {\r\n    if (!Array.isArray(this.state.departments) || (this.state.departments.success === false)) {\r\n      return null; // Render nothing if no departments or unsuccessful fetch\r\n    }\r\n    return (\r\n      <Card className=\"shadow\">\r\n        <CardHeader>\r\n          <Row>\r\n            <Col>\r\n              {\" \"}\r\n              <i className=\"fas fa-sitemap mr-1\" />\r\n              Edit Department\r\n            </Col>\r\n          </Row>\r\n        </CardHeader>\r\n        <Form onSubmit={this.handleSubmit}>\r\n          <CardBody>\r\n            <FormGroup className=\"d-flex\">\r\n              <Col md={4}>\r\n                <Label>Name</Label>\r\n              </Col>\r\n              <Col md={8}>\r\n                <Input\r\n                  onChange={this.handleChange}\r\n                  value={this.state.department.name ? this.state.department.name : \"\"}\r\n                  required\r\n                  name=\"name\"\r\n                  id=\"name\"\r\n                />\r\n              </Col>\r\n            </FormGroup>\r\n\r\n            <FormGroup className=\"d-flex\">\r\n              <Col md={4}>\r\n                <Label>Security Hierarchy Parent Category</Label>\r\n              </Col>\r\n              <Col md={8}>\r\n                {\" \"}\r\n                <Input\r\n                  type=\"select\"\r\n                  onChange={this.handleChange}\r\n                  name=\"parentId\"\r\n                  id=\"parentId\"\r\n                  value={this.state.department.securityHierarchyId ? this.state.department.securityHierarchyId : \"\"}\r\n                >\r\n                  <option value=\"\">--- NONE ---</option>\r\n                  {this.state.hierarchy.map((row) => {\r\n                    let padding = \"\";\r\n                    let parentHierarchy = row.id;\r\n                    let level = row.level;\r\n                    while (level-- > 0) {\r\n                      padding += \"---\";\r\n                    }\r\n                    return (\r\n                      <option key={parentHierarchy} value={parentHierarchy}>\r\n                        {padding + \" \" + row.name}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </Input>\r\n              </Col>\r\n            </FormGroup>\r\n\r\n            {/* <FormGroup className=\"d-flex\">\r\n              <Col md={4}>\r\n                <Label>Department Parent Category</Label>\r\n              </Col>\r\n              <Col md={8}>\r\n                {\" \"}\r\n                <Input\r\n                  type=\"select\"\r\n                  name=\"departmentParentId\"\r\n                  id=\"departmentParentId\"\r\n                  onChange={this.handleDepartmentParentChange}\r\n                  value={this.state.department.parentId || \"\"}\r\n                >\r\n                  <option value=\"\">--- NONE ---</option>\r\n                  {this.state.parentList.map((row) => {\r\n                    let padding = \"\";\r\n                    let parentDepartment = row.id;\r\n                    let level = row.level;\r\n                    while (level-- > 0) {\r\n                      padding += \"---\";\r\n                    }\r\n                    return (\r\n                      <option key={parentDepartment} value={parentDepartment}>\r\n                        {padding + \" \" + row.name}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </Input>\r\n              </Col>\r\n            </FormGroup> */}\r\n\r\n            <FormGroup className=\"d-flex align-items-center\">\r\n              <Col md={4}>\r\n                <Label>Branches</Label>\r\n              </Col>\r\n              <Col md={8}>\r\n                <DepartmentBranchSelect branches={this.state.securityHierarchyBranches ? this.state.securityHierarchyBranches : []}\r\n                  setSelectedValues={this.handleSelectedBranchesChange} selectedBranches={this.state.selectedBranchesList} />\r\n              </Col>\r\n            </FormGroup>\r\n            {/* <FormGroup className=\"d-flex\">\r\n              <Col md={4}>\r\n                <Label>Color</Label>\r\n              </Col>\r\n              <Col md={8}>\r\n                <Label>\r\n                  <div\r\n                    style={{\r\n                      alignItems: \"center\",\r\n                      display: \"inline-block\",\r\n                      borderRadius: \"50%\",\r\n                      border: \"1px solid\",\r\n                      width: 50,\r\n                      height: 50,\r\n                      background: this.state.department.colorCode ? this.state.department.colorCode : \"\",\r\n                    }}\r\n                  />\r\n                  <Input\r\n                    onChange={this.handleChange}\r\n                    style={{ display: \"none\" }}\r\n                    type=\"color\"\r\n                    name=\"colorCode\"\r\n                    id=\"colorCode\"\r\n                    value={this.state.department.colorCode ? this.state.department.colorCode : \"\"}\r\n                  />\r\n                </Label>\r\n              </Col>\r\n            </FormGroup> */}\r\n          </CardBody>\r\n          <CardFooter className=\"d-flex justify-content-end\">\r\n            <Button onClick={() => window.history.back()} type=\"button\" color=\"danger\" className=\"mx-2 text-white\">\r\n              Cancel\r\n            </Button>\r\n            <Button color=\"primary\">Update</Button>\r\n          </CardFooter>\r\n        </Form>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return this.renderItems();\r\n  }\r\n}\r\n\r\nexport default connect((state) => ({ allFields: state.allFields }))(EditDepartment);\r\n","import { server } from \"admin/config/server\";\r\n\r\nconst URL = \"/department\";\r\n\r\nfunction getDepartments(callback) {\r\n  server\r\n    .get(`${URL}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction getDepartment(id, callback) {\r\n  server\r\n    .get(`${URL}/${id}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction addDepartment(body, callback) {\r\n  server\r\n    .post(`${URL}`, body)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction editDepartment(body, callback) {\r\n  server\r\n    .put(`${URL}`, body)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction deleteDepartment(id, callback) {\r\n  server\r\n    .delete(`${URL}/${id}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nexport { getDepartment, getDepartments, addDepartment, editDepartment, deleteDepartment };\r\n","import { server } from \"admin/config/server\";\r\n\r\nconst URL = \"/security-hierarchy\";\r\nconst filterBranchURL = \"/branchesFilter\";\r\nconst filterDepartmentURL = \"/departmentsFilter\";\r\nconst securityHierarchyBranches = \"/security-hierarchy-branches\"\r\n\r\nexport const getSecurityHierarchy = (callback) => {\r\n  server\r\n    .get(`${URL}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const getSecurityHierarchyBranches = (callback) => {\r\n  server\r\n    .get(`${securityHierarchyBranches}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\n\r\n\r\nexport const getOneHierarchy = (id, callback) => {\r\n  server\r\n    .get(`${URL}/${id}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const addSecurityHierarchy = (data, callback) => {\r\n  server\r\n    .post(`${URL}`, data)\r\n    .then((response) => {\r\n      console.log(response.data);\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const getFilterBranch = (callback) => {\r\n  server\r\n    .get(`${filterBranchURL}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\nexport const getFilterDepartment = (callback) => {\r\n  server\r\n    .get(`${filterDepartmentURL}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const editHierarchy = (body, callback) => {\r\n  server\r\n    .put(`${URL}`, body)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n\r\nexport const deleteHierarchy = (id, callback) => {\r\n  server\r\n    .delete(`${URL}/${id}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n};\r\n"],"names":["ReactSelect","_ref","_options","_options2","label","onChange","required","errors","object","options","isEdit","name","getFieldValue","rest","map","row","value","id","padding","level","_jsx","_Fragment","children","_jsxs","FormGroup","Label","className","Select","DepartmentBranchSelect","branches","setSelectedValues","selectedBranches","selectedOption","setSelectedOption","useState","isMulti","getOptionLabel","e","getOptionValue","EditDepartment","React","constructor","props","super","state","department","departments","securityHierarchyBranches","parentList","selectedBranchesList","hierarchy","handleSelectedBranchesChange","this","setState","handleChange","event","target","parent","find","item","Number","toast","warn","securityHierarchyId","handleDepartmentParentChange","parentId","handleSubmit","_this$state$selectedB","preventDefault","formData","getFormData","updateData","hierarchyId","branch","filter","editDepartment","err","data","response","message","error","success","history","push","metaRoutes","adminDepartments","dispatch","loadAllFields","bind","componentDidMount","qs","query","location","search","A","getId","match","params","getDepartment","branchId","branchName","getSecurityHierarchy","securityHierarchy","h","code","includes","getSecurityHierarchyBranches","_data$branches","d","console","log","getDepartments","allFields","window","replace","renderItems","Array","isArray","Card","CardHeader","Row","Col","Form","onSubmit","CardBody","md","Input","type","parentHierarchy","CardFooter","Button","onClick","back","color","render","connect","URL","callback","server","get","then","catch","addDepartment","body","post","put","deleteDepartment","delete","getOneHierarchy","addSecurityHierarchy","getFilterBranch","getFilterDepartment","editHierarchy","deleteHierarchy"],"sourceRoot":""}