"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[4909],{18103:(e,s,t)=>{t.d(s,{H6:()=>r,Sz:()=>l,Xd:()=>a.Xd,n7:()=>a.n7});var a=t(18039);const l=[{value:a.x3,label:"--- NONE ---"},{value:a.gR,label:"View"},{value:a.Xd,label:"Edit"},{value:a.n7,label:"Edit / Delete"}],r=[{value:!1,label:"No"},{value:!0,label:"Yes"}]},94909:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var a=t(65043),l=t(62582),r=t(97508),n=t(25852),i=t(13718),d=t(75304),c=t(38477),o=t(64412),h=t(44864),u=t(58472),p=t(83407),b=t(3531),m=t(58441),v=t(18103),g=t(80231),f=t(11594),x=t(99377),j=t(74026),A=t(58168),N=t(98587),k=t(65173),y=t.n(k),S=t(98139),C=t.n(S),w=t(62373),O=["className","listClassName","cssModule","size","tag","listTag","aria-label"],T={children:y().node,className:y().string,listClassName:y().string,cssModule:y().object,size:y().string,tag:w.Wx,listTag:w.Wx,"aria-label":y().string},E=function(e){var s,t=e.className,l=e.listClassName,r=e.cssModule,n=e.size,i=e.tag,d=e.listTag,c=e["aria-label"],o=(0,N.A)(e,O),h=(0,w.qO)(C()(t),r),u=(0,w.qO)(C()(l,"pagination",((s={})["pagination-"+n]=!!n,s)),r);return a.createElement(i,{className:h,"aria-label":c},a.createElement(d,(0,A.A)({},o,{className:u})))};E.propTypes=T,E.defaultProps={tag:"nav",listTag:"ul","aria-label":"pagination"};const P=E;var U=t(28096),$=t(70579);class z extends a.Component{constructor(){super(...arguments),this.state={users:[],roles:[],departments:[],isActive:!0,searchQuery:"",currentPageNumber:1,startOffset:0},this.handleSelect=e=>{e>0&&e-1<this.state.users.length/10&&this.setState({currentPageNumber:e,startOffset:10*(e-1)})},this.handleDelete=e=>{window.confirm("Do you want to delete the User? The action is irreversible!")&&(0,b.hG)(e,((e,s)=>{e||(this.getData(),U.oR.success("user deleted successfully"))}))},this.getData=()=>{(0,b.lo)(((e,s)=>{e||this.setState({users:s})}))},this.handleSearch=e=>{this.setState({searchQuery:e.target.value})}}getObject(e,s){if(s){const t=s.filter((s=>s.id===e?1:0))[0];if(t)return t.name}return""}componentDidMount(){this.getData()}render(){let e=Math.ceil(this.state.users.length/10);const s=this.state.currentPageNumber-3<=0?0:this.state.currentPageNumber-3,t=this.state.currentPageNumber+3>=e?e:this.state.currentPageNumber+3,a=[];for(let l=s;l<t;l++)a.push((0,$.jsx)(x.A,{children:(0,$.jsx)(j.A,{href:"",onClick:()=>this.handleSelect(l+1),children:l+1})},l));const{searchQuery:r,users:b}=this.state,A=this.props.permissions?this.props.permissions:{};let N=b||[];if(r){const e=r.toLowerCase();N=b.filter((s=>{var t,a;const l=(null===s||void 0===s||null===(t=s.name)||void 0===t?void 0:t.toLowerCase())||"",r=(null===s||void 0===s||null===(a=s.phoneNumber)||void 0===a?void 0:a.toLowerCase())||"",n=null===s||void 0===s?void 0:s.roleId,[i="",d=""]=l.split(" "),c="maker"===e&&2===n||"checker"===e&&3===n||"approver"===e&&4===n,o=i.startsWith(e)||d.startsWith(e)||r.startsWith(e);return c||o}))}const k=this.props.permissions||{};return(0,$.jsx)("div",{className:"animated fadeIn",children:(0,$.jsx)(n.A,{children:(0,$.jsx)(i.A,{xl:12,children:(0,$.jsxs)(d.A,{className:"shadow",children:[(0,$.jsxs)(c.A,{className:"d-flex",children:[(0,$.jsx)(i.A,{children:(0,$.jsx)("p",{className:"h5",children:"Ldap Users"})}),(0,$.jsx)(i.A,{children:(0,$.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[b?(0,$.jsx)("input",{className:"form-control w-50 mr-1 border rounded",type:"text",placeholder:"Search","aria-label":"Search",value:r,onChange:this.handleSearch}):"",(0,$.jsx)("div",{className:"pr-5",children:(0,$.jsxs)(o.A,{className:"w-75 mr-5  rounded",type:"select",value:this.state.isActive?"active":"inactive",onChange:e=>this.setState({isActive:"active"===e.target.value}),children:[(0,$.jsx)("option",{value:"active",children:"Active"}),(0,$.jsx)("option",{value:"inactive",children:"Inactive"})]})}),A.isAdmin||A.ldapUser===v.Xd||A.ldapUser===v.n7?(0,$.jsx)("div",{className:"ml-1",children:(0,$.jsxs)(l.Link,{to:g.A.adminLdapUsersAdd,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,$.jsx)("i",{className:"fa fa-plus"}),"Add User"]})}):null]})})]}),(0,$.jsx)(h.A,{children:(0,$.jsxs)(u.A,{bordered:!0,responsive:!0,children:[(0,$.jsx)("thead",{className:"table-active",children:(0,$.jsxs)("tr",{children:[(0,$.jsx)("th",{children:"Name"}),(0,$.jsx)("th",{children:"Phone Number"}),(0,$.jsx)("th",{children:"Role"}),(0,$.jsx)("th",{children:"Status"}),(0,$.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,$.jsx)("tbody",{children:N.map(((e,s)=>s>=this.state.startOffset&&s<this.state.startOffset+10&&e.isActive===this.state.isActive?(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{children:e.name}),(0,$.jsx)("td",{children:e.phoneNumber}),(0,$.jsx)("td",{children:this.getObject(e.roleId,this.props.roles)}),(0,$.jsx)("td",{children:e.isActive?(0,$.jsx)("div",{className:"badge badge-pill badge-success",children:"Active"}):(0,$.jsx)("div",{className:"badge badge-pill badge-danger",children:"Inactive"})}),(0,$.jsxs)("td",{children:[A.isAdmin||A.ldapUser===v.Xd||A.ldapUser===v.n7?(0,$.jsx)(f.A,{to:g.A.adminLdapUsersEdit+"?i="+m.A.getHash(e.id),buttonType:"edit",permission:k.ldapUser}):null,A.ldapUser===v.n7||A.isAdmin?(0,$.jsx)(f.A,{buttonType:"delete",onClick:()=>this.handleDelete(e.id),permission:k.ldapUser}):null]})]},s):null))})]})}),(0,$.jsx)(p.A,{children:(0,$.jsxs)(P,{"aria-label":"Page navigation example",children:[(0,$.jsx)(x.A,{children:(0,$.jsx)(j.A,{first:!0,href:"",onClick:()=>this.handleSelect(1)})}),(0,$.jsx)(x.A,{children:(0,$.jsx)(j.A,{previous:!0,href:"",onClick:()=>this.handleSelect(this.state.currentPageNumber-1)})}),this.state.currentPageNumber-3>0?(0,$.jsx)(x.A,{disabled:!0,children:(0,$.jsx)(j.A,{href:"",children:"..."})}):null,a.map((e=>e)),this.state.currentPageNumber+3<e?(0,$.jsx)(x.A,{disabled:!0,children:(0,$.jsx)(j.A,{href:"",children:"..."})}):null,(0,$.jsx)(x.A,{children:(0,$.jsx)(j.A,{next:!0,href:"",onClick:()=>this.handleSelect(this.state.currentPageNumber+1)})}),(0,$.jsx)(x.A,{children:(0,$.jsx)(j.A,{last:!0,href:"",onClick:()=>this.handleSelect(e)})})]})})]})})})})}}const D=(0,r.Ng)((e=>({roles:e.allFields.roles,branches:e.allFields.branches,departments:e.allFields.departments,allFields:e.allFields})))(z)},3531:(e,s,t)=>{t.d(s,{en:()=>n,gw:()=>c,hG:()=>o,lo:()=>r,nu:()=>d,wz:()=>i});var a=t(76400);const l="/ad-users";function r(e){a.E8.get(`${l}`).then((function(s){e(null,s.data)})).catch((function(s){e(s)}))}function n(e){a.E8.get(`${l}/ldap`).then((function(s){e(null,s.data)})).catch((function(s){e(s)}))}function i(e,s){a.E8.get(`${l}/${e}`).then((function(e){s(null,e.data)})).catch((function(e){s(e)}))}function d(e,s){a.E8.post(`${l}`,JSON.stringify(e)).then((function(e){s(null,e.data)})).catch((function(e){s(e)}))}function c(e,s){a.E8.put(`${l}/${e.id}`,JSON.stringify(e)).then((function(e){s(null,e.data)})).catch((function(e){s(e)}))}function o(e,s){a.E8.delete(`${l}/${e}`).then((function(e){s(null,e.data)})).catch((function(e){s(e)}))}},58472:(e,s,t)=>{t.d(s,{A:()=>b});var a=t(58168),l=t(98587),r=t(65043),n=t(65173),i=t.n(n),d=t(98139),c=t.n(d),o=t(62373),h=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"],u={className:i().string,cssModule:i().object,size:i().string,bordered:i().bool,borderless:i().bool,striped:i().bool,dark:i().bool,hover:i().bool,responsive:i().oneOfType([i().bool,i().string]),tag:o.Wx,responsiveTag:o.Wx,innerRef:i().oneOfType([i().func,i().string,i().object])},p=function(e){var s=e.className,t=e.cssModule,n=e.size,i=e.bordered,d=e.borderless,u=e.striped,p=e.dark,b=e.hover,m=e.responsive,v=e.tag,g=e.responsiveTag,f=e.innerRef,x=(0,l.A)(e,h),j=(0,o.qO)(c()(s,"table",!!n&&"table-"+n,!!i&&"table-bordered",!!d&&"table-borderless",!!u&&"table-striped",!!p&&"table-dark",!!b&&"table-hover"),t),A=r.createElement(v,(0,a.A)({},x,{ref:f,className:j}));if(m){var N=(0,o.qO)(!0===m?"table-responsive":"table-responsive-"+m,t);return r.createElement(g,{className:N},A)}return A};p.propTypes=u,p.defaultProps={tag:"table",responsiveTag:"div"};const b=p}}]);
//# sourceMappingURL=4909.2c69b0b2.chunk.js.map