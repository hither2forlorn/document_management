"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[6102],{57065:(e,t,a)=>{a.d(t,{C:()=>n,q:()=>r});var s=a(76400);const r=(e,t)=>{let{TYPE:a,data:r}=e;console.log("otp",r),s.E8.post(`/client/send-otp/${a}`,r).then((e=>e.data)).then((e=>{t(null,e)})).catch((e=>{t(e)}))},n=(e,t)=>{let{TYPE:a,data:r}=e;s.E8.post(`/client/verify-otp/${a}`,{data:r}).then((e=>(console.log(e),e.data))).then((e=>{t(null,e)})).catch((e=>{t(e)}))}},66102:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var s=a(65043),r=a(75304),n=a(38477),o=a(8586),c=a(44864),l=a(94576),i=a(87382),d=a(83407),h=a(56253),u=a(28096),m=a(83565),p=a(86453),f=a(29920),x=a(82451),A=a(34511),j=a(72270),g=a(18039),v=a(25852),y=a(13718),b=a(45413),E=a(64412),k=a(57065),w=a(97508),S=a(89041),R=a(70579);const N=(0,w.Ng)((e=>({otpAuth:e.otpAuth})))((e=>{const[t,a]=(0,s.useState)(!0),[r,n]=(0,s.useState)(),[c,l]=(0,s.useState)(g.H3);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(v.A,{children:(0,R.jsx)(y.A,{md:6,children:(0,R.jsxs)(b.A,{children:[(0,R.jsx)(o.A,{children:"Choose verification method"}),(0,R.jsxs)("div",{className:"d-flex flex-row",children:[(0,R.jsxs)(E.A,{type:"select",onChange:e=>{let{target:{value:t}}=e;return l(t)},required:!0,children:[(0,R.jsx)("option",{value:g.H3,children:"By Email"}),(0,R.jsx)("option",{value:g.pM,children:"By Phone"})]}),c?(0,R.jsx)(i.A,{id:"submit",type:"button",color:"primary",className:"text-white",onClick:e=>{e.target.parentNode.removeChild(e.target),u.oR.info("Please, wait for a while to get OTP code"),(0,k.q)({TYPE:c,data:{}},((e,t)=>{e?u.oR.error("Error!!"):t.success?(u.oR.success(t.message),a(!0)):u.oR.warn(t.message)}))},children:"Receive OTP"}):null]})]})})}),(0,R.jsx)(v.A,{children:t?(0,R.jsxs)(y.A,{md:6,children:[(0,R.jsxs)(b.A,{children:[(0,R.jsx)(o.A,{for:"otp",children:"OTP Code"}),(0,R.jsx)(E.A,{type:"number",name:"otp",id:"otp",placeholder:"Please enter OTP you received",value:r||"",onChange:e=>{let{target:{value:t}}=e;return n(t)},required:!0})]}),(0,R.jsx)(i.A,{size:"sm",type:"button",color:"success",onClick:t=>{t.preventDefault(),(0,k.C)({TYPE:c,data:{code:r}},((t,a)=>{t&&u.oR.error("Error!!"),a&&(a.success?e.dispatch((0,S.mL)({isVerified:!0})):u.oR.warn(a.message))}))},children:"Verify OTP"})]}):null})]})})),O=(0,w.Ng)((e=>({otpAuth:e.otpAuth})))((e=>{const t=m.parse(e.location.search)["?i"],[a,v]=(0,s.useState)({}),[y,b]=(0,s.useState)([]),[E,k]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t?(0,x.R)(t).then((e=>{switch(k(!0),v({...e}),e.type){case"html":b(e.formData);break;case"dynamic":b(JSON.parse(e.formData));break;default:u.oR.warn("Error occurred!")}})):e.history.push(j.A.clientDashboard)}),[]);const w=t=>{e.otpAuth.isVerified?(0,A.oI)(t,((t,a)=>{t?u.oR.error("Error!"):u.oR.success("Success! Request have been generated"),e.history.push(j.A.clientDashboard)})):u.oR.info("Verify Otp before proceeding")};return E?(0,R.jsxs)(r.A,{children:[(0,R.jsxs)(n.A,{children:[(0,R.jsxs)(o.A,{children:["Name: ",a.name]}),(0,R.jsx)("br",{}),(0,R.jsx)(o.A,{children:"Description:"}),(0,R.jsx)("p",{children:a.description})]}),(0,R.jsxs)(c.A,{children:["html"===a.type?(0,R.jsxs)(l.A,{onSubmit:e=>{e.preventDefault();const t=(0,p.tg)(e),s=Object.keys(t).map((e=>({name:e,value:t[e]}))),r={formId:a.id,workflowId:a.workflowId,memoValues:s};w(r)},children:[(0,R.jsx)(f.A,{type:g.OK,formData:y}),e.otpAuth.isVerified?(0,R.jsxs)(i.A,{type:"submit",size:"sm",color:"info",className:"text-white",children:[(0,R.jsx)("i",{className:"fa fa-save"})," Save as draft"]}):null]}):null,"dynamic"===a.type?(0,R.jsx)(h.Ay.ReactFormGenerator,{onSubmit:e=>{const t=e,s={formId:a.id,workflowId:a.workflowId,memoValues:t};w(s)},answer_data:[],action_name:"Save as Draft",data:y,hide_actions:!e.otpAuth.isVerified}):null]}),e.otpAuth.isVerified?null:(0,R.jsx)(d.A,{children:(0,R.jsx)(N,{})})]}):null}))},82451:(e,t,a)=>{a.d(t,{R:()=>n,U:()=>o});var s=a(55242);const r="/client/forms",n=e=>s.E8.get(`${r}/${e}`).then((e=>e.data)),o=e=>{s.E8.get(`${r}`).then((t=>{e(null,t.data)})).catch((t=>{e(t)}))}},34511:(e,t,a)=>{a.d(t,{Cc:()=>n,Kf:()=>c,R0:()=>l,TO:()=>i,oI:()=>o});var s=a(55242);const r="/client/memo",n=(e,t)=>{let{data:a,action:n}=e;const o=a.memoId;s.E8.post(`${r}/${n}/${o}`,a).then((e=>t(null,e.data))).catch((e=>t(e)))},o=(e,t)=>{s.E8.post(`${r}`,e).then((e=>t(null,e.data))).catch((e=>t(e)))},c=(e,t)=>{s.E8.get(`${r}`,{params:e}).then((e=>t(null,e.data))).catch((e=>t(e)))},l=(e,t)=>{s.E8.get(`${r}/${e}`).then((e=>t(null,e.data))).catch((e=>t(e)))},i=(e,t)=>{s.E8.put(`${r}`,e).then((e=>t(null,e.data))).catch((e=>t(e)))}},29920:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(65043),r=a(18039),n=a(70579);const o=e=>{const t=e.type||null,a=e.isEdit||!1,o=e.memoValues||[],c=e.formData||"";return(0,s.useEffect)((()=>{switch(t){case r._H:break;case r.OK:const e=document.getElementById("bank-segment");e&&e.parentNode.removeChild(e)}o.forEach((e=>{let{name:t,value:a}=e;const s=document.getElementsByName(t);0!==s.length&&s.forEach((e=>{switch(e.value=JSON.parse(a),e.checked=JSON.parse(a),e.type){case"checkbox":"true"===a?e.setAttribute("checked",!0):e.removeAttribute("checked");break;case"radio":JSON.stringify(e.value)===a&&e.setAttribute("checked",!0);break;default:e.value=JSON.parse(a)}}))}))}),[o,a,t]),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:c}})}}}]);
//# sourceMappingURL=6102.4a73d0f0.chunk.js.map