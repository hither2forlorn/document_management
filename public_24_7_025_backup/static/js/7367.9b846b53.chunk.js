"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[7367],{17367:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(65043),n=s(7379),l=s(58441),r=s(68533),o=s(80231),c=s(83565),i=s(28096),d=s(37519),h=s(97508),u=s(19423),m=s(70579);class b extends t.Component{constructor(){super(...arguments),this.state={id:null,role:{},roleTypes:[],role_controls:[]},this.handleSubmit=e=>{e.preventDefault();const a=this.state.role;(0,n.D3)(a,((e,a)=>{e?i.oR.error(e.response.data.message):(this.props.history.push(o.A.adminRoles),this.props.dispatch((0,d.Ni)()),i.oR.success(a.message))}))},this.handleChange=e=>{const a=e.target.name;let s=e.target.value;const[t,n]=e.target.name.split("-"),l=this.state.role;if("name"===a&&(s=(0,u.A)(s)),"control"===t){let e=!1;l.role_controls=l.role_controls?l.role_controls.map((a=>(a.roleTypeId===Number(n)&&(e=!0,a.value=s),a))):[],e||l.role_controls.push({roleId:l.id,roleTypeId:Number(n),value:s})}else switch(e.target.type){case"radio":case"checkbox":l[e.target.name]=e.target.checked;break;default:l[e.target.name]=s}this.setState({role:{...l}})}}componentDidMount(){const e=c.parse(this.props.location.search),a=l.A.getId(e["?i"]);l.A.getId(this.props.match.params.id),(0,n.Lw)(a,((e,a)=>{e||this.setState({role:a.data,role_controls:a.data.role_controls})})),(0,n.cX)(((e,a)=>{e||this.setState({roleTypes:a})}))}render(){return(0,m.jsx)(r.A,{title:"Edit Role",formId:"edit-role-form",role:this.state.role,roleTypes:this.state.roleTypes,handleSubmit:this.handleSubmit,handleChange:this.handleChange,role_controls:this.state.role_controls,roles:this.state.roles,isEdit:!0,...this.props})}}const p=(0,h.Ng)((e=>({allFields:e.allFields})))(b)},68533:(e,a,s)=>{s.d(a,{A:()=>A});var t=s(65043),n=s(64412),l=s(75304),r=s(94576),o=s(38477),c=s(44864),i=s(45413),d=s(8586),h=s(25852),u=s(13718),m=s(58472),b=s(83407),p=s(87382),g=s(18103),f=s(10810),v=s(97956),x=s(97508),j=s(28096),y=s(76400),N=s(28344),k=s(70579);const A=(0,x.Ng)((e=>({allFields:e.allFields,userProfile:e.userProfile})))((e=>{const a=!!e.isEdit,s=e.role?e.role:{},[x,A]=(0,t.useState)({}),[w,C]=(0,t.useState)("");(0,t.useEffect)((()=>{y.E8.get("/permissions").then((e=>{A(e.data)})).catch((e=>{j.oR.error("Permission error")}))}),[]);const E=e.role_controls?e.role_controls:[],T=E.filter((e=>"false"===(null===e||void 0===e?void 0:e.value))),S=(T.length=4===T.length,(a,s,t)=>{switch(a.type){case"page":return g.Sz.map(((l,r)=>{if(!(3==l.value&&t<3))return l.value===parseInt(s)?(0,k.jsxs)("div",{children:[(0,k.jsx)(n.A,{className:"rounded",type:"radio",id:r,name:"control-"+a.id,value:l.value,checked:!0,onChange:e.handleChange}),(0,k.jsx)("label",{for:r,children:"--- NONE ---"==l.label?"None":l.label}),(0,k.jsx)("br",{})]}):"--- NONE ---"!==l.label?(0,k.jsxs)("div",{children:[(0,k.jsx)(n.A,{className:"rounded",type:"radio",id:r,name:"control-"+a.id,value:l.value,onChange:e.handleChange}),(0,k.jsx)("label",{for:r,children:l.label})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)(n.A,{className:"rounded",type:"radio",id:r,name:"control-"+a.id,value:l.value,onChange:e.handleChange}),(0,k.jsx)("label",{for:r,children:"None"})]})}));case"boolean":return g.H6.map(((t,l)=>JSON.stringify(t.value)===s?(0,k.jsxs)("div",{children:[(0,k.jsx)(n.A,{className:"rounded",type:"radio",id:l,name:"control-"+a.id,value:t.value,checked:!0,onChange:e.handleChange}),(0,k.jsx)("label",{for:l,children:t.label})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)(n.A,{className:"rounded",type:"radio",id:l,name:"control-"+a.id,value:t.value,onChange:e.handleChange}),(0,k.jsx)("label",{for:l,children:t.label})]})));default:return null}});return(0,k.jsx)(l.A,{className:"shadow",children:(0,k.jsxs)(r.A,{id:e.formId,onSubmit:e.handleSubmit,children:[(0,k.jsx)(o.A,{children:(0,k.jsx)("p",{className:"h5",children:e.title})}),(0,k.jsxs)(c.A,{children:[(0,k.jsxs)(i.A,{children:[(0,k.jsx)(d.A,{htmlFor:"name",children:"Name"}),(0,k.jsx)(n.A,{className:"rounded",type:"text",name:"name",onInput:e=>(0,N.P)(e.target),id:"name",placeholder:"Enter role name",required:!0,value:s.name?s.name:"",onChange:e.handleChange})]}),(0,k.jsx)(h.A,{children:(0,k.jsxs)(u.A,{children:[(0,k.jsx)("div",{className:"alert alert-dark",role:"alert",children:"Note: Manage the roles of the user by modifying the given actions."}),(0,k.jsxs)(m.A,{responsive:!0,bordered:!0,hover:!0,children:[(0,k.jsx)("thead",{className:"table-active",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{scope:"col",children:"Roles Type"}),(0,k.jsx)("th",{scope:"col",className:"text-center",children:"Action"})]})}),(0,k.jsx)("tbody",{children:e.roleTypes&&e.roleTypes.map(((e,a)=>Object.entries(x).map(((s,t)=>{let[n,l]=s,r=E.find((a=>a.roleTypeId==e.id));if(n==e.key&&0!==l&&1!==l&&0!=l)return r=r||{},(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{style:{width:"50%"},children:(0,k.jsx)(d.A,{htmlFor:a,title:e.description?e.description:"",children:(function(){switch(e.name){case"User":e.name+=" - logged user can control user section.";break;case"Ldap User":e.name+=" - logged user can control AD user section.";break;case"Role":e.name+=" - User will be able to access roles section and more.";break;case"Branch":e.name+=" - User will be able to access branch section and more.";break;case"Document":e.name+=" - User will be able to access document section and more";break;case"Download":e.name+=" - User may or may not download the attachments.";break;case"Archived":e.name+=" - User may or maynot access archive section of document.";break;case"Department":e.name+=" -  User will be able to access department section and more.";break;case"Document Condition":e.name+=" - User will be able to access document condition section and more.";break;case"Document Type":e.name+=" - User will be able to access document type section and more.";break;case"Location Map":e.name+=" - User will be able to access location map section and more.";break;case"Location Type":e.name+=" - User will be able to access location type section and more.";break;case"Language":e.name+=" - User will be able to access language section and more.";break;case"User role":e.name+=" - Select yes if the user is checker or select no if the user is maker.";break;default:e.name+=""}}(),e.name)})}),(0,k.jsx)("td",{children:(0,k.jsx)("span",{className:"d-flex justify-content-around",children:S(e,r.value,l)})})]},t)}))))})]})]})}),(0,k.jsx)("div",{className:""})]}),(0,k.jsx)(b.A,{className:"d-flex justify-content-end",children:a?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.A,{onClick:()=>window.history.back(),type:"button",color:"danger",className:"mx-2 text-white",children:"Cancel"}),(0,k.jsx)(p.A,{type:"submit",color:"primary",children:"Submit"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.A,{onClick:()=>window.history.back()}),(0,k.jsx)(f.A,{isDisabled:e.isDisabled})]})})]})})}))},7379:(e,a,s)=>{s.d(a,{Cm:()=>c,D3:()=>o,EO:()=>d,Lw:()=>r,O0:()=>l,cX:()=>i});var t=s(76400);const n="/roles";function l(e){t.E8.get(`${n}`).then((function(a){e(null,a.data)})).catch((function(a){e(a)}))}function r(e,a){t.E8.get(`${n}/${e}`).then((function(e){a(null,e.data)})).catch((function(e){a(e)}))}function o(e,a){t.E8.put(`${n}/${e.id}`,e).then((function(e){a(null,e.data)})).catch((function(e){a(e)}))}function c(e,a){t.E8.post(`${n}`,e).then((function(e){a(null,e.data)})).catch((function(e){a(e)}))}function i(e){t.E8.get(`${n}/types`).then((function(a){e(null,a.data)})).catch((function(a){e(a)}))}function d(e,a){t.E8.delete(`${n}/${e}`).then((function(e){a(null,e.data)})).catch((function(e){a(e)}))}},18103:(e,a,s)=>{s.d(a,{H6:()=>l,Sz:()=>n,Xd:()=>t.Xd,n7:()=>t.n7});var t=s(18039);const n=[{value:t.x3,label:"--- NONE ---"},{value:t.gR,label:"View"},{value:t.Xd,label:"Edit"},{value:t.n7,label:"Edit / Delete"}],l=[{value:!1,label:"No"},{value:!0,label:"Yes"}]},28344:(e,a,s)=>{s.d(a,{P:()=>t});const t=e=>{/^\s/.test(e.value)&&(e.value="")}},19423:(e,a,s)=>{function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}s.d(a,{A:()=>t})},58472:(e,a,s)=>{s.d(a,{A:()=>b});var t=s(58168),n=s(98587),l=s(65043),r=s(65173),o=s.n(r),c=s(98139),i=s.n(c),d=s(62373),h=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"],u={className:o().string,cssModule:o().object,size:o().string,bordered:o().bool,borderless:o().bool,striped:o().bool,dark:o().bool,hover:o().bool,responsive:o().oneOfType([o().bool,o().string]),tag:d.Wx,responsiveTag:d.Wx,innerRef:o().oneOfType([o().func,o().string,o().object])},m=function(e){var a=e.className,s=e.cssModule,r=e.size,o=e.bordered,c=e.borderless,u=e.striped,m=e.dark,b=e.hover,p=e.responsive,g=e.tag,f=e.responsiveTag,v=e.innerRef,x=(0,n.A)(e,h),j=(0,d.qO)(i()(a,"table",!!r&&"table-"+r,!!o&&"table-bordered",!!c&&"table-borderless",!!u&&"table-striped",!!m&&"table-dark",!!b&&"table-hover"),s),y=l.createElement(g,(0,t.A)({},x,{ref:v,className:j}));if(p){var N=(0,d.qO)(!0===p?"table-responsive":"table-responsive-"+p,s);return l.createElement(f,{className:N},y)}return y};m.propTypes=u,m.defaultProps={tag:"table",responsiveTag:"div"};const b=m}}]);
//# sourceMappingURL=7367.9b846b53.chunk.js.map