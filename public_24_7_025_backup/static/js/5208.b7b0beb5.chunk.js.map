{"version":3,"file":"static/js/5208.b7b0beb5.chunk.js","mappings":"+OAMA,MAkIA,EAlI+BA,IAAgC,IAA/B,YAAEC,EAAW,SAAEC,GAAUF,EACvD,IAAKG,MAAMC,QAAQH,KAAyC,IAAxBA,EAAYI,QAC9C,OAAO,KAGT,MAAOC,EAAeC,IAAoBC,EAAAA,EAAAA,UAAS,CAAC,IAEpDC,EAAAA,EAAAA,YAAU,KAERF,EAAiB,CAAC,EAAE,GACnB,CAACN,IAEJ,MAAMS,EAAcC,IAClBJ,GAAkBK,IAAS,IACtBA,EACH,CAACD,IAAMC,EAAUD,MAChB,EAGCE,EAAcC,KAAKC,OAAOd,EAAYe,KAAKC,GAAMA,EAAEC,SAWnDC,EARmBlB,IAChBA,EAAYmB,QAAO,CAACC,EAAKC,KACzBD,EAAIC,EAAWC,YAAWF,EAAIC,EAAWC,UAAY,IAC1DF,EAAIC,EAAWC,UAAUC,KAAKF,GACvBD,IACN,CAAC,GAGoBI,CAAgBxB,GAGpCyB,EAAaA,CAACH,EAAUL,KACdC,EAAkBI,IAAa,IAG1CI,QAAQC,GAASA,EAAKV,QAAUA,IAChCF,KAAKY,IACJC,EAAAA,EAAAA,MAAA,OAAmBC,MAAO,CAAEC,WAAoC,IAAvBb,EAAQL,GAAmBmB,OAAQ,WAAYC,SAAA,EACtFC,EAAAA,EAAAA,KAAA,KACEC,UAAW,MAAM7B,EAAcsB,EAAKjB,IAAM,gBAAkB,wBAC5DyB,QAASA,IAAM1B,EAAWkB,EAAKjB,OAEjCkB,EAAAA,EAAAA,MAAA,QAAMO,QAASA,IAAMlC,EAAS0B,EAAKjB,IAAIsB,SAAA,EACrCC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBACZP,EAAKS,MACNH,EAAAA,EAAAA,KAACI,EAAAA,KAAI,CACHC,GAAI,GAAGC,EAAAA,EAAWC,0BAA0BC,EAAAA,EAAEC,QAAQf,EAAKjB,MAC3DmB,MAAO,CAAEC,WAAY,GAAIE,SAC1B,eAIHC,EAAAA,EAAAA,KAAA,SACC5B,EAAcsB,EAAKjB,MAClBkB,EAAAA,EAAAA,MAAAe,EAAAA,SAAA,CAAAX,SAAA,CAEGL,EAAKiB,UACJjB,EAAKiB,SAAS7B,KAAK8B,IACjBjB,EAAAA,EAAAA,MAAA,OAAqBC,MAAO,CAAEC,WAAwC,IAA3Bb,EAAQ,EAAIL,IAAoBoB,SAAA,EACzEC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,2BACZW,EAAOT,OAFAS,EAAOnC,MAMpBe,EAAWE,EAAKjB,GAAIO,EAAQ,QA3BzBU,EAAKjB,MAmCfoC,EAAyB9C,EAAY0B,QAAQC,GAASA,EAAKV,QAAUL,IAE3E,OACEgB,EAAAA,EAAAA,MAACmB,EAAAA,EAAI,CAACb,UAAU,SAAQF,SAAA,EACtBC,EAAAA,EAAAA,KAACe,EAAAA,EAAU,CAAAhB,UACTJ,EAAAA,EAAAA,MAACqB,EAAAA,EAAG,CAAAjB,SAAA,EACFJ,EAAAA,EAAAA,MAAA,KAAGM,UAAU,KAAIF,SAAA,EACfC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,yBAAyB,sBAGxCD,EAAAA,EAAAA,KAAA,QACEJ,MAAO,CAAEE,OAAQ,WACjBI,QAASA,IAAMlC,EAAS,MACxBiC,UAAU,4DAA2DF,UAErEC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,0BAInBD,EAAAA,EAAAA,KAACiB,EAAAA,EAAQ,CAAAlB,SACNc,EAAuB/B,KAAKY,IAC3BC,EAAAA,EAAAA,MAAA,OAAmBC,MAAO,CAAEC,WAAyC,IAA5BH,EAAKV,MAAQL,IAAoBoB,SAAA,EACxEC,EAAAA,EAAAA,KAAA,KACEC,UAAW,MAAM7B,EAAcsB,EAAKjB,IAAM,gBAAkB,wBAC5DyB,QAASA,IAAM1B,EAAWkB,EAAKjB,OAEjCkB,EAAAA,EAAAA,MAAA,QAAMO,QAASA,IAAMlC,EAAS0B,EAAKjB,IAAIsB,SAAA,EACrCC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBACZP,EAAKS,MACNH,EAAAA,EAAAA,KAACI,EAAAA,KAAI,CACHC,GAAI,GAAGC,EAAAA,EAAWC,0BAA0BC,EAAAA,EAAEC,QAAQf,EAAKjB,MAC3DmB,MAAO,CAAEC,WAAY,IAAKE,SAC3B,eAIHC,EAAAA,EAAAA,KAAA,SACC5B,EAAcsB,EAAKjB,MAClBkB,EAAAA,EAAAA,MAAAe,EAAAA,SAAA,CAAAX,SAAA,CACGL,EAAKiB,UACJjB,EAAKiB,SAAS7B,KAAK8B,IACjBjB,EAAAA,EAAAA,MAAA,OAAqBC,MAAO,CAAEC,WAA6C,IAAhCH,EAAKV,MAAQ,EAAIL,IAAoBoB,SAAA,EAC9EC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,2BACZW,EAAOT,OAFAS,EAAOnC,MAKpBe,EAAWE,EAAKjB,GAAIiB,EAAKV,MAAQ,QAzB9BU,EAAKjB,UA+Bd,E,0FCvHX,MAAMyC,UAAuBC,EAAAA,UAC3BC,MAAAA,GACE,MAAMC,EAAIC,KAAKC,MAAMC,aAAe,CAAC,EAErC,OACE7B,EAAAA,EAAAA,MAACmB,EAAAA,EAAI,CAACb,UAAU,SAAQF,SAAA,EACtBJ,EAAAA,EAAAA,MAACoB,EAAAA,EAAU,CAAAhB,SAAA,EACTC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,KAAIF,SAAC,gBACjBsB,EAAEjC,aAAeqC,EAAAA,IAAaJ,EAAEjC,aAAesC,EAAAA,IAC9C/B,EAAAA,EAAAA,MAACS,EAAAA,KAAI,CAACC,GAAIC,EAAAA,EAAWqB,oBAAqB1B,UAAU,4DAA2DF,SAAA,EAC7GC,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAe,oBAG5B,SAEND,EAAAA,EAAAA,KAACiB,EAAAA,EAAQ,CAAAlB,UACPJ,EAAAA,EAAAA,MAACiC,EAAAA,EAAK,CAACC,YAAU,EAACC,UAAQ,EAAA/B,SAAA,EACxBC,EAAAA,EAAAA,KAAA,SAAOC,UAAU,eAAcF,UAC7BJ,EAAAA,EAAAA,MAAA,MAAAI,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,QACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,UACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,gBACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,aACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,cACJC,EAAAA,EAAAA,KAAA,MAAIJ,MAAO,CAAEmC,MAAO,SAAUhC,SAAC,kBAGnCC,EAAAA,EAAAA,KAAA,SAAAD,SACGuB,KAAKC,MAAMS,mBAAmBlD,KAAKmD,IAEhCtC,EAAAA,EAAAA,MAAA,MAAAI,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAKkC,EAAIxD,MACTuB,EAAAA,EAAAA,KAAA,MAAAD,SAAKkC,EAAI9B,QACTH,EAAAA,EAAAA,KAAA,MAAAD,UAAKmC,EAAAA,EAAAA,IAASZ,KAAKC,MAAMY,MAAOF,EAAIG,cACpCpC,EAAAA,EAAAA,KAAA,MAAAD,SAAKsC,IAAOJ,EAAIK,WAAWC,OAAO,iBAClCvC,EAAAA,EAAAA,KAAA,MAAAD,SAAKsC,IAAOJ,EAAIO,WAAWD,OAAO,iBAClC5C,EAAAA,EAAAA,MAAA,MAAAI,SAAA,CACGsB,EAAEjC,aAAeqC,EAAAA,IAAaJ,EAAEjC,aAAesC,EAAAA,IAa9C1B,EAAAA,EAAAA,KAACyC,EAAAA,EAAiB,CAChBpC,GAAIC,EAAAA,EAAWC,qBAAuB,MAAQC,EAAAA,EAAEC,QAAQwB,EAAIxD,IAC5DiE,WAAW,OACXC,WAAYtB,EAAEjC,aAEd,MAEJY,EAAAA,EAAAA,KAACyC,EAAAA,EAAiB,CAChBvC,QAASA,IAAMoB,KAAKC,MAAMqB,iBAAiBX,EAAIxD,IAC/CiE,WAAW,SACXC,WAAYtB,EAAEjC,kBA9BX6C,EAAIxD,eAyC7B,EAGF,SAAeoE,EAAAA,EAAAA,KAASC,IAAK,CAC3BX,MAAOW,EAAMC,UAAUZ,SADzB,CAEIjB,G,gDC/EJ,MAAM8B,UAA4B7B,EAAAA,UAChC8B,WAAAA,CAAY1B,GACV2B,MAAM3B,GAAO,KAIfuB,MAAQ,CACN/E,YAAa,GACbiE,mBAAoB,GACpBmB,mBAAoB,KACpBC,mBAAoB,IACpB,KAsBFR,iBAAoBnE,IACd4E,OAAOC,QAAQ,4BACjBV,EAAAA,EAAAA,IAAiBnE,GAAI,CAAC8E,EAAKC,KACrBD,GAAKjC,KAAKmC,QAAQnE,KAAKgB,EAAAA,EAAWoD,kBAClCF,EAAKrF,SACPwF,EAAAA,GAAMxF,QAAQ,YACdmD,KAAKsC,aACLtC,KAAKC,MAAMsC,UAASC,EAAAA,EAAAA,QAEpBH,EAAAA,GAAMI,MAAMP,EAAKQ,QACnB,GAEJ,EA1CA1C,KAAKtD,SAAWsD,KAAKtD,SAASiG,KAAK3C,KACrC,CASAtD,QAAAA,CAASS,EAAIY,GACX,IAAKpB,MAAMC,QAAQoD,KAAKwB,MAAM/E,eAAoD,IAAnCuD,KAAKwB,MAAM/E,YAAYI,QACpE,OAAO,KAGT,MAAM+F,EAAe5C,KAAKwB,MAAM/E,YAAY0B,QAAQ0E,GACvC,OAAP1F,EACK0F,EAAK1F,KAAOA,EACG,OAAbY,GACF8E,EAAK9E,WAAaA,IAK7BiC,KAAK8C,SAAS,CACZpC,mBAAoBkC,EACpBf,mBAAoB9D,GAExB,CAiBAuE,UAAAA,IACES,EAAAA,EAAAA,KAAe,CAACd,EAAKxF,KACfwF,GACJjC,KAAK8C,SACH,CACErG,YAAaA,IAEf,KACEuD,KAAKtD,SAAS,KAAM,KAAK,GAE5B,GAEL,CAEAsG,iBAAAA,GACEhD,KAAKsC,YACP,CAEAW,WAAAA,GACE,OACE5E,EAAAA,EAAAA,MAACqB,EAAAA,EAAG,CAAAjB,SAAA,EACFC,EAAAA,EAAAA,KAACwE,EAAAA,EAAG,CAACC,GAAI,EAAE1E,UACTC,EAAAA,EAAAA,KAAC0E,EAAsB,CACrB3G,YAAauD,KAAKwB,MAAM/E,YACxBC,SAAUsD,KAAKtD,YACXsD,KAAKC,WAGbvB,EAAAA,EAAAA,KAACwE,EAAAA,EAAG,CAACC,GAAI,EAAGxE,UAAU,eAAcF,UAClCC,EAAAA,EAAAA,KAACkB,EAAc,CACbc,mBAAoBV,KAAKwB,MAAMd,mBAC/BY,iBAAkBtB,KAAKsB,oBACnBtB,KAAKC,YAKnB,CAEAH,MAAAA,GACE,OAAOE,KAAKiD,aACd,EAGF,SAAe1B,EAAAA,EAAAA,KAAf,CAAyBG,E,uFCpGzB,MAAM2B,EAAM,cAEZ,SAASN,EAAeO,GACtBC,EAAAA,GACGC,IAAI,GAAGH,KACPI,MAAMC,IACLJ,EAAS,KAAMI,EAASxB,KAAK,IAE9ByB,OAAO1B,IACNqB,EAASrB,EAAI,GAEnB,CAEA,SAAS2B,EAAczG,EAAImG,GACzBC,EAAAA,GACGC,IAAI,GAAGH,KAAOlG,KACdsG,MAAMC,IACLJ,EAAS,KAAMI,EAASxB,KAAK,IAE9ByB,OAAO1B,IACNqB,EAASrB,EAAI,GAEnB,CAEA,SAAS4B,EAAcC,EAAMR,GAC3BC,EAAAA,GACGQ,KAAK,GAAGV,IAAOS,GACfL,MAAMC,IACLJ,EAAS,KAAMI,EAASxB,KAAK,IAE9ByB,OAAO1B,IACNqB,EAASrB,EAAI,GAEnB,CAEA,SAAS+B,EAAeF,EAAMR,GAC5BC,EAAAA,GACGU,IAAI,GAAGZ,IAAOS,GACdL,MAAMC,IACLJ,EAAS,KAAMI,EAASxB,KAAK,IAE9ByB,OAAO1B,IACNqB,EAASrB,EAAI,GAEnB,CAEA,SAASX,EAAiBnE,EAAImG,GAC5BC,EAAAA,GACGW,OAAO,GAAGb,KAAOlG,KACjBsG,MAAMC,IACLJ,EAAS,KAAMI,EAASxB,KAAK,IAE9ByB,OAAO1B,IACNqB,EAASrB,EAAI,GAEnB,C,2HCvDIkC,EAAY,CAAC,YAAa,YAAa,OAAQ,WAAY,aAAc,UAAW,OAAQ,QAAS,aAAc,MAAO,gBAAiB,YAK3IC,EAAY,CACdzF,UAAW0F,IAAAA,OACXC,UAAWD,IAAAA,OACXE,KAAMF,IAAAA,OACN7D,SAAU6D,IAAAA,KACVG,WAAYH,IAAAA,KACZI,QAASJ,IAAAA,KACTK,KAAML,IAAAA,KACNM,MAAON,IAAAA,KACP9D,WAAY8D,IAAAA,UAAoB,CAACA,IAAAA,KAAgBA,IAAAA,SACjDO,IAAKC,EAAAA,GACLC,cAAeD,EAAAA,GACfE,SAAUV,IAAAA,UAAoB,CAACA,IAAAA,KAAgBA,IAAAA,OAAkBA,IAAAA,UAO/D/D,EAAQ,SAAeL,GACzB,IAAItB,EAAYsB,EAAMtB,UAClB2F,EAAYrE,EAAMqE,UAClBC,EAAOtE,EAAMsE,KACb/D,EAAWP,EAAMO,SACjBgE,EAAavE,EAAMuE,WACnBC,EAAUxE,EAAMwE,QAChBC,EAAOzE,EAAMyE,KACbC,EAAQ1E,EAAM0E,MACdpE,EAAaN,EAAMM,WACnByE,EAAM/E,EAAM2E,IACZK,EAAgBhF,EAAM6E,cACtBC,EAAW9E,EAAM8E,SACjBG,GAAaC,EAAAA,EAAAA,GAA8BlF,EAAOkE,GAElDiB,GAAUC,EAAAA,EAAAA,IAAgBC,IAAW3G,EAAW,UAAS4F,GAAO,SAAWA,IAAc/D,GAAW,mBAA0BgE,GAAa,qBAA4BC,GAAU,kBAAyBC,GAAO,eAAsBC,GAAQ,eAAwBL,GACvQiB,EAAqB1F,EAAAA,cAAoBmF,GAAKQ,EAAAA,EAAAA,GAAS,CAAC,EAAGN,EAAY,CACzEO,IAAKV,EACLpG,UAAWyG,KAGb,GAAI7E,EAAY,CACd,IAAImF,GAAsBL,EAAAA,EAAAA,KAA+B,IAAf9E,EAAsB,mBAAqB,oBAAsBA,EAAY+D,GACvH,OAAoBzE,EAAAA,cAAoBoF,EAAe,CACrDtG,UAAW+G,GACVH,EACL,CAEA,OAAOA,CACT,EAEAjF,EAAM8D,UAAYA,EAClB9D,EAAMqF,aArCa,CACjBf,IAAK,QACLE,cAAe,OAoCjB,S","sources":["admin/views/Departments/DepartmentMapStructure.js","admin/views/Departments/DepartmentList.js","admin/views/Departments/DepartmentDashboard.js","admin/views/Departments/api.js","../node_modules/reactstrap/es/Table.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Card, CardBody, CardHeader, Row } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport A from \"config/url\";\r\nimport metaRoutes from \"config/meta_routes\";\r\n\r\nconst DepartmentMapStructure = ({ departments, onFilter }) => {\r\n  if (!Array.isArray(departments) || (departments.success === false)) {\r\n    return null; // Render nothing if no departments or unsuccessful fetch\r\n  }\r\n\r\n  const [expandedNodes, setExpandedNodes] = useState({}); // Tracks expanded nodes\r\n\r\n  useEffect(() => {\r\n    // Initialize with no nodes expanded\r\n    setExpandedNodes({});\r\n  }, [departments]);\r\n\r\n  const toggleNode = (id) => {\r\n    setExpandedNodes((prevState) => ({\r\n      ...prevState,\r\n      [id]: !prevState[id], // Toggle the expanded state for the given ID\r\n    }));\r\n  };\r\n\r\n  const lowestLevel = Math.min(...departments.map((d) => d.level));\r\n\r\n  // Group departments by their departmentParentId\r\n  const groupByParentId = (departments) => {\r\n    return departments.reduce((acc, department) => {\r\n      if (!acc[department.parentId]) acc[department.parentId] = [];\r\n      acc[department.parentId].push(department);\r\n      return acc;\r\n    }, {});\r\n  };\r\n\r\n  const groupedDepartment = groupByParentId(departments);\r\n\r\n  // Function to recursively render child departments and branches\r\n  const renderTree = (parentId, level) => {\r\n    const nodes = groupedDepartment[parentId] || [];\r\n\r\n    return nodes\r\n      .filter((node) => node.level === level) // Only render nodes of the current level\r\n      .map((node) => (\r\n        <div key={node.id} style={{ marginLeft: (level - lowestLevel) * 10, cursor: \"pointer\" }}>\r\n          <i\r\n            className={`fa ${expandedNodes[node.id] ? \"fa-caret-down\" : \"fa-caret-right\"} mr-2`}\r\n            onClick={() => toggleNode(node.id)}\r\n          />\r\n          <span onClick={() => onFilter(node.id)}>\r\n            <i className=\"fa fa-folder-o mr-2\" />\r\n            {node.name}\r\n            <Link\r\n              to={`${metaRoutes.adminDepartmentsEdit}?i=${A.getHash(node.id)}`}\r\n              style={{ marginLeft: 8 }}\r\n            >\r\n              [EDIT]\r\n            </Link>\r\n          </span>\r\n          <br />\r\n          {expandedNodes[node.id] && (\r\n            <>\r\n              {/* Render the branches */}\r\n              {node.branches &&\r\n                node.branches.map((branch) => (\r\n                  <div key={branch.id} style={{ marginLeft: (level + 1 - lowestLevel) * 10 }}>\r\n                    <i className=\"fa fa-folder-open mr-2\" />\r\n                    {branch.name}\r\n                  </div>\r\n                ))}\r\n              {/* Recursively render child departments */}\r\n              {renderTree(node.id, level + 1)}\r\n            </>\r\n          )}\r\n        </div>\r\n      ));\r\n  };\r\n\r\n  // Get the departments that are at the lowest level\r\n  const lowestLevelDepartments = departments.filter((node) => node.level === lowestLevel);\r\n\r\n  return (\r\n    <Card className=\"shadow\">\r\n      <CardHeader>\r\n        <Row>\r\n          <p className=\"h5\">\r\n            <i className=\"fas fa-building mr-1\" />\r\n            Department List\r\n          </p>\r\n          <span\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => onFilter(null)}\r\n            className=\"btn-header btn btn-outline-dark btn-sm border-dark border\"\r\n          >\r\n            <i className=\"fa fa-refresh\" />\r\n          </span>\r\n        </Row>\r\n      </CardHeader>\r\n      <CardBody>\r\n        {lowestLevelDepartments.map((node) => (\r\n          <div key={node.id} style={{ marginLeft: (node.level - lowestLevel) * 20 }}>\r\n            <i\r\n              className={`fa ${expandedNodes[node.id] ? \"fa-caret-down\" : \"fa-caret-right\"} mr-2`}\r\n              onClick={() => toggleNode(node.id)}\r\n            />\r\n            <span onClick={() => onFilter(node.id)}>\r\n              <i className=\"fa fa-folder-o mr-2\" />\r\n              {node.name}\r\n              <Link\r\n                to={`${metaRoutes.adminDepartmentsEdit}?i=${A.getHash(node.id)}`}\r\n                style={{ marginLeft: 10 }}\r\n              >\r\n                [EDIT]\r\n              </Link>\r\n            </span>\r\n            <br />\r\n            {expandedNodes[node.id] && (\r\n              <>\r\n                {node.branches &&\r\n                  node.branches.map((branch) => (\r\n                    <div key={branch.id} style={{ marginLeft: (node.level + 1 - lowestLevel) * 20 }}>\r\n                      <i className=\"fa fa-folder-open mr-2\" />\r\n                      {branch.name}\r\n                    </div>\r\n                  ))}\r\n                {renderTree(node.id, node.level + 1)}\r\n              </>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </CardBody>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default DepartmentMapStructure;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { VIEW_EDIT, VIEW_EDIT_DELETE } from \"config/values\";\r\nimport A from \"config/url\";\r\nimport moment from \"moment\";\r\nimport metaRoutes from \"config/meta_routes\";\r\nimport { getValue } from \"config/util\";\r\nimport { connect } from \"react-redux\";\r\nimport CustomDelete from \"admin/components/CustomDelete\";\r\nimport CustomEdit from \"admin/components/CustomTableAction\";\r\nimport { Card, Table, CardBody, CardHeader, Row, Col } from \"reactstrap\";\r\nimport CustomTableAction from \"admin/components/CustomTableAction\";\r\n\r\nclass DepartmentList extends React.Component {\r\n  render() {\r\n    const p = this.props.permissions || {};\r\n\r\n    return (\r\n      <Card className=\"shadow\">\r\n        <CardHeader>\r\n          <p className=\"h5\">Departments</p>\r\n          {p.department === VIEW_EDIT || p.department === VIEW_EDIT_DELETE ? (\r\n            <Link to={metaRoutes.adminDepartmentsAdd} className=\"btn-header btn btn-outline-dark btn-sm border-dark border\">\r\n              <i className=\"fa fa-plus\" />\r\n              Add Department\r\n            </Link>\r\n          ) : null}\r\n        </CardHeader>\r\n        <CardBody>\r\n          <Table responsive bordered>\r\n            <thead className=\"table-active\">\r\n              <tr>\r\n                <th>Id</th>\r\n                <th>Name</th>\r\n                <th>Created By</th>\r\n                <th>Created</th>\r\n                <th>Modified</th>\r\n                <th style={{ width: \"150px\" }}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.props.departmentsOnTable.map((row) => {\r\n                return (\r\n                  <tr key={row.id}>\r\n                    <td>{row.id}</td>\r\n                    <td>{row.name}</td>\r\n                    <td>{getValue(this.props.users, row.createdBy)}</td>\r\n                    <td>{moment(row.createdAt).format(\"YYYY-MM-DD\")}</td>\r\n                    <td>{moment(row.updatedAt).format(\"YYYY-MM-DD\")}</td>\r\n                    <td>\r\n                      {p.department === VIEW_EDIT || p.department === VIEW_EDIT_DELETE ? (\r\n                        // <Link\r\n                        //   to={\r\n                        //     metaRoutes.adminDepartmentsEdit +\r\n                        //     \"?i=\" +\r\n                        //     A.getHash(row.id)\r\n                        //   }\r\n                        // >\r\n                        //   <span className=\"edit-items-button bg-primary\">\r\n                        //     <i className=\"fa fa-edit\" />\r\n                        //     Edit\r\n                        //   </span>\r\n                        // </Link>\r\n                        <CustomTableAction\r\n                          to={metaRoutes.adminDepartmentsEdit + \"?i=\" + A.getHash(row.id)}\r\n                          buttonType=\"edit\"\r\n                          permission={p.department}\r\n                        />\r\n                      ) : null}\r\n\r\n                      <CustomTableAction\r\n                        onClick={() => this.props.deleteDepartment(row.id)}\r\n                        buttonType=\"delete\"\r\n                        permission={p.department}\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </Table>\r\n        </CardBody>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect((state) => ({\r\n  users: state.allFields.users,\r\n}))(DepartmentList);\r\n","import React from \"react\";\r\nimport DepartmentMapStructure from \"./DepartmentMapStructure\";\r\nimport DepartmentList from \"./DepartmentList\";\r\nimport { getDepartments, deleteDepartment } from \"./api\";\r\nimport { loadAllFields } from \"redux/actions/apiAction\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport metaRoutes from \"config/meta_routes\";\r\nimport { Row, Col } from \"reactstrap\";\r\n\r\nclass DepartmentDashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onFilter = this.onFilter.bind(this);\r\n  }\r\n\r\n  state = {\r\n    departments: [],\r\n    departmentsOnTable: [],\r\n    departmentParentId: null,\r\n    departmentBranchId: [],\r\n  };\r\n\r\n  onFilter(id, parentId) {\r\n    if (!Array.isArray(this.state.departments) || (this.state.departments.success === false)) {\r\n      return null; // Render nothing if no departments or unsuccessful fetch\r\n    }\r\n    // Filter the departments based on id or parentId\r\n    const filteredData = this.state.departments.filter((item) => {\r\n      if (id !== null) {\r\n        return item.id === id; // Match the selected department\r\n      } else if (parentId !== null) {\r\n        return item.parentId === parentId; // Match departments with the given parentId\r\n      }\r\n      return true; // Default: Show all departments\r\n    });\r\n\r\n    this.setState({\r\n      departmentsOnTable: filteredData,\r\n      departmentParentId: parentId,\r\n    });\r\n  }\r\n\r\n  deleteDepartment = (id) => {\r\n    if (window.confirm(\"Do you want to delete?\")) {\r\n      deleteDepartment(id, (err, data) => {\r\n        if (err) this.history.push(metaRoutes.adminDepartments);\r\n        if (data.success) {\r\n          toast.success(\"Success!\");\r\n          this.updateData();\r\n          this.props.dispatch(loadAllFields());\r\n        } else {\r\n          toast.error(data.message);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  updateData() {\r\n    getDepartments((err, departments) => {\r\n      if (err) return;\r\n      this.setState(\r\n        {\r\n          departments: departments,\r\n        },\r\n        () => {\r\n          this.onFilter(null, null) // Default filter to show all departments\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateData();\r\n  }\r\n\r\n  renderItems() {\r\n    return (\r\n      <Row>\r\n        <Col md={4}>\r\n          <DepartmentMapStructure\r\n            departments={this.state.departments}\r\n            onFilter={this.onFilter}\r\n            {...this.props}\r\n          />\r\n        </Col>\r\n        <Col md={8} className=\"pl-3 pl-md-0\">\r\n          <DepartmentList\r\n            departmentsOnTable={this.state.departmentsOnTable}\r\n            deleteDepartment={this.deleteDepartment}\r\n            {...this.props}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return this.renderItems();\r\n  }\r\n}\r\n\r\nexport default connect()(DepartmentDashboard);","import { server } from \"admin/config/server\";\r\n\r\nconst URL = \"/department\";\r\n\r\nfunction getDepartments(callback) {\r\n  server\r\n    .get(`${URL}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction getDepartment(id, callback) {\r\n  server\r\n    .get(`${URL}/${id}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction addDepartment(body, callback) {\r\n  server\r\n    .post(`${URL}`, body)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction editDepartment(body, callback) {\r\n  server\r\n    .put(`${URL}`, body)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction deleteDepartment(id, callback) {\r\n  server\r\n    .delete(`${URL}/${id}`)\r\n    .then((response) => {\r\n      callback(null, response.data);\r\n    })\r\n    .catch((err) => {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nexport { getDepartment, getDepartments, addDepartment, editDepartment, deleteDepartment };\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"];\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;"],"names":["_ref","departments","onFilter","Array","isArray","success","expandedNodes","setExpandedNodes","useState","useEffect","toggleNode","id","prevState","lowestLevel","Math","min","map","d","level","groupedDepartment","reduce","acc","department","parentId","push","groupByParentId","renderTree","filter","node","_jsxs","style","marginLeft","cursor","children","_jsx","className","onClick","name","Link","to","metaRoutes","adminDepartmentsEdit","A","getHash","_Fragment","branches","branch","lowestLevelDepartments","Card","CardHeader","Row","CardBody","DepartmentList","React","render","p","this","props","permissions","VIEW_EDIT","VIEW_EDIT_DELETE","adminDepartmentsAdd","Table","responsive","bordered","width","departmentsOnTable","row","getValue","users","createdBy","moment","createdAt","format","updatedAt","CustomTableAction","buttonType","permission","deleteDepartment","connect","state","allFields","DepartmentDashboard","constructor","super","departmentParentId","departmentBranchId","window","confirm","err","data","history","adminDepartments","toast","updateData","dispatch","loadAllFields","error","message","bind","filteredData","item","setState","getDepartments","componentDidMount","renderItems","Col","md","DepartmentMapStructure","URL","callback","server","get","then","response","catch","getDepartment","addDepartment","body","post","editDepartment","put","delete","_excluded","propTypes","PropTypes","cssModule","size","borderless","striped","dark","hover","tag","tagPropType","responsiveTag","innerRef","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","_extends","ref","responsiveClassName","defaultProps"],"sourceRoot":""}