"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[8002],{86710:(e,a,t)=>{t.d(a,{A:()=>r});t(65043);var n=t(64854),s=t(45413),i=t(8586),l=t(70579);function r(e){var a,t;let{label:r,onChange:o,required:d,errors:h,object:c,options:u,isEdit:p,name:m,getFieldValue:b,...g}=e;return u=null===(a=u)||void 0===a?void 0:a.map((e=>({...e,label:null===e||void 0===e?void 0:e.name,value:(null===e||void 0===e?void 0:e[b])||(null===e||void 0===e?void 0:e.id)}))),u=null===(t=u)||void 0===t?void 0:t.map((e=>{let a="",t=null!==e&&void 0!==e&&e.level?null===e||void 0===e?void 0:e.level:0;for(;t-- >0;)a+="---";return{...e,label:a+" "+e.label}})),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.A,{children:[(0,l.jsxs)(i.A,{children:[r||"",d&&(0,l.jsx)("span",{className:"text-danger h6 ml-1",children:(0,l.jsx)("b",{children:"*"})})]}),(0,l.jsx)(n.default,{...p?{value:c[m]?c[m]:""}:{},name:m,options:u,onChange:o,...g}),h?(0,l.jsx)("span",{className:"text text-danger",children:h[0]}):null]})})}},8002:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var n=t(65043),s=t(40013),i=t(58441),l=t(37519),r=t(97508),o=t(24408),d=t(28096),h=t(80231),c=t(83565),u=t(75304),p=t(38477),m=t(19423),b=t(70579);class g extends n.Component{constructor(e){super(e),this.state={locationMap:{},validationErrors:{}},this.handleChange=(e,a)=>{if(null!==a&&void 0!==a&&a.name)this.setState({locationMap:{...this.state.locationMap,[null===a||void 0===a?void 0:a.name]:e}});else{const a=e.target.name;let t=e.target.value;const n=this.state.locationMap;if("name"===a&&(t=(0,m.A)(t)),"parentId"===a){const e=this.props.locationMaps.filter((e=>e.id===Number(t)?1:0))[0];Number(t)===n.id?(d.oR.warn("Could not select itself as parent!"),n.parentId=""):e?(n.parentId=e.id,n.level=e.level+1):(n.parentId=null,n.level=0)}else n[a]=t;this.setState({locationMap:{...n}})}},this.handleSubmit=e=>{e.preventDefault();const a=this.state.locationMap;a.parentId=a.parentId?a.parentId:null,(0,s.SW)(a,((e,a)=>{if(e)return this.setState({validationErrors:e.response.data.data}),void d.oR.error(e.response.data.message);a.success?(d.oR.success(a.message),this.props.history.push(h.A.adminLocationMaps),this.props.dispatch((0,l.Ni)())):d.oR.warn(a.message)}))},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){const e=c.parse(this.props.location.search),a=i.A.getId(e["?i"]);i.A.getId(this.props.match.params.id),(0,s.Q8)(a,((e,a)=>{e&&this.props.history.push(h.A.adminLocationMaps),a.success&&a.data&&this.setState({locationMap:a.data})}))}renderItems(){return(0,b.jsxs)(u.A,{className:"shadow",children:[(0,b.jsx)(p.A,{children:(0,b.jsx)("p",{className:"h5",children:"Edit Location Map"})}),(0,b.jsx)(o.A,{isEdit:!0,locationMap:this.state.locationMap,handleChange:this.handleChange,handleSubmit:this.handleSubmit,validationErrors:this.state.validationErrors?this.state.validationErrors:null,...this.props})]})}render(){return this.renderItems()}}const v=(0,r.Ng)((e=>({...e.allFields})))(g)},24408:(e,a,t)=>{t.d(a,{A:()=>v});t(65043);var n=t(25852),s=t(13718),i=t(87382),l=t(19368),r=t(97956),o=t(10810),d=t(94576),h=t(44864),c=t(83407),u=t(97508),p=t(15421),m=t(86710),b=t(28344),g=t(70579);const v=(0,u.Ng)((e=>({...e.allFields,userProfile:e.userProfile})))((e=>{const a=e.locationMap?e.locationMap:{},t=e.validationErrors?e.validationErrors:null,u=!!e.isEdit;return(0,g.jsxs)(d.A,{onSubmit:e.handleSubmit,children:[(0,g.jsxs)(h.A,{children:[(0,g.jsxs)(n.A,{children:[(0,g.jsx)(s.A,{md:4,children:(0,g.jsx)(l.wi,{required:!0,object:a,isEdit:u||a.name,label:"Name",name:"name",onInput:e=>(0,b.P)(e.target),value:a.name,errors:t?t.name:null,onChange:e.handleChange})}),(0,g.jsx)(s.A,{md:4,children:(0,g.jsx)(l.wi,{object:a,isEdit:u,label:"Description",onInput:e=>(0,b.P)(e.target),name:"description",errors:t?t.description:null,onChange:e.handleChange})}),(0,g.jsx)(s.A,{md:4,children:(0,g.jsx)(l.Ae,{object:a,isEdit:u,required:!0,label:"Location Type",name:"locationTypeId",errors:t?t.locationTypeId:null,options:e.locationTypes,onChange:e.handleChange})}),(0,g.jsx)(s.A,{md:4,children:(0,g.jsx)(l.Ae,{object:a,isEdit:u,label:"Parent Category",name:"parentId",errors:t?t.parentId:null,options:e.locationMaps,onChange:e.handleChange})}),(0,p.onlyForThisVendor)([p.banks.rbb.name,p.banks.citizen.name])&&(0,g.jsx)(s.A,{md:4,children:(0,g.jsx)(l.Ae,{required:1!=e.userProfile.id,label:"Security Hierarchy",name:"hierarchy",onChange:e.handleChange,object:a,options:e.hierarchy,isEdit:u,errors:t?t.hierarchy:null})}),(0,p.onlyForThisVendor)([p.banks.rbb.name,p.banks.citizen.name])&&(0,g.jsx)(s.A,{md:4,children:(0,g.jsx)(m.A,{label:"Multiple Security Hierarchy",name:"multiple_hierarchy",onChange:e.handleChange,object:a,isMulti:!0,options:e.hierarchy,isEdit:u,errors:t?t.hierarchy:null})})]}),(0,g.jsxs)("div",{className:"alert alert-dark",role:"alert",children:["Note: If Security hierarchy is set to none then all user will able to view location."," "]})]}),(0,g.jsx)(c.A,{className:"d-flex justify-content-end",children:u?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A,{onClick:()=>window.history.back(),type:"button",color:"danger",className:"mx-2 text-white",children:"Cancel"}),(0,g.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Update"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.A,{onClick:()=>window.history.back()}),(0,g.jsx)(o.A,{isDisabled:e.isDisabled})]})})]})}))},40013:(e,a,t)=>{t.d(a,{$g:()=>r,DG:()=>i,FW:()=>d,Q8:()=>l,SW:()=>o});var n=t(76400);const s="/location-map";function i(e){n.E8.get(`${s}`).then((a=>{e(null,a.data)})).catch((a=>{e(a)}))}function l(e,a){n.E8.get(`${s}/${e}`).then((e=>{a(null,e.data)})).catch((e=>{a(e)}))}function r(e,a){n.E8.post(`${s}`,e).then((e=>{a(null,e.data)})).catch((e=>{a(e)}))}function o(e,a){n.E8.put(`${s}`,e).then((e=>{a(null,e.data)})).catch((e=>{a(e)}))}function d(e,a){n.E8.delete(`${s}/${e}`).then((e=>{a(null,e.data)})).catch((e=>{a(e)}))}},28344:(e,a,t)=>{t.d(a,{P:()=>n});const n=e=>{/^\s/.test(e.value)&&(e.value="")}},19423:(e,a,t)=>{function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}t.d(a,{A:()=>n})}}]);
//# sourceMappingURL=8002.43a1974f.chunk.js.map