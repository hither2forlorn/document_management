"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[8347],{54592:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(43845),n=(s(65043),s(70579));function a(e){let{...t}=e;return(0,n.jsx)(r.A,{...t,color:"primary",size:"small"})}},59256:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var r=s(65043),n=s(40575),a=s(75304),l=s(25852),o=s(13718),c=s(64412),i=s(94342),d=s(97508),m=s(46316),h=s(44958),u=s(70579),p=0;class x extends r.Component{constructor(){super(...arguments),this.state={documentList:[],expiryDate:1},this.handleSelect=e=>{e>0&&e-1<this.state.totalItems/10&&this.setState({currentPageNumber:e,startOffset:10*(e-1)})},this.sortBy=e=>{const t=this.state.tableData;t.sort(((t,s)=>{try{return t[e].toLowerCase()<s[e].toLowerCase()?-1:t[e].toLowerCase()>s[e].toLowerCase()?1:0}catch(r){return-1}})),this.setState({tableData:t})},this.handleChange=e=>{const t=e.target.value;t<=0||""==t||null==t?this.setState({expiryDate:t}):this.setState({expiryDate:t},(()=>{this.loadData()}))}}loadData(){let e={expiryDate:this.state.expiryDate};(0,h.Ne)(e,((e,t)=>{e||(t.success?this.setState({documentList:t.paginationDocument},(()=>{this.forceUpdate()})):window.alert(t.message))}),{page:1,limit:10})}deleteDocument(e){window.confirm("Do you want to delete this file?")&&(0,n.Nn)(e,((e,t)=>{t.success?window.location.reload():window.alert(t.message)}))}componentDidMount(){return this.setState(this.props.allFields),this.loadData(),0===p&&this.props.dispatch((0,m.vs)(1)),()=>{p++}}render(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.A,{className:"p-1 rounded",children:(0,u.jsxs)(l.A,{className:"d-flex align-items-center",children:[(0,u.jsx)(o.A,{md:4,xs:4,children:(0,u.jsx)(c.A,{type:"number",className:"form-control rounded",onChange:this.handleChange,value:this.state.expiryDate})}),(0,u.jsx)(o.A,{md:4,xs:8,children:(0,u.jsx)("h6",{className:"mt-2",children:"week/s for the expiry of the documents"})}),(0,u.jsx)(o.A,{md:6})]})}),(0,u.jsx)(i.A,{title:"Expired Document List",documentList:this.state.documentList,showControl:!1,permissions:this.props.permissions,...this.state.data})]})}}const j=(0,d.Ng)((e=>({allFields:e.allFields})))(x)},94342:(e,t,s)=>{s.d(t,{A:()=>T});var r=s(65043),n=s(87382),a=s(25852),l=s(13718),o=s(90284),c=s(62582),i=s(97508),d=s(18039),m=s(46759),h=s(58441),u=s(80231),p=s(11594),x=(s(10577),s(75304)),j=s(38477),b=s(44864),g=s(58472),f=s(83407),A=s(46316),y=s(87561),v=s(7467),N=s(88988),k=s(15421),w=(s(54592),s(95702)),D=s(89967),L=s(70579);const T=(0,i.Ng)((e=>({...e.allFields,docLimit:e.docLimitDocumentNumber})))((e=>{var t;const[s,T]=(0,r.useState)(!1),C=e.docLimit,P=e.docPagination,[S,B]=(0,r.useState)(P),E=(e.totalPages,(0,i.d4)((e=>e.docLimitDocumentNumber))),R=t=>{e.documentList.sort(((e,s)=>{try{return e[t].toLowerCase()<s[t].toLowerCase()?-1:e[t].toLowerCase()>s[t].toLowerCase()?1:0}catch(r){return-1}}))};(0,r.useEffect)((()=>{B((e.docPagination-1)*C)}),[e.docPagination,e.dispatch,e.docLimitDocumentNumber]);const O=e.documentTypes?e.documentTypes:[],F=e.departments?e.departments:[],I=e.branches?e.branches:[],M=e.statuses?e.statuses:[],z=e.locationMaps?e.locationMaps:[],_=e.users?e.users:[],W=e.permissions?e.permissions:{};e.makerEmail&&e.makerEmail;function V(e){return(0,L.jsxs)("ul",{style:{listStyleType:"none",margin:0,padding:0,overflow:"hidden",display:"flex",justifyContent:"center"},children:[e.hasQuickQcr&&(0,L.jsx)("li",{style:{float:"left",cursor:"pointer"},"data-toggle":"tooltip","data-placement":"top",title:"Quick OCR Enabled",children:(0,L.jsx)("i",{className:"fas fa-search text-dark bg-warning p-1 mr-1 rounded",placeholder:"Quick OCR"})}),e.hasEncryption&&(0,L.jsx)("li",{style:{float:"left",cursor:"pointer"},"data-toggle":"tooltip","data-placement":"top",title:"Encryption Enabled",children:(0,L.jsx)("i",{className:"fas fa-lock text-dark bg-warning p-1 mr-1 rounded",placeholder:"Encryption"})}),e.hasOtp&&(0,L.jsx)("li",{style:{float:"left",cursor:"pointer"},"data-toggle":"tooltip","data-placement":"top",title:"OTP Verification Enabled",children:(0,L.jsx)("i",{className:"fas fa-envelope text-dark bg-warning p-1 mr-1 rounded",placeholder:"OTP Verification"})})]})}return(0,L.jsxs)(x.A,{className:"shadow",children:[(0,L.jsxs)(j.A,{children:[(0,L.jsx)("p",{className:"h5",children:e.title}),null!==W&&void 0!==W&&W.maker?(0,L.jsxs)(c.Link,{to:u.A.documentsAdd,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,L.jsx)("i",{className:"fa fa-plus"})," Add Document"]}):null]}),(0,L.jsx)(b.A,{children:(0,L.jsxs)(g.A,{responsive:!0,bordered:!0,hover:!0,id:"toExcel",children:[(0,L.jsx)("thead",{className:"table-active",children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{scope:"col",children:"Doc Type"}),(0,L.jsx)("th",{scope:"col",children:"Department"}),(0,L.jsx)("th",{scope:"col",children:"Branch"}),(0,k.onlyForThisVendor)("bok")&&(0,L.jsx)("th",{scope:"col",onClick:()=>R("name"),children:"Account Number"}),(0,L.jsx)("th",{scope:"col",onClick:()=>R("otherTitle"),children:"Document Name"}),(0,L.jsx)("th",{scope:"col",children:"Status"}),e.fromRejectedListTable&&(0,L.jsx)("th",{scope:"col",children:"Message"}),(0,L.jsx)("th",{scope:"col",children:"Location"}),(0,L.jsx)("th",{scope:"col",children:"Created By"}),e.fromPendingListTable?(0,L.jsx)("th",{scope:"col",children:"Assigned To"}):e.fromRejectedListTable?(0,L.jsx)("th",{scope:"col",children:"Rejected By"}):(0,L.jsx)("th",{scope:"col",children:"Created At"}),e.fromPendingListTable||e.fromRejectedListTable?(0,L.jsx)("th",{scope:"col",children:"Created At"}):(0,L.jsx)("th",{scope:"col",children:"Approved At"}),e.fromRejectedListTable&&(0,L.jsx)("th",{scope:"col",children:" Rejected At"}),(e.showControl||e.restorePermission)&&(0,L.jsx)("th",{scope:"col",children:"Action"}),e.fromRejectedListTable&&(0,L.jsx)("th",{scope:"col",children:"Action"})]})}),(0,L.jsx)("tbody",{children:null===e||void 0===e||null===(t=e.documentList)||void 0===t?void 0:t.map(((t,s)=>{const r=(0,m._W)(O,t.documentTypeId),a=(0,m._W)(M,t.statusId),l=(0,m._W)(z,t.locationMapId),o=(0,m._W)(F,t.departmentId),i=(0,m._W)(I,t.branchId),x=(0,m._W)(_,t.createdBy),j=(0,m._W)(_,t.assignTo);return console.log(t,"row is here"),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"text-break",children:r||t.DocumentType?r||t.DocumentType:(0,L.jsx)(D.A,{style:{fontSize:"1rem",textAlign:"center",color:"#ccc"}})}),(0,L.jsx)("td",{className:"text-break",style:{textAlign:"center"},children:o||t.Department?o||t.Department:(0,L.jsx)(D.A,{style:{fontSize:"1rem",textAlign:"center",color:"#ccc"}})}),(0,L.jsx)("td",{className:"text-break",style:{textAlign:"center"},children:i||t.Branch?i||t.Branch:(0,L.jsx)(D.A,{style:{fontSize:"1rem",textAlign:"center",color:"#ccc"}})})," ",(0,k.onlyForThisVendor)("bok")&&(0,L.jsx)("td",{className:"text-break",children:t.name||t.OrganizationName}),(0,L.jsx)("td",{onMouseOver:()=>T(!0),onMouseOut:()=>T(!1),children:(0,L.jsx)(c.Link,{className:"text-break",to:u.A.documentsView+"?i="+h.A.getHash(t.id),children:t.otherTitle||t.DocumentName})}),(0,L.jsxs)("td",{className:"text-break",style:{textAlign:"center",display:"flex",flexDirection:"column"},children:[V(t),(0,L.jsx)("span",{className:"mt-2",children:null!==t&&void 0!==t&&t.returnedByChecker?(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-danger rounded p-1",children:"Rejected"}):(0,L.jsx)(L.Fragment,{children:function(e){switch((null===e||void 0===e?void 0:e.DocumentStatus)||(null===e||void 0===e?void 0:e.statusId)){case"Active":case 1:return(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-success",children:a||e.DocumentStatus});case"Suspended":case 2:return(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-secondary",children:a||e.DocumentStatus});case"checked out":case 3:return(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-dark",children:a||e.DocumentStatus})}}(t)})})]}),e.fromRejectedListTable&&(0,L.jsx)("td",{children:(W.approver||W.checker)&&t.returnedByApprover&&!t.returnedByChecker?(0,L.jsx)("span",{className:"text-break text-center",children:null===t||void 0===t?void 0:t.rejectionMessageByApprover}):((W.approver||W.checker)&&t.returnedByApprover&&t.returnedByChecker,(0,L.jsx)("span",{className:"text-break text-center",children:null===t||void 0===t?void 0:t.rejectionMessageByChecker}))}),(0,L.jsx)("td",{className:"text-break",style:{textAlign:"center"},children:l||t.locationMap?l||t.locationMap:(0,L.jsx)(D.A,{style:{fontSize:"1rem",color:"#ccc"}})}),(0,L.jsxs)("td",{className:"text-break d-flex flex-column text-center",children:[x||t.username,e.fromPendingListTable?(0,L.jsx)(L.Fragment,{children:W.maker&&t.madeBy}):(t.returnedByApprover||t.returnedByChecker)&&W.maker?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{children:t.madeBy?t.madeBy:"CONFIDENTIAL"})," "]}):null]}),e.fromRejectedListTable&&(0,L.jsx)("td",{className:"text-break text-center",children:(null===t||void 0===t?void 0:t.rejectedByEmail)||"Not Available"}),e.fromPendingListTable&&(0,L.jsx)("td",{style:{textAlign:"center"},children:(0,L.jsx)("span",{style:{textAlign:"center"},children:j||t.assignTo?(0,L.jsxs)(L.Fragment,{children:[j||t.assignTo.split("(")[0]," ",(0,L.jsx)("br",{}),(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-secondary",children:`(${j||t.assignTo.split("(")[1]}`})]}):(0,L.jsx)("p",{children:"Not Found"})})}),e.restorePermission&&t.isDeleted&&(0,L.jsx)("td",{children:(0,L.jsx)(p.A,{permission:W.restore,onClick:()=>e.restoreDocument(t.id),buttonType:"restore"})}),(0,L.jsx)("td",{className:"text-center",children:t.createdAt?new Date(t.createdAt).toLocaleString():""}),!e.fromPendingListTable&&(0,L.jsx)("td",{className:"text-center",children:t.updatedAt?new Date(t.updatedAt).toLocaleString():""}),e.fromRejectedListTable&&(0,L.jsx)("td",{children:W.checker||W.approver?(0,L.jsx)(p.A,{permission:W.checker||W.approver,buttonType:"view",to:`${u.A.documentsView}?i=${h.A.getHash(t.id)}`}):null!==t&&void 0!==t&&t.returnedByChecker?(0,L.jsx)(n.A,{className:"badge badge-primary p-2 bg-blue-200 text-blue-600",onClick:()=>e.resubmitDocumentHandler(t.id),children:"Resubmit"}):null}),e.showControl&&(0,L.jsxs)("td",{children:[e.fromPendingListTable&&t.isUserChecker?"Approval Pending":null,(W.document===d.Xd||W.document===d.gR||W.document===d.n7)&&!(null!==t&&void 0!==t&&t.isUserChecker)&&(0,L.jsxs)(L.Fragment,{children:[e.approveDocument&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(p.A,{permission:W.checker||W.approver,buttonType:"view",to:u.A.documentsView+"?i="+h.A.getHash(t.id)})}),!e.fromPendingListTable&&!t.isDeleted&&(0,L.jsx)(p.A,{to:u.A.documentsEdit+"?i="+h.A.getHash(t.id),permission:W.document,buttonType:"edit"})]}),e.deleteDocument&&W.document===d.n7&&!t.isDeleted&&(0,L.jsx)("div",{children:(0,L.jsx)(p.A,{permission:W.document,onClick:()=>e.deleteDocument(t.id),buttonType:"delete"})})]})]},s)}))})]})}),(0,L.jsx)(f.A,{className:"bg-white",children:(0,L.jsxs)(a.A,{children:[(0,L.jsx)(l.A,{children:(0,L.jsx)(o.A,{count:parseInt(Math.ceil(e.totalDocuments/E)),onChange:e.handleChangePage,shape:"rounded",page:e.pageNumber})}),(0,L.jsx)(l.A,{children:(0,L.jsxs)("div",{className:"float-right mt-2 d-flex align-items-center",children:[(0,L.jsx)("p",{className:"mb-0 mr-2",children:"Items Per Page"}),(0,L.jsx)(y.A,{children:(0,L.jsxs)(v.A,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:e.docLimit,onChange:t=>{e.dispatch((0,A.wU)(t.target.value))},className:"form-control rounded",children:[(0,L.jsx)(N.A,{value:5,children:"5"}),(0,L.jsx)(N.A,{value:10,children:"10"}),(0,L.jsx)(N.A,{value:20,children:"20"})]})}),(0,L.jsxs)("p",{className:"mb-0 ml-2",children:["Total Documents :",(0,L.jsx)("b",{className:"mr-2",children:e.totalDocuments})," Page :",(0,L.jsxs)("b",{children:[" ",e.pageNumber]})]}),(0,k.includeThisFeature)(k.dms_features.DOWNLOAD_REPORT)&&(0,L.jsx)(w.A,{id:"toExcel-button",className:"btn btn-sm ml-2 btn-primary text-white float-right",table:"toExcel",filename:"documents",sheet:"tablexls",buttonText:"Download Report"})]})})]})})]})}))},89967:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(89379),n=s(65043);const a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var l=s(22172),o=function(e,t){return n.createElement(l.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:a}))};const c=n.forwardRef(o)},90284:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(58168),n=s(65043),a=s(59135),l=s(70579);let o=!1;const c=n.forwardRef((function(e,t){return o||(console.warn(["MUI: The Pagination component was moved from the lab to the core.","","You should use `import { Pagination } from '@mui/material'`","or `import Pagination from '@mui/material/Pagination'`"].join("\n")),o=!0),(0,l.jsx)(a.A,(0,r.A)({ref:t},e))}))},96369:(e,t,s)=>{function r(e){if(Array.isArray(e))return e}s.d(t,{A:()=>r})},76562:(e,t,s)=>{function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}s.d(t,{A:()=>r})},80045:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(98587);function n(e,t){if(null==e)return{};var s,n,a=(0,r.A)(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)s=l[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}},5544:(e,t,s)=>{s.d(t,{A:()=>l});var r=s(96369);var n=s(27800),a=s(76562);function l(e,t){return(0,r.A)(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var r,n,a,l,o=[],c=!0,i=!1;try{if(a=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;c=!1}else for(;!(c=(r=a.call(s)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){i=!0,n=e}finally{try{if(!c&&null!=s.return&&(l=s.return(),Object(l)!==l))return}finally{if(i)throw n}}return o}}(e,t)||(0,n.A)(e,t)||(0,a.A)()}}}]);
//# sourceMappingURL=8347.9cfa6b98.chunk.js.map