"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[1235],{97404:(e,s,r)=>{r.d(s,{A:()=>x});var a=r(65043),t=r(71094),l=r(58472),i=r(25852),n=r(13718),c=r(97508),d=r(59135),o=r(87561),h=r(7467),p=r(88988),m=r(95702),u=(r(15421),r(70579));const x=(0,c.Ng)((e=>({allFields:e.allFields,searchData:e.docSearchData})))((function(e){const{columns:s,data:r,allData:c}=e,[x,g]=(0,a.useState)(""),{getTableProps:j,getTableBodyProps:y,headerGroups:f,page:b,gotoPage:N,setPageSize:v,prepareRow:A,setFilter:C,state:{pageIndex:H,pageSize:D}}=(0,t.useTable)({columns:s,data:x&&(e.LocationMapBata||e.securityHierarchyBata)?c:r},t.useFilters,t.useSortBy,t.usePagination);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"form-group rounded",children:(0,u.jsxs)("div",{className:"input-group mb-2",children:[(0,u.jsx)("div",{className:"input-group-prepend rounded",children:(0,u.jsx)("div",{className:"input-group-text rounded",children:(0,u.jsx)("i",{className:"fas fa-search"})})}),(0,u.jsx)("input",{name:e.name||"name",value:x,className:"form-control rounded",onChange:e=>{const s=e.target.value||void 0;if("DocumentName"===e.target.name)C("DocumentName",s),g(s);else C("name",s),g(s)},placeholder:"Search by name column"})]})}),(0,u.jsxs)(l.A,{responsive:!0,bordered:!0,hover:!0,...j(),id:"toExcelData",children:[(0,u.jsx)("thead",{className:"table-active",children:f.map((e=>(0,u.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,u.jsxs)("th",{...e.getHeaderProps(e.getSortByToggleProps()),className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:[e.render("Header"),(0,u.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,u.jsxs)("span",{children:["  ",(0,u.jsx)("i",{className:"fas fa-caret-square-down text-info ml-2"})]}):(0,u.jsxs)("span",{children:["  ",(0,u.jsx)("i",{className:"fas fa-caret-square-up text-info pl-1"})]}):(0,u.jsxs)("span",{children:[" ",(0,u.jsx)("i",{className:"fas fa-sort text-info pl-1"})]})})]})))})))}),(0,u.jsx)("tbody",{...y(),children:b.map(((e,s)=>(A(e),(0,u.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>(0,u.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),(0,u.jsxs)(i.A,{children:[(0,u.jsx)(n.A,{children:(0,u.jsx)(d.A,{count:parseInt(Math.ceil(r.length/D)),onChange:(e,s)=>{N(s-1)},shape:"rounded",page:H+1})}),(0,u.jsx)(n.A,{children:(0,u.jsxs)("div",{className:"float-right mt-2 d-flex align-items-center",children:[(0,u.jsx)("p",{className:"mb-0 mr-2",children:"Items Per Page"}),(0,u.jsx)(o.A,{children:(0,u.jsxs)(h.A,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:D,onChange:e=>{v(Number(e.target.value))},className:"form-control rounded",children:[(0,u.jsx)(p.A,{value:5,children:"5"}),(0,u.jsx)(p.A,{value:10,children:"10"}),(0,u.jsx)(p.A,{value:20,children:"20"})]})}),(0,u.jsxs)("p",{className:"mb-0 ml-2",children:["Total Documents :",(0,u.jsx)("b",{className:"mr-2",children:r.length})," Page :",(0,u.jsxs)("b",{children:[" ",H+1]})]}),(0,u.jsx)(m.A,{id:"toExcel-button",className:"btn btn-sm ml-2 btn-primary text-white float-right",table:"toExcelData",filename:"attachmentstable",sheet:"tablexls",buttonText:"Download Report"})]})})]})]})}))},41235:(e,s,r)=>{r.r(s),r.d(s,{default:()=>D});var a=r(65043),t=r(25852),l=r(13718),i=r(75304),n=r(38477),c=r(44864),d=r(97508),o=r(70579);class h extends a.Component{constructor(e){super(e),this.getHierarchyChildren=this.getHierarchyChildren.bind(this),this.toggleChildren=this.toggleChildren.bind(this)}toggleChildren(e){const s="cursor-pointer"+e,r=document.getElementsByClassName(s);for(let a=0;a<r.length;a++){const e=r[a];"none"===e.style.display?e.style.display="block":e.style.display="none"}}getHierarchyChildren(e){const s=this.props.hierarchy;let r=[];return s.filter((s=>s.parentId===e?1:0)).forEach(((e,s)=>{r.push((0,o.jsxs)("div",{className:"cursor-pointer"+e.parentId,style:{marginLeft:10*e.level>40?40:10*e.level,cursor:"pointer",display:"none"},children:[(0,o.jsx)("i",{className:"fa fa-angle-down mr-2",onClick:()=>this.toggleChildren(e.id)}),(0,o.jsx)("span",{onClick:()=>this.props.onFilter(e.id)&this.toggleChildren(e.id),children:e.multipleHierarchy?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"fa fa-folder mr-2",style:{color:"#2132e8"}}),(0,o.jsx)("span",{children:e.name})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("i",{className:"fa fa-folder-o mr-2"}),(0,o.jsx)("span",{children:e.name})]})}),(0,o.jsx)("br",{}),this.getHierarchyChildren(e.id)]},s))})),r}render(){return(0,o.jsxs)(i.A,{className:"shadow",children:[(0,o.jsx)(n.A,{children:(0,o.jsxs)(t.A,{children:[(0,o.jsxs)("p",{className:"h5",children:[(0,o.jsx)("i",{className:"fas fa-sitemap mr-1 ml-1"}),"Security Hierarchy"]}),(0,o.jsx)("span",{style:{cursor:"pointer"},onClick:()=>this.props.onFilter(null),className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:(0,o.jsx)("i",{className:"fa fa-refresh"})})]})}),(0,o.jsx)(c.A,{children:this.props.hierarchy.map(((e,s)=>{var r;let a=null===(r=this.props.hierarchy[0])||void 0===r?void 0:r.level;return this.props.hierarchy.forEach((e=>{a>=e.level&&(a=e.level)})),e.level==a?(0,o.jsxs)("div",{id:"cursor-pointer",className:"cursor-pointer",style:{marginLeft:20*e.level,cursor:"pointer"},children:[(0,o.jsx)("i",{className:"fa fa-caret-down mr-2",onClick:()=>this.toggleChildren(e.id)}),(0,o.jsxs)("span",{onClick:()=>this.props.onFilter(e.id)&this.toggleChildren(e.id),children:[(0,o.jsx)("i",{className:"fa fa-folder-o mr-2"}),e.name]}),(0,o.jsx)("br",{}),this.getHierarchyChildren(e.id)]},s):null}))})]})}}const p=(0,d.Ng)((e=>({allFields:e.allFields})))(h);var m=r(62582),u=r(86178),x=r.n(u),g=r(80231),j=(r(46759),r(18039)),y=(r(19368),r(58441)),f=r(11594),b=r(97404);class N extends a.Component{constructor(){super(...arguments),this.columnData=[{Header:"Name",accessor:"name"},{Header:"Code",accessor:"code"},{Header:"Date Created",accessor:"createdAt",Cell:e=>x()(e.value).format("dddd, MMMM Do YYYY")},{Header:"Date Modified",accessor:"updatedAt",Cell:e=>x()(e.value).format("dddd, MMMM Do YYYY")},{Header:"Actions",accessor:"action",disableSortBy:!0,Cell:e=>{let{row:s}=e;const r=this.props.permissions||{};return(0,o.jsxs)("div",{style:{cursor:"pointer"},children:[(0,o.jsx)(f.A,{to:g.A.adminEditSecurityHierarchy+"?i="+y.A.getHash(s.original.id),buttonType:"edit",permission:r.locationMap}),(0,o.jsx)(f.A,{onClick:()=>this.props.deleteHierarchy(s.original.id),buttonType:"delete",permission:r.locationType})]})}}],this.columnData=this.columnData.filter((e=>null!=e))}render(){this.props.permissions;return(0,o.jsxs)(i.A,{className:"shadow",children:[(0,o.jsxs)(n.A,{children:[(0,o.jsx)("p",{className:"h5",children:"Hierarchy List"}),this.props.permissions.securityHierarchy===j.Xd||this.props.permissions.securityHierarchy===j.n7?(0,o.jsxs)(m.Link,{to:g.A.adminAddSecurityHierarchy,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,o.jsx)("i",{className:"fa fa-plus"}),"Add Hierarchy"]}):null]}),(0,o.jsx)(c.A,{children:(0,o.jsx)(b.A,{columns:this.columnData,securityHierarchyBata:!0,data:this.props.hierarchyOnTable,allData:this.props.allFields.hierarchy})})]})}}const v=(0,d.Ng)((e=>({allFields:e.allFields,users:e.allFields.users})))(N);var A=r(91815),C=r(28096);class H extends a.Component{constructor(e){super(e),this.state={hierarchy:[],hierarchyOnTable:[]},this.deleteHierarchy=e=>{window.confirm("Do you want to delete?")&&(0,A.nV)(e,((e,s)=>{e&&this.history.push(g.A.adminSecurityHierarchy),s.success?(C.oR.success("Success!"),this.updateData()):C.oR.error(s.message)}))},this.onFilter=this.onFilter.bind(this)}onFilter(e){const s=this.state.hierarchy.filter((s=>s.parentId===e?1:0));this.setState({hierarchyOnTable:s})}updateData(){(0,A.qY)(((e,s)=>{e||this.setState({hierarchy:s},(()=>{this.onFilter(null)}))}))}componentDidMount(){this.updateData()}render(){return(0,o.jsxs)(t.A,{children:[(0,o.jsx)(l.A,{md:5,children:(0,o.jsx)(p,{hierarchy:this.state.hierarchy,onFilter:this.onFilter,...this.props})}),(0,o.jsxs)(l.A,{md:7,className:"pl-3 pl-md-1",children:[" ",(0,o.jsx)(v,{hierarchyOnTable:this.state.hierarchyOnTable,deleteHierarchy:this.deleteHierarchy,...this.props})]})]})}}const D=(0,d.Ng)()(H)},91815:(e,s,r)=>{r.d(s,{$k:()=>o,Pb:()=>c,aY:()=>h,mI:()=>n,nV:()=>p,nn:()=>d,qY:()=>l,wl:()=>i});var a=r(76400);const t="/security-hierarchy",l=e=>{a.E8.get(`${t}`).then((s=>{e(null,s.data)})).catch((s=>{e(s)}))},i=e=>{a.E8.get("/security-hierarchy-branches").then((s=>{e(null,s.data)})).catch((s=>{e(s)}))},n=(e,s)=>{a.E8.get(`${t}/${e}`).then((e=>{s(null,e.data)})).catch((e=>{s(e)}))},c=(e,s)=>{a.E8.post(`${t}`,e).then((e=>{console.log(e.data),s(null,e.data)})).catch((e=>{s(e)}))},d=e=>{a.E8.get("/branchesFilter").then((s=>{e(null,s.data)})).catch((s=>{e(s)}))},o=e=>{a.E8.get("/departmentsFilter").then((s=>{e(null,s.data)})).catch((s=>{e(s)}))},h=(e,s)=>{a.E8.put(`${t}`,e).then((e=>{s(null,e.data)})).catch((e=>{s(e)}))},p=(e,s)=>{a.E8.delete(`${t}/${e}`).then((e=>{s(null,e.data)})).catch((e=>{s(e)}))}}}]);
//# sourceMappingURL=1235.058f4e24.chunk.js.map