"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[1822],{17305:(e,t,s)=>{s.d(t,{Aj:()=>l,D9:()=>r,YE:()=>o,ax:()=>a,df:()=>d});var n=s(76400);const i="/department";function a(e){n.E8.get(`${i}`).then((t=>{e(null,t.data)})).catch((t=>{e(t)}))}function r(e,t){n.E8.get(`${i}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function o(e,t){n.E8.post(`${i}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function d(e,t){n.E8.put(`${i}`,e).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}function l(e,t){n.E8.delete(`${i}/${e}`).then((e=>{t(null,e.data)})).catch((e=>{t(e)}))}},7379:(e,t,s)=>{s.d(t,{Cm:()=>d,D3:()=>o,EO:()=>h,Lw:()=>r,O0:()=>a,cX:()=>l});var n=s(76400);const i="/roles";function a(e){n.E8.get(`${i}`).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}function r(e,t){n.E8.get(`${i}/${e}`).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}function o(e,t){n.E8.put(`${i}/${e.id}`,e).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}function d(e,t){n.E8.post(`${i}`,e).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}function l(e){n.E8.get(`${i}/types`).then((function(t){e(null,t.data)})).catch((function(t){e(t)}))}function h(e,t){n.E8.delete(`${i}/${e}`).then((function(e){t(null,e.data)})).catch((function(e){t(e)}))}},31822:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var n=s(65043),i=s(84134),a=s(97837),r=s(97508),o=s(28096),d=s(80231),l=s(75304),h=s(38477),c=(s(15421),s(37519)),u=s(17305),m=s(7379),p=s(70579);class b extends n.Component{constructor(e){super(e),this.handleReset=()=>{this.forceUpdate()},this.handleSubmit=e=>{e.preventDefault(),this.setState({isDisabled:!0});const t={},s=e.target;for(let n=0;n<s.length;n++){const e=s.elements[n].name,i=s.elements[n].value;i&&(t[e]=i)}if(this.state.branchId&&(t.branchId=this.state.branchId),t.departmentId&&t.hierarchy&&t.hierarchy.startsWith("Dept_")?t.departmentId=t.hierarchy.replace("Dept_",""):t.hierarchy.startsWith("Dept_")&&this.state.department_hierarchy_id&&(t.departmentId=this.state.department_hierarchy_id),this.validatePasswordConf(t.password,t.confirmPassword)){if(delete t.confirmPassword,null===t||void 0===t||!t.password){let e=[...Array(10)].map((e=>(~~(36*Math.random())).toString(36))).join("");t.password=e}(0,i.nu)({...t,userType:"admin"},((e,t)=>{var s,n;if(e)return 409===(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.status)?(o.oR.error("Duplicate Identity No. or Email"),void this.setState({isDisabled:!1})):403===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)?(o.oR.error("Unable to add user maximum number exceeded"),void this.setState({isDisabled:!1})):(this.setState({validationErrors:e.response.data.data,isDisabled:!1}),void o.oR.error("There are some errors with the data provided."));t&&t.success&&(this.props.dispatch((0,c.Ni)()),o.oR.success("Successfull!"),this.props.history.push(d.A.adminUsers))}))}else this.setState({isDisabled:!1})},this.validatePasswordConf=(e,t)=>e===t||(document.getElementById("confirmPassword").focus(),o.oR.warn("Passwords do not match!"),!1),this.handleShowPassword=e=>{const t=this.state.showPassword;this.setState({showPassword:!t})},this.state={roles:[],userStatuses:[],branches:[],departments:[],showPassword:!1,hierarchy:[],hierarchies:[],security_hierarchy:null,userGroup:[],unit:!1,validationErrors:{},parentList:[],isDisabled:!1,department_hierarchy_id:null},this.handleChange=this.handleChange.bind(this)}handleChange(e){const{name:t,value:s}=e.target;switch(t){case"hierarchy":const e=this.props.allFields.hierarchy.find((e=>e.code===s));if("unit"===e.type){const t=null===e||void 0===e?void 0:e.departmentId;this.props.allFields.hierarchy.find((e=>e.id===t));this.setState({unit:!0,security_hierarchy:s})}else this.setState({unit:!1,security_hierarchy:s,branchId:(null===e||void 0===e?void 0:e.branchId)||null,departmentId:(null===e||void 0===e?void 0:e.departmentId)||null,department_hierarchy_id:(null===e||void 0===e?void 0:e.departmentId)||null});break;case"departmentId":this.setState({departmentId:s,branchId:s});break;case"branchId":if(!this.state.unit){const e=this.props.allFields.hierarchy.find((e=>(null===e||void 0===e?void 0:e[t])==s));this.setState({[t]:s,security_hierarchy:null===e||void 0===e?void 0:e.code});break}this.setState({[t]:s})}}componentDidMount(){(0,u.ax)(((e,t)=>{e||this.setState({parentList:t})})),(0,m.O0)(((e,t)=>{e||this.setState({roles:t})})),this.setState(this.props.allFields)}render(){return(0,p.jsxs)(l.A,{className:"shadow",children:[(0,p.jsx)(h.A,{children:(0,p.jsx)("p",{className:"h5",children:this.props.name})}),(0,p.jsx)(a.A,{validationErrors:this.state.validationErrors?this.state.validationErrors:null,onReset:this.handleReset,onChange:this.handleChange,onSubmit:this.handleSubmit,onShowPassword:this.handleShowPassword,showPassword:this.state.showPassword,...this.props,...this.state})]})}}const v=(0,r.Ng)((e=>({allFields:e.allFields})))(b)},97837:(e,t,s)=>{s.d(t,{A:()=>g});s(65043);var n=s(19368),i=s(18039),a=s(96541),r=s(10810),o=s(97956),d=s(44864),l=s(25852),h=s(13718),c=s(83407),u=s(15421),m=s(97508),p=(s(6207),s(76400),s(28344)),b=s(70579);const v=[{id:3,name:"3 times"},{id:5,name:"5 times"},{id:10,name:"10 times"}],g=e=>{var t,s,g;const x=null===e||void 0===e?void 0:e.isEdit,j=e.user?null===e||void 0===e?void 0:e.user:{},w=null!==e&&void 0!==e&&e.permissions?e.permissions:{},f=null!==e&&void 0!==e&&e.validationErrors?null===e||void 0===e?void 0:e.validationErrors:null,y=1===(0,m.d4)((e=>e.userProfile)).id,C=null===e||void 0===e||null===(t=e.security_hierarchy)||void 0===t?void 0:t.slice(e.security_hierarchy.length-1),E=null===e||void 0===e||null===(s=e.parentList)||void 0===s?void 0:s.find((e=>String(e.id)===C));null===E||void 0===E||null===(g=E.branches)||void 0===g||g.map((e=>({id:e.hirarchybranchId,name:e.name})));return(0,b.jsxs)("form",{id:"signup-form",onReset:e.onReset,onSubmit:e.onSubmit,children:[(0,b.jsx)(d.A,{children:(0,b.jsxs)(l.A,{children:[(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{required:!0,onInput:e=>(0,p.P)(e.target),onChange:e.onChange,label:"Identity Number",disabled:!y&&x,name:"identityNo",object:j,isEdit:x,errors:null===f||void 0===f?void 0:f.identityNo})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onInput:e=>(0,p.P)(e.target),onChange:e.onChange,label:"Email",disabled:!y&&x,required:!0,name:"email",object:j,type:"email",isEdit:x,errors:null===f||void 0===f?void 0:f.email})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"Full Name",onInput:e=>(0,p.P)(e.target),name:"name",required:!0,disabled:!y&&x,object:j,isEdit:x,errors:null===f||void 0===f?void 0:f.name})}),(0,u.excludeThisVendor)(u.banks.bok.name)&&(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.Ae,{onChange:e.onChange,label:"Gender",name:"gender",object:j,options:[{id:"male",name:"Male"},{id:"female",name:"Female"},{id:"other",name:"Other"}],isEdit:x,errors:f?f.gender:null})}),(0,u.excludeThisVendor)(u.banks.bok.name)&&(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"Date of Birth",name:"dateOfBirth",type:"date",object:j,isEdit:x,errors:f?f.dateOfBirth:null})}),(0,u.excludeThisVendor)(u.banks.bok.name)&&(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"Phone Number",onInput:e=>(0,p.P)(e.target),name:"phoneNumber",object:j,errors:null===f||void 0===f?void 0:f.phoneNumber,isEdit:x})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"Designation",errors:null===f||void 0===f?void 0:f.designation,name:"designation",object:j,onInput:e=>(0,p.P)(e.target),isEdit:x})}),w.user>=i.Xd?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"Expiry Date",name:"expiryDate",object:j,type:"date",isEdit:x,errors:f?f.expiryDate:null})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.Ae,{required:!0,onChange:e.onChange,label:"Role",name:"roleId",object:j,options:e.allFields.roles,isEdit:x,errors:f?f.roleId:null})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.Ae,{required:!0,label:"Security Hierarchy",name:"hierarchy",onChange:e.onChange,object:j,defaultValueOnlyForCombobox:null===e||void 0===e?void 0:e.security_hierarchy,options:e.allFields.hierarchy,isEdit:x,errors:f?f.hierarchy:null})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.Ae,{required:!0,onChange:e.onChange,label:"Login Attempts",name:"loginAttempts",object:j,options:v,defaultValue:10,isEdit:x,errors:f?f.loginAttempts:null})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.Ae,{required:!0,onChange:e.onChange,label:"Status",name:"statusId",object:j,defaultValue:1,options:e.userStatuses,isEdit:x,errors:f?f.statusId:null})})]}):null,(0,b.jsx)(h.A,{md:12,children:(0,b.jsxs)(l.A,{children:[(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"New Password",name:"password",type:e.showPassword?"text":"password",object:j,isEdit:x,errors:f.password})}),(0,b.jsx)(h.A,{md:3,children:(0,b.jsx)(n.wi,{onChange:e.onChange,label:"Confirm Password",name:"confirmPassword",type:e.showPassword?"text":"password",object:j,isEdit:x})}),(0,b.jsx)(h.A,{md:3,className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(n.wi,{onChange:e.onShowPassword,name:"showPassword",type:"checkbox",children:"show passwords"})})]})}),(0,b.jsx)(h.A,{md:12,children:(0,b.jsx)(n.wi,{isEdit:x,object:j,label:"Notes",name:"notes",type:"textarea",onChange:e.onChange})})]})}),(0,b.jsx)(c.A,{className:"d-flex justify-content-end",children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"mx-2 btn btn-info text-white",type:"button",onClick:()=>e.history.push(a.A.adminUsers),children:"Cancel"}),(0,b.jsx)("button",{className:"btn btn-success",type:"submit",children:"Update"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.A,{onClick:()=>window.history.back()}),(0,b.jsx)(r.A,{isDisabled:e.isDisabled})]})})]})}},28344:(e,t,s)=>{s.d(t,{P:()=>n});const n=e=>{/^\s/.test(e.value)&&(e.value="")}}}]);
//# sourceMappingURL=1822.7059ba37.chunk.js.map