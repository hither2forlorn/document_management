"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[6566],{97404:(e,s,r)=>{r.d(s,{A:()=>x});var l=r(65043),t=r(71094),a=r(58472),i=r(25852),n=r(13718),o=r(97508),d=r(59135),c=r(87561),u=r(7467),h=r(88988),m=r(95702),p=(r(15421),r(70579));const x=(0,o.Ng)((e=>({allFields:e.allFields,searchData:e.docSearchData})))((function(e){const{columns:s,data:r,allData:o}=e,[x,v]=(0,l.useState)(""),{getTableProps:j,getTableBodyProps:b,headerGroups:f,page:g,gotoPage:N,setPageSize:A,prepareRow:S,setFilter:y,state:{pageIndex:P,pageSize:w}}=(0,t.useTable)({columns:s,data:x&&(e.LocationMapBata||e.securityHierarchyBata)?o:r},t.useFilters,t.useSortBy,t.usePagination);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"form-group rounded",children:(0,p.jsxs)("div",{className:"input-group mb-2",children:[(0,p.jsx)("div",{className:"input-group-prepend rounded",children:(0,p.jsx)("div",{className:"input-group-text rounded",children:(0,p.jsx)("i",{className:"fas fa-search"})})}),(0,p.jsx)("input",{name:e.name||"name",value:x,className:"form-control rounded",onChange:e=>{const s=e.target.value||void 0;if("DocumentName"===e.target.name)y("DocumentName",s),v(s);else y("name",s),v(s)},placeholder:"Search by name column"})]})}),(0,p.jsxs)(a.A,{responsive:!0,bordered:!0,hover:!0,...j(),id:"toExcelData",children:[(0,p.jsx)("thead",{className:"table-active",children:f.map((e=>(0,p.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e=>(0,p.jsxs)("th",{...e.getHeaderProps(e.getSortByToggleProps()),className:e.isSorted?e.isSortedDesc?"sort-desc":"sort-asc":"",children:[e.render("Header"),(0,p.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,p.jsxs)("span",{children:["  ",(0,p.jsx)("i",{className:"fas fa-caret-square-down text-info ml-2"})]}):(0,p.jsxs)("span",{children:["  ",(0,p.jsx)("i",{className:"fas fa-caret-square-up text-info pl-1"})]}):(0,p.jsxs)("span",{children:[" ",(0,p.jsx)("i",{className:"fas fa-sort text-info pl-1"})]})})]})))})))}),(0,p.jsx)("tbody",{...b(),children:g.map(((e,s)=>(S(e),(0,p.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e=>(0,p.jsx)("td",{...e.getCellProps(),children:e.render("Cell")})))}))))})]}),(0,p.jsxs)(i.A,{children:[(0,p.jsx)(n.A,{children:(0,p.jsx)(d.A,{count:parseInt(Math.ceil(r.length/w)),onChange:(e,s)=>{N(s-1)},shape:"rounded",page:P+1})}),(0,p.jsx)(n.A,{children:(0,p.jsxs)("div",{className:"float-right mt-2 d-flex align-items-center",children:[(0,p.jsx)("p",{className:"mb-0 mr-2",children:"Items Per Page"}),(0,p.jsx)(c.A,{children:(0,p.jsxs)(u.A,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:w,onChange:e=>{A(Number(e.target.value))},className:"form-control rounded",children:[(0,p.jsx)(h.A,{value:5,children:"5"}),(0,p.jsx)(h.A,{value:10,children:"10"}),(0,p.jsx)(h.A,{value:20,children:"20"})]})}),(0,p.jsxs)("p",{className:"mb-0 ml-2",children:["Total Documents :",(0,p.jsx)("b",{className:"mr-2",children:r.length})," Page :",(0,p.jsxs)("b",{children:[" ",P+1]})]}),(0,p.jsx)(m.A,{id:"toExcel-button",className:"btn btn-sm ml-2 btn-primary text-white float-right",table:"toExcelData",filename:"attachmentstable",sheet:"tablexls",buttonText:"Download Report"})]})})]})]})}))},46566:(e,s,r)=>{r.r(s),r.d(s,{default:()=>w});var l=r(65043),t=r(62582),a=r(58441),i=r(46759),n=r(18039),o=r(97508),d=r(80231),c=(r(10577),r(11594)),u=r(75304),h=r(38477),m=r(44864),p=r(97404),x=r(70579);class v extends l.Component{constructor(){super(...arguments),this.state={userList:[],currentPageNumber:1,startOffset:0,roles:[],branches:[],userStatuses:[],departments:[]},this.handleSelect=e=>{var s;e>0&&e-1<(null===this||void 0===this||null===(s=this.props)||void 0===s?void 0:s.userList.length)/10&&this.setState({currentPageNumber:e,startOffset:10*(e-1)})},this.columnData=[{Header:"S.N",accessor:"serial"},{Header:"Identity No",accessor:"identityNo"},{Header:"Name",accessor:"name"},{Header:"Designation",accessor:"designation",disableSortBy:!0},{Header:"Status",accessor:"status",Cell:e=>{var s,r;let{row:l}=e;return(0,i._W)(null===this||void 0===this||null===(s=this.state)||void 0===s?void 0:s.userStatuses,null===l||void 0===l||null===(r=l.original)||void 0===r?void 0:r.statusId)}},{Header:"User Role",accessor:"useRole",Cell:e=>{var s,r;let{row:l}=e;return(0,i._W)(null===this||void 0===this||null===(s=this.state)||void 0===s?void 0:s.roles,null===l||void 0===l||null===(r=l.original)||void 0===r?void 0:r.roleId)}},{Header:"Branch",accessor:"branch",Cell:e=>{var s,r;let{row:l}=e;return(0,i._W)(null===this||void 0===this||null===(s=this.state)||void 0===s?void 0:s.branches,null===l||void 0===l||null===(r=l.original)||void 0===r?void 0:r.branchId)}},{Header:"Security Hierarchy Code",accessor:"security_hierarchy_code",Cell:e=>{let{row:s}=e;return s.original.hierarchy}},{Header:"Actions",accessor:"action",disableSortBy:!0,Cell:e=>{var s,r;let{row:l}=e;const t=this.props.permissions||{};return(0,x.jsx)("div",{style:{cursor:"pointer"},children:(null===this||void 0===this||null===(s=this.props)||void 0===s?void 0:s.userProfile.id)==l.original.id&&1!=(null===this||void 0===this||null===(r=this.props)||void 0===r?void 0:r.userProfile.id)?null:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.A,{to:d.A.adminUsersEdit+"?i="+a.A.getHash(l.original.id),buttonType:"edit",permission:t.user}),(0,x.jsx)(c.A,{onClick:()=>{var e;return null===this||void 0===this||null===(e=this.props)||void 0===e?void 0:e.deleteUser(l.original.id)},buttonType:"delete",permission:t.user})]})})}}]}componentDidMount(){var e,s;this.setState(null===this||void 0===this||null===(e=this.props)||void 0===e?void 0:e.allFields),this.setState(null===this||void 0===this||null===(s=this.props)||void 0===s?void 0:s.userProfile)}render(){var e,s;const r=(null===this||void 0===this||null===(e=this.props)||void 0===e?void 0:e.permissions)||{};return(0,x.jsxs)(u.A,{className:"shadow",children:[(0,x.jsxs)(h.A,{children:[(0,x.jsx)("p",{className:"h5",children:"Users List"}),r.user===n.Xd||r.user===n.n7?(0,x.jsxs)(t.Link,{to:d.A.adminUsersAdd,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,x.jsx)("i",{className:"fa fa-plus"})," Add User"]}):null]}),(0,x.jsx)(m.A,{children:(0,x.jsx)(p.A,{columns:null===this||void 0===this?void 0:this.columnData,data:null===this||void 0===this||null===(s=this.props)||void 0===s?void 0:s.userList})})]})}}const j=(0,o.Ng)((e=>({allFields:e.allFields,userProfile:e.userProfile})))(v);var b=r(84134),f=r(45413),g=r(87382),N=r(15421);function A(e){const[s,r]=(0,l.useState)({}),{userProfile:t,allFields:a}=(0,o.d4)((e=>e));return(0,l.useEffect)((()=>{var e;const l=null===a||void 0===a||null===(e=a.branches)||void 0===e?void 0:e.filter((e=>(null===t||void 0===t?void 0:t.branchId)==e.id));r({...s,branches:1==t.id||(0,N.onlyForThisVendor)(N.banks.bok)?a.branches:l})}),[]),(0,x.jsxs)(u.A,{className:"shadow",children:[(0,x.jsx)(h.A,{children:(0,x.jsxs)("p",{className:"h5",children:[(0,x.jsx)("i",{className:" fas fa-solid fa-filter"}),"Filter Users"]})}),(0,x.jsx)(m.A,{className:"pt-3",children:(0,x.jsxs)("form",{onSubmit:e.onSubmit,className:"search-user-container",children:[(0,x.jsxs)(f.A,{children:[(0,x.jsx)("label",{children:"Status"}),(0,x.jsxs)("select",{className:"form-control rounded",name:"statusId",id:"statusId",children:[(0,x.jsx)("option",{value:"",children:"--NONE--"}),(0,i.$E)(a.userStatuses)]})]}),(0,x.jsxs)(f.A,{children:[(0,x.jsx)("label",{children:"Role"}),(0,x.jsxs)("select",{className:"form-control rounded",name:"roleId",id:"roleId",children:[(0,x.jsx)("option",{value:"",children:"--NONE--"}),(0,i.$E)(a.roles)]})]}),(0,x.jsxs)(f.A,{children:[" ",(0,x.jsx)("label",{children:"Branch"}),(0,x.jsxs)("select",{className:"form-control rounded",name:"branchId",id:"branchId",children:[(0,x.jsx)("option",{value:"",children:"--NONE--"}),(0,i.$E)(a.branches)]})]}),(0,x.jsxs)(f.A,{children:[" ",(0,x.jsx)("label",{children:"Department"}),(0,x.jsxs)("select",{className:"form-control rounded",name:"departmentId",id:"departmentId",children:[(0,x.jsx)("option",{value:"",children:"--NONE--"}),(0,i.$E)(a.departments)]})]}),(0,x.jsx)(g.A,{className:"mt-2 btn-block",type:"submit",children:"Filter"})]})})]})}var S=r(28096),y=r(25852),P=r(13718);const w=(0,o.Ng)((e=>({user:e.allFields,userProfile:e.userProfile})))((e=>{const[s,r]=(0,l.useState)({userType:"admin"}),[t,a]=(0,l.useState)([]),i=()=>{(0,b.lo)(s,((e,s)=>{e||(s&&s.forEach(((e,s)=>{e.serial=s+1})),a(s))}))};return(0,l.useEffect)((()=>{i()}),[s]),(0,x.jsxs)(y.A,{children:[(0,x.jsx)(P.A,{sm:3,children:(0,x.jsx)(A,{onSubmit:e=>{e.preventDefault();const s={},l=e.target;for(let r=0;r<l.length;r++){const e=l.elements[r].name,t=l.elements[r].value;t&&(s[e]=t)}r({...s}),i()}})}),(0,x.jsx)(P.A,{sm:9,className:"pl-3 pl-md-0",children:(0,x.jsx)(j,{deleteUser:s=>{e.userProfile.id!==s?(0,b.hG)(s,((r,l)=>{r||(l.success?(S.oR.success("User deleted successfully."),s==e.userProfile.id&&(localStorage.clear(),window.location.reload()),i()):S.oR.error(l.message))})):S.oR.warn("You cannot delete your Self")},userList:t,...e})})]})}))}}]);
//# sourceMappingURL=6566.872f35f7.chunk.js.map