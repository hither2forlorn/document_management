{"version":3,"file":"static/js/664.2d7d82da.chunk.js","mappings":"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","sources":["admin/views/Roles/AddRole.js","admin/views/Roles/RoleForm.js","admin/views/Roles/api.js","admin/views/Roles/util.js","admin/views/Util/preventWhitespaceAtFirst.js","utils/textCapital.js","../node_modules/reactstrap/es/Table.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport { getFormData } from \"config/form\";\r\nimport { addRole, getRoleTypes } from \"./api\";\r\nimport RoleForm from \"./RoleForm\";\r\nimport metaRoutes from \"config/meta_routes\";\r\nimport { toast } from \"react-toastify\";\r\nimport titleCase from \"utils/textCapital\";\r\nimport { connect } from \"react-redux\";\r\nimport { loadAllFields } from \"redux/actions/apiAction\";\r\n\r\nclass AddRole extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  state = {\r\n    isDisabled: false,\r\n    role: { name: \"\" },\r\n    roleTypes: [],\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    const name = e.target.name;\r\n    let value = e.target.value;\r\n    const [type, roleTypeId] = e.target.name.split(\"-\");\r\n    const role = this.state.role;\r\n    if (name === \"name\") {\r\n      value = titleCase(value);\r\n    }\r\n\r\n    if (type === \"control\") {\r\n      let flagFound = false;\r\n      role.role_controls = role.role_controls\r\n        ? role.role_controls.map((rC) => {\r\n            if (rC.roleTypeId === Number(roleTypeId)) {\r\n              flagFound = true;\r\n              rC.value = value;\r\n            }\r\n            return rC;\r\n          })\r\n        : [];\r\n      if (!flagFound) {\r\n        role.role_controls.push({\r\n          roleId: role.id,\r\n          roleTypeId: Number(roleTypeId),\r\n          value: value,\r\n        });\r\n      }\r\n    } else {\r\n      switch (e.target.type) {\r\n        case \"radio\":\r\n          role[e.target.name] = e.target.checked;\r\n          break;\r\n        case \"checkbox\":\r\n          role[e.target.name] = e.target.checked;\r\n\r\n          break;\r\n        default:\r\n          role[e.target.name] = value;\r\n          break;\r\n      }\r\n    }\r\n    this.setState({\r\n      role: { ...role },\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    getRoleTypes((err, roleTypes) => {\r\n      if (err) return;\r\n      this.setState({ roleTypes: roleTypes });\r\n    });\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const role = this.state.role;\r\n\r\n    const form = getFormData(e);\r\n    addRole(role, (err, data) => {\r\n      if (err) {\r\n        toast.error(err?.response?.data?.message || \"Errr Creating Roles\");\r\n        return;\r\n      }\r\n      this.props.dispatch(loadAllFields());\r\n      toast.success(data.message);\r\n      this.props.history.push(metaRoutes.adminRoles);\r\n      this.setState({ isDisabled: true });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <RoleForm\r\n        handleChange={this.handleChange}\r\n        title=\"Add Role\"\r\n        roleTypes={this.state.roleTypes}\r\n        handleSubmit={this.handleSubmit}\r\n        isDisabled={this.state.isDisabled}\r\n        role={this.state.role}\r\n        {...this.props}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect((state) => ({ allFields: state.allFields }))(AddRole);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Card, CardBody, CardHeader, CardFooter, Button, Col, Row, Input, Form, FormGroup, Label, Table } from \"reactstrap\";\r\nimport { optionsPage, optionsBoolean } from \"./util\";\r\nimport CustomSubmit from \"admin/components/CustomSubmit\";\r\nimport CustomCancel from \"admin/components/CustomCancel\";\r\nimport { connect } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { server } from \"admin/config/server\";\r\nimport { preventWhitespaceAtFirst } from \"../Util/preventWhitespaceAtFirst\";\r\n\r\nconst RoleForm = (props) => {\r\n  const isEdit = !!props.isEdit;\r\n  const role = props.role ? props.role : {};\r\n  const [permission, setPermission] = useState({});\r\n  const [capitalCase, setcapitalCase] = useState(\"\");\r\n  useEffect(() => {\r\n    server\r\n      .get(\"/permissions\")\r\n      .then((json) => {\r\n        setPermission(json.data);\r\n      })\r\n      .catch((err) => {\r\n        toast.error(\"Permission error\");\r\n      });\r\n  }, []);\r\n\r\n\r\n  const roleControls = props.role_controls ? props.role_controls : [];\r\n\r\n  const data = roleControls.filter((role) => role?.value === \"false\");\r\n\r\n  // hide when isFirstTime is false\r\n  const isFirstTime = (data.length = 0 || data.length === 4 ? true : false);\r\n\r\n  const renderRadio = (rT, roleValue, user_permission) => {\r\n    switch (rT.type) {\r\n      // Pages like document, Roles, and others.\r\n      case \"page\":\r\n        return optionsPage.map((o, i) => {\r\n          // For Edit => change after selected.\r\n          if (o.value == 3 && user_permission < 3) return;\r\n          if (o.value === parseInt(roleValue)) {\r\n            // if (o.value == 2 && user_permission < 2) return;\r\n            return (\r\n              <div>\r\n                <Input\r\n                  className=\"rounded\"\r\n                  type=\"radio\"\r\n                  id={i}\r\n                  name={\"control-\" + rT.id}\r\n                  value={o.value}\r\n                  checked\r\n                  onChange={props.handleChange}\r\n                />\r\n                <label for={i}>{o.label == \"--- NONE ---\" ? \"None\" : o.label}</label>\r\n                <br />\r\n              </div>\r\n            );\r\n          } else {\r\n            // preview before selected\r\n            return o.label !== \"--- NONE ---\" ? (\r\n              <div>\r\n                <Input\r\n                  className=\"rounded\"\r\n                  type=\"radio\"\r\n                  id={i}\r\n                  name={\"control-\" + rT.id}\r\n                  value={o.value}\r\n                  onChange={props.handleChange}\r\n                />\r\n                <label for={i}>{o.label}</label>\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                <Input\r\n                  className=\"rounded\"\r\n                  type=\"radio\"\r\n                  id={i}\r\n                  name={\"control-\" + rT.id}\r\n                  value={o.value}\r\n                  onChange={props.handleChange}\r\n                />\r\n                <label for={i}>None</label>\r\n              </div>\r\n            );\r\n          }\r\n        });\r\n      // For Yes / No radio Buttion\r\n      case \"boolean\":\r\n        return optionsBoolean.map((o, i) => {\r\n          if (JSON.stringify(o.value) === roleValue) {\r\n            return (\r\n              <div>\r\n                <Input\r\n                  className=\"rounded\"\r\n                  type=\"radio\"\r\n                  id={i}\r\n                  name={\"control-\" + rT.id}\r\n                  value={o.value}\r\n                  checked\r\n                  onChange={props.handleChange}\r\n                ></Input>\r\n                <label for={i}>{o.label}</label>\r\n              </div>\r\n            );\r\n          } else {\r\n            return (\r\n              <div>\r\n                <Input\r\n                  className=\"rounded\"\r\n                  type=\"radio\"\r\n                  id={i}\r\n                  name={\"control-\" + rT.id}\r\n                  value={o.value}\r\n                  onChange={props.handleChange}\r\n                ></Input>\r\n                <label for={i}>{o.label}</label>\r\n              </div>\r\n            );\r\n          }\r\n        });\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"shadow\">\r\n      <Form id={props.formId} onSubmit={props.handleSubmit}>\r\n        <CardHeader>\r\n          <p className=\"h5\">{props.title}</p>\r\n        </CardHeader>\r\n        <CardBody>\r\n          <FormGroup>\r\n            <Label htmlFor=\"name\">Name</Label>\r\n\r\n            <Input\r\n              className=\"rounded\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n              onInput={(e) => preventWhitespaceAtFirst(e.target)}\r\n              id=\"name\"\r\n              placeholder=\"Enter role name\"\r\n              required\r\n              value={role.name ? role.name : \"\"}\r\n              onChange={props.handleChange}\r\n            />\r\n          </FormGroup>\r\n          {/* {isEdit && ( */}\r\n          <Row>\r\n            <Col>\r\n              <div className=\"alert alert-dark\" role=\"alert\">\r\n                Note: Manage the roles of the user by modifying the given actions.\r\n              </div>\r\n              <Table responsive bordered hover>\r\n                <thead className=\"table-active\">\r\n                  <tr>\r\n                    <th scope=\"col\">Roles Type</th>\r\n                    <th scope=\"col\" className=\"text-center\">\r\n                      Action\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {props.roleTypes &&\r\n                    props.roleTypes.map((rT, i) => {\r\n                      return Object.entries(permission).map(([key, value], index) => {\r\n                        // props.allFields\r\n                        let roleControl = roleControls.find((rC) => rC.roleTypeId == rT.id);\r\n\r\n                        {\r\n                          /* remove reduntant roles */\r\n                        }\r\n\r\n                        if (key != rT.key || value === 0 || value === 1 || value == false) return;\r\n\r\n                        roleControl = roleControl || {};\r\n\r\n                        function roleName() {\r\n                          switch (rT.name) {\r\n                            case \"User\":\r\n                              rT.name += \" - logged user can control user section.\";\r\n                              break;\r\n                            case \"Ldap User\":\r\n                              rT.name += \" - logged user can control AD user section.\";\r\n                              break;\r\n                            case \"Role\":\r\n                              rT.name += \" - User will be able to access roles section and more.\";\r\n                              break;\r\n                            case \"Branch\":\r\n                              rT.name += \" - User will be able to access branch section and more.\";\r\n                              break;\r\n                            case \"Document\":\r\n                              rT.name += \" - User will be able to access document section and more\";\r\n                              break;\r\n                            case \"Download\":\r\n                              rT.name += \" - User may or may not download the attachments.\";\r\n                              break;\r\n                            case \"Archived\":\r\n                              rT.name += \" - User may or maynot access archive section of document.\";\r\n                              break;\r\n                            case \"Department\":\r\n                              rT.name += \" -  User will be able to access department section and more.\";\r\n                              break;\r\n                            case \"Document Condition\":\r\n                              rT.name += \" - User will be able to access document condition section and more.\";\r\n                              break;\r\n                            case \"Document Type\":\r\n                              rT.name += \" - User will be able to access document type section and more.\";\r\n                              break;\r\n                            case \"Location Map\":\r\n                              rT.name += \" - User will be able to access location map section and more.\";\r\n                              break;\r\n                            case \"Location Type\":\r\n                              rT.name += \" - User will be able to access location type section and more.\";\r\n                              break;\r\n                            case \"Language\":\r\n                              rT.name += \" - User will be able to access language section and more.\";\r\n                              break;\r\n                            case \"User role\":\r\n                              rT.name += \" - Select yes if the user is checker or select no if the user is maker.\";\r\n                              break;\r\n                            default:\r\n                              rT.name += \"\";\r\n                              break;\r\n                          }\r\n                        }\r\n\r\n                        return (\r\n                          <tr key={index}>\r\n                            <td style={{ width: \"50%\" }}>\r\n                              <Label htmlFor={i} title={rT.description ? rT.description : \"\"}>\r\n                                {(roleName(), rT.name)}\r\n                              </Label>\r\n                            </td>\r\n\r\n                            {/*with radio buttons*/}\r\n                            <td>\r\n                              <span className=\"d-flex justify-content-around\">\r\n                                {renderRadio(rT, roleControl.value, value)}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      });\r\n                    })}\r\n                </tbody>\r\n              </Table>\r\n            </Col>\r\n          </Row>\r\n          {/* )} */}\r\n          <div className=\"\"></div>\r\n        </CardBody>\r\n        <CardFooter className=\"d-flex justify-content-end\">\r\n          {isEdit ? (\r\n            <>\r\n              <Button onClick={() => window.history.back()} type=\"button\" color=\"danger\" className=\"mx-2 text-white\">\r\n                Cancel\r\n              </Button>\r\n              <Button type=\"submit\" color=\"primary\">\r\n                Submit\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <CustomCancel onClick={() => window.history.back()} />\r\n              <CustomSubmit isDisabled={props.isDisabled} />\r\n            </>\r\n          )}\r\n        </CardFooter>\r\n      </Form>\r\n    </Card>\r\n  );\r\n};\r\nexport default connect((state) => ({\r\n  allFields: state.allFields,\r\n  userProfile: state.userProfile,\r\n}))(RoleForm);\r\n","import { server } from \"admin/config/server\";\r\n\r\nconst url = \"/roles\";\r\n\r\nfunction getRoles(callback) {\r\n  server\r\n    .get(`${url}`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction getRole(id, callback) {\r\n  server\r\n    .get(`${url}/${id}`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction editRole(role, callback) {\r\n  server\r\n    .put(`${url}/${role.id}`, role)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction addRole(role, callback) {\r\n  server\r\n    .post(`${url}`, role)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction getRoleTypes(callback) {\r\n  server\r\n    .get(`${url}/types`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nfunction deleteRole(id, callback) {\r\n  server\r\n    .delete(`${url}/${id}`)\r\n    .then(function (json) {\r\n      callback(null, json.data);\r\n    })\r\n    .catch(function (err) {\r\n      callback(err);\r\n    });\r\n}\r\n\r\nexport { getRoles, getRoleTypes, getRole, editRole, addRole, deleteRole };\r\n","import { NONE, VIEW, VIEW_EDIT, VIEW_EDIT_DELETE } from \"config/values\";\r\n\r\nconst optionsPage = [\r\n  {\r\n    value: NONE,\r\n    label: \"--- NONE ---\",\r\n  },\r\n  {\r\n    value: VIEW,\r\n    label: \"View\",\r\n  },\r\n  {\r\n    value: VIEW_EDIT,\r\n    label: \"Edit\",\r\n  },\r\n  {\r\n    value: VIEW_EDIT_DELETE,\r\n    label: \"Edit / Delete\",\r\n  },\r\n];\r\n\r\nconst optionsBoolean = [\r\n  {\r\n    value: false,\r\n    label: \"No\",\r\n  },\r\n  {\r\n    value: true,\r\n    label: \"Yes\",\r\n  },\r\n];\r\n\r\nexport { optionsPage, optionsBoolean, VIEW, VIEW_EDIT, VIEW_EDIT_DELETE };\r\n","export const preventWhitespaceAtFirst = (str) => {\r\n  if (/^\\s/.test(str.value)) str.value = \"\";\r\n};\r\n","export default function titleCase(text) {\r\n  return text.charAt(0).toUpperCase() + text.slice(1);\r\n}\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"];\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;"],"names":["AddRole","Component","constructor","props","super","state","isDisabled","role","name","roleTypes","handleChange","e","target","value","type","roleTypeId","split","this","titleCase","flagFound","role_controls","map","rC","Number","push","roleId","id","checked","setState","handleSubmit","preventDefault","getFormData","addRole","err","data","_err$response","_err$response$data","toast","error","response","message","dispatch","loadAllFields","success","history","metaRoutes","adminRoles","bind","componentDidMount","getRoleTypes","render","_jsx","RoleForm","title","connect","allFields","userProfile","isEdit","permission","setPermission","useState","capitalCase","setcapitalCase","useEffect","server","get","then","json","catch","roleControls","filter","renderRadio","length","rT","roleValue","user_permission","optionsPage","o","i","parseInt","_jsxs","children","Input","className","onChange","for","label","optionsBoolean","JSON","stringify","Card","Form","formId","onSubmit","CardHeader","CardBody","FormGroup","Label","htmlFor","onInput","preventWhitespaceAtFirst","placeholder","required","Row","Col","Table","responsive","bordered","hover","scope","Object","entries","_ref","index","key","roleControl","find","style","width","description","roleName","CardFooter","_Fragment","Button","onClick","window","back","color","CustomCancel","CustomSubmit","url","getRoles","callback","getRole","editRole","put","post","deleteRole","delete","NONE","VIEW","VIEW_EDIT","VIEW_EDIT_DELETE","str","test","text","charAt","toUpperCase","slice","_excluded","propTypes","PropTypes","cssModule","size","borderless","striped","dark","tag","tagPropType","responsiveTag","innerRef","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","React","_extends","ref","responsiveClassName","defaultProps"],"sourceRoot":""}