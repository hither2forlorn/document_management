"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[7563],{54592:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(43845),r=(s(65043),s(70579));function a(e){let{...t}=e;return(0,r.jsx)(n.A,{...t,color:"primary",size:"small"})}},77563:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var n=s(65043),r=s(23439),a=s.n(r),c=s(40575),l=s(25852),i=s(13718),o=s(94576),d=s(64412),m=s(87382),u=s(94342),h=s(75304),p=s(38477),x=s(44864),j=s(8586),g=s(97508),b=s(46759),A=s(28096),f=s(51080),y=s(70579);const N=(0,g.Ng)((e=>({users:e.allFields.users,statuses:e.allFields.statuses})))((e=>{const t=(e.document||{}).id,[s,r]=(0,n.useState)(""),[a,l]=(0,n.useState)("");return(0,y.jsxs)(h.A,{children:[(0,y.jsx)(p.A,{children:"Document Checkout"}),(0,y.jsx)(x.A,{children:(0,y.jsxs)(o.A,{onSubmit:e=>{},children:[(0,y.jsx)(j.A,{children:"Please select a user"}),(0,y.jsx)(f.A,{}),(0,y.jsxs)(d.A,{className:"my-2",required:!0,value:s,onChange:e=>{let{target:{value:t}}=e;return r(t)},type:"select",children:[(0,y.jsx)("option",{value:"",children:"---- NONE ----"}),(0,b.$E)(e.users)]}),(0,y.jsx)(d.A,{type:"textarea",className:"my-2",required:!0,value:a,onChange:e=>{let{target:{value:t}}=e;return l(t)}}),(0,y.jsx)(m.A,{size:"sm",color:"success",onClick:e=>(e=>{e.preventDefault();const n={documentId:t,userId:s,description:a,statusId:2};!s.length>0?A.oR.error("Please select a user!"):(0,c.kP)(n,((e,t)=>{e?A.oR.error("Error occurred!"):t.success?A.oR.success(t.message):A.oR.warn(t.message)}))})(e),children:"Checkout"})]})})]})}));class v extends n.Component{constructor(){super(...arguments),this.state={identifier:"",documentList:[]},this.handleScan=e=>{e&&this.setState({identifier:e},(()=>{this.updateData()}))},this.onSubmit=e=>{e.preventDefault(),this.updateData()},this.updateData=()=>{this.state.identifier&&(0,c.$X)({identifier:this.state.identifier,checkedOut:!0},((e,t)=>{e||(t.data.length||A.oR.warn("No document found!"),this.setState({documentList:t.data}))}))},this.handleError=e=>{console.error(e)}}componentDidMount(){this.setState({isMounted:!0})}componentWillUnmount(){return new Promise((e=>{this.setState({isMounted:!1},(()=>e()))}))}render(){return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)(l.A,{children:[this.state.isMounted?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.A,{md:3,children:[(0,y.jsx)(a(),{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}}),(0,y.jsxs)(o.A,{onSubmit:this.onSubmit,children:[(0,y.jsx)(d.A,{required:!0,placeholder:"Identifier",className:"my-2 rounded ",value:this.state.identifier,onChange:e=>{let{target:{value:t}}=e;return this.setState({identifier:t})}}),(0,y.jsxs)(m.A,{size:"sm",color:"primary",className:"float-right mb-2",children:[(0,y.jsx)("i",{className:"fa fa-search mr-2"}),"Find"]})]})]}),this.state.documentList.length?(0,y.jsx)(i.A,{md:5,children:(0,y.jsx)(N,{document:this.state.documentList[0]})}):null]}):null,(0,y.jsx)("p",{children:this.state.result})]}),(0,y.jsx)(u.A,{documentList:this.state.documentList,permissions:this.props.permissions})]})}}const k=(0,g.Ng)((e=>({...e.allFields})))(v)},94342:(e,t,s)=>{s.d(t,{A:()=>C});var n=s(65043),r=s(87382),a=s(25852),c=s(13718),l=s(90284),i=s(62582),o=s(97508),d=s(18039),m=s(46759),u=s(58441),h=s(80231),p=s(11594),x=(s(10577),s(75304)),j=s(38477),g=s(44864),b=s(58472),A=s(83407),f=s(46316),y=s(87561),N=s(7467),v=s(88988),k=s(15421),T=(s(54592),s(95702)),D=s(89967),L=s(70579);const C=(0,o.Ng)((e=>({...e.allFields,docLimit:e.docLimitDocumentNumber})))((e=>{var t;const[s,C]=(0,n.useState)(!1),w=e.docLimit,S=e.docPagination,[P,R]=(0,n.useState)(S),E=(e.totalPages,(0,o.d4)((e=>e.docLimitDocumentNumber))),B=t=>{e.documentList.sort(((e,s)=>{try{return e[t].toLowerCase()<s[t].toLowerCase()?-1:e[t].toLowerCase()>s[t].toLowerCase()?1:0}catch(n){return-1}}))};(0,n.useEffect)((()=>{R((e.docPagination-1)*w)}),[e.docPagination,e.dispatch,e.docLimitDocumentNumber]);const F=e.documentTypes?e.documentTypes:[],I=e.departments?e.departments:[],M=e.branches?e.branches:[],O=e.statuses?e.statuses:[],_=e.locationMaps?e.locationMaps:[],z=e.users?e.users:[],W=e.permissions?e.permissions:{};e.makerEmail&&e.makerEmail;function V(e){return(0,L.jsxs)("ul",{style:{listStyleType:"none",margin:0,padding:0,overflow:"hidden",display:"flex",justifyContent:"center"},children:[e.hasQuickQcr&&(0,L.jsx)("li",{style:{float:"left",cursor:"pointer"},"data-toggle":"tooltip","data-placement":"top",title:"Quick OCR Enabled",children:(0,L.jsx)("i",{className:"fas fa-search text-dark bg-warning p-1 mr-1 rounded",placeholder:"Quick OCR"})}),e.hasEncryption&&(0,L.jsx)("li",{style:{float:"left",cursor:"pointer"},"data-toggle":"tooltip","data-placement":"top",title:"Encryption Enabled",children:(0,L.jsx)("i",{className:"fas fa-lock text-dark bg-warning p-1 mr-1 rounded",placeholder:"Encryption"})}),e.hasOtp&&(0,L.jsx)("li",{style:{float:"left",cursor:"pointer"},"data-toggle":"tooltip","data-placement":"top",title:"OTP Verification Enabled",children:(0,L.jsx)("i",{className:"fas fa-envelope text-dark bg-warning p-1 mr-1 rounded",placeholder:"OTP Verification"})})]})}return(0,L.jsxs)(x.A,{className:"shadow",children:[(0,L.jsxs)(j.A,{children:[(0,L.jsx)("p",{className:"h5",children:e.title}),null!==W&&void 0!==W&&W.maker?(0,L.jsxs)(i.Link,{to:h.A.documentsAdd,className:"btn-header btn btn-outline-dark btn-sm border-dark border",children:[(0,L.jsx)("i",{className:"fa fa-plus"})," Add Document"]}):null]}),(0,L.jsx)(g.A,{children:(0,L.jsxs)(b.A,{responsive:!0,bordered:!0,hover:!0,id:"toExcel",children:[(0,L.jsx)("thead",{className:"table-active",children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{scope:"col",children:"Doc Type"}),(0,L.jsx)("th",{scope:"col",children:"Department"}),(0,L.jsx)("th",{scope:"col",children:"Branch"}),(0,k.onlyForThisVendor)("bok")&&(0,L.jsx)("th",{scope:"col",onClick:()=>B("name"),children:"Account Number"}),(0,L.jsx)("th",{scope:"col",onClick:()=>B("otherTitle"),children:"Document Name"}),(0,L.jsx)("th",{scope:"col",children:"Status"}),e.fromRejectedListTable&&(0,L.jsx)("th",{scope:"col",children:"Message"}),(0,L.jsx)("th",{scope:"col",children:"Location"}),(0,L.jsx)("th",{scope:"col",children:"Created By"}),e.fromPendingListTable?(0,L.jsx)("th",{scope:"col",children:"Assigned To"}):e.fromRejectedListTable?(0,L.jsx)("th",{scope:"col",children:"Rejected By"}):(0,L.jsx)("th",{scope:"col",children:"Created At"}),e.fromPendingListTable||e.fromRejectedListTable?(0,L.jsx)("th",{scope:"col",children:"Created At"}):(0,L.jsx)("th",{scope:"col",children:"Approved At"}),e.fromRejectedListTable&&(0,L.jsx)("th",{scope:"col",children:" Rejected At"}),(e.showControl||e.restorePermission)&&(0,L.jsx)("th",{scope:"col",children:"Action"}),e.fromRejectedListTable&&(0,L.jsx)("th",{scope:"col",children:"Action"})]})}),(0,L.jsx)("tbody",{children:null===e||void 0===e||null===(t=e.documentList)||void 0===t?void 0:t.map(((t,s)=>{const n=(0,m._W)(F,t.documentTypeId),a=(0,m._W)(O,t.statusId),c=(0,m._W)(_,t.locationMapId),l=(0,m._W)(I,t.departmentId),o=(0,m._W)(M,t.branchId),x=(0,m._W)(z,t.createdBy),j=(0,m._W)(z,t.assignTo);return console.log(t,"row is here"),(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"text-break",children:n||t.DocumentType?n||t.DocumentType:(0,L.jsx)(D.A,{style:{fontSize:"1rem",textAlign:"center",color:"#ccc"}})}),(0,L.jsx)("td",{className:"text-break",style:{textAlign:"center"},children:l||t.Department?l||t.Department:(0,L.jsx)(D.A,{style:{fontSize:"1rem",textAlign:"center",color:"#ccc"}})}),(0,L.jsx)("td",{className:"text-break",style:{textAlign:"center"},children:o||t.Branch?o||t.Branch:(0,L.jsx)(D.A,{style:{fontSize:"1rem",textAlign:"center",color:"#ccc"}})})," ",(0,k.onlyForThisVendor)("bok")&&(0,L.jsx)("td",{className:"text-break",children:t.name||t.OrganizationName}),(0,L.jsx)("td",{onMouseOver:()=>C(!0),onMouseOut:()=>C(!1),children:(0,L.jsx)(i.Link,{className:"text-break",to:h.A.documentsView+"?i="+u.A.getHash(t.id),children:t.otherTitle||t.DocumentName})}),(0,L.jsxs)("td",{className:"text-break",style:{textAlign:"center",display:"flex",flexDirection:"column"},children:[V(t),(0,L.jsx)("span",{className:"mt-2",children:null!==t&&void 0!==t&&t.returnedByChecker?(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-danger rounded p-1",children:"Rejected"}):(0,L.jsx)(L.Fragment,{children:function(e){switch((null===e||void 0===e?void 0:e.DocumentStatus)||(null===e||void 0===e?void 0:e.statusId)){case"Active":case 1:return(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-success",children:a||e.DocumentStatus});case"Suspended":case 2:return(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-secondary",children:a||e.DocumentStatus});case"checked out":case 3:return(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-dark",children:a||e.DocumentStatus})}}(t)})})]}),e.fromRejectedListTable&&(0,L.jsx)("td",{children:(W.approver||W.checker)&&t.returnedByApprover&&!t.returnedByChecker?(0,L.jsx)("span",{className:"text-break text-center",children:null===t||void 0===t?void 0:t.rejectionMessageByApprover}):((W.approver||W.checker)&&t.returnedByApprover&&t.returnedByChecker,(0,L.jsx)("span",{className:"text-break text-center",children:null===t||void 0===t?void 0:t.rejectionMessageByChecker}))}),(0,L.jsx)("td",{className:"text-break",style:{textAlign:"center"},children:c||t.locationMap?c||t.locationMap:(0,L.jsx)(D.A,{style:{fontSize:"1rem",color:"#ccc"}})}),(0,L.jsxs)("td",{className:"text-break d-flex flex-column text-center",children:[x||t.username,e.fromPendingListTable?(0,L.jsx)(L.Fragment,{children:W.maker&&t.madeBy}):(t.returnedByApprover||t.returnedByChecker)&&W.maker?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{children:t.madeBy?t.madeBy:"CONFIDENTIAL"})," "]}):null]}),e.fromRejectedListTable&&(0,L.jsx)("td",{className:"text-break text-center",children:(null===t||void 0===t?void 0:t.rejectedByEmail)||"Not Available"}),e.fromPendingListTable&&(0,L.jsx)("td",{style:{textAlign:"center"},children:(0,L.jsx)("span",{style:{textAlign:"center"},children:j||t.assignTo?(0,L.jsxs)(L.Fragment,{children:[j||t.assignTo.split("(")[0]," ",(0,L.jsx)("br",{}),(0,L.jsx)("span",{className:"rounded p-1 badge badge-pill badge-secondary",children:`(${j||t.assignTo.split("(")[1]}`})]}):(0,L.jsx)("p",{children:"Not Found"})})}),e.restorePermission&&t.isDeleted&&(0,L.jsx)("td",{children:(0,L.jsx)(p.A,{permission:W.restore,onClick:()=>e.restoreDocument(t.id),buttonType:"restore"})}),(0,L.jsx)("td",{className:"text-center",children:t.createdAt?new Date(t.createdAt).toLocaleString():""}),!e.fromPendingListTable&&(0,L.jsx)("td",{className:"text-center",children:t.updatedAt?new Date(t.updatedAt).toLocaleString():""}),e.fromRejectedListTable&&(0,L.jsx)("td",{children:W.checker||W.approver?(0,L.jsx)(p.A,{permission:W.checker||W.approver,buttonType:"view",to:`${h.A.documentsView}?i=${u.A.getHash(t.id)}`}):null!==t&&void 0!==t&&t.returnedByChecker?(0,L.jsx)(r.A,{className:"badge badge-primary p-2 bg-blue-200 text-blue-600",onClick:()=>e.resubmitDocumentHandler(t.id),children:"Resubmit"}):null}),e.showControl&&(0,L.jsxs)("td",{children:[e.fromPendingListTable&&t.isUserChecker?"Approval Pending":null,(W.document===d.Xd||W.document===d.gR||W.document===d.n7)&&!(null!==t&&void 0!==t&&t.isUserChecker)&&(0,L.jsxs)(L.Fragment,{children:[e.approveDocument&&(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(p.A,{permission:W.checker||W.approver,buttonType:"view",to:h.A.documentsView+"?i="+u.A.getHash(t.id)})}),!e.fromPendingListTable&&!t.isDeleted&&(0,L.jsx)(p.A,{to:h.A.documentsEdit+"?i="+u.A.getHash(t.id),permission:W.document,buttonType:"edit"})]}),e.deleteDocument&&W.document===d.n7&&!t.isDeleted&&(0,L.jsx)("div",{children:(0,L.jsx)(p.A,{permission:W.document,onClick:()=>e.deleteDocument(t.id),buttonType:"delete"})})]})]},s)}))})]})}),(0,L.jsx)(A.A,{className:"bg-white",children:(0,L.jsxs)(a.A,{children:[(0,L.jsx)(c.A,{children:(0,L.jsx)(l.A,{count:parseInt(Math.ceil(e.totalDocuments/E)),onChange:e.handleChangePage,shape:"rounded",page:e.pageNumber})}),(0,L.jsx)(c.A,{children:(0,L.jsxs)("div",{className:"float-right mt-2 d-flex align-items-center",children:[(0,L.jsx)("p",{className:"mb-0 mr-2",children:"Items Per Page"}),(0,L.jsx)(y.A,{children:(0,L.jsxs)(N.A,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:e.docLimit,onChange:t=>{e.dispatch((0,f.wU)(t.target.value))},className:"form-control rounded",children:[(0,L.jsx)(v.A,{value:5,children:"5"}),(0,L.jsx)(v.A,{value:10,children:"10"}),(0,L.jsx)(v.A,{value:20,children:"20"})]})}),(0,L.jsxs)("p",{className:"mb-0 ml-2",children:["Total Documents :",(0,L.jsx)("b",{className:"mr-2",children:e.totalDocuments})," Page :",(0,L.jsxs)("b",{children:[" ",e.pageNumber]})]}),(0,k.includeThisFeature)(k.dms_features.DOWNLOAD_REPORT)&&(0,L.jsx)(T.A,{id:"toExcel-button",className:"btn btn-sm ml-2 btn-primary text-white float-right",table:"toExcel",filename:"documents",sheet:"tablexls",buttonText:"Download Report"})]})})]})})]})}))}}]);
//# sourceMappingURL=7563.59b251bd.chunk.js.map