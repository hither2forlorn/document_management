"use strict";(self.webpackChunkgeneral_dms=self.webpackChunkgeneral_dms||[]).push([[4827],{24827:(e,s,a)=>{a.r(s),a.d(s,{default:()=>R});var t=a(65043),n=a(25852),r=a(13718),o=a(75304),l=a(38477),d=a(44864),c=a(58472),i=a(87382),h=a(96957),m=a(46759),u=a(80231),x=a(58441),j=a(28096),g=a(97508),p=a(62582),f=a(18039),A=a(67735),b=a(94576),v=a(45413),w=a(8586),S=a(64412),N=a(86178),k=a.n(N),D=a(70579);const E=(0,g.Ng)((e=>({users:e.allFields.users||[],memoStatuses:e.allFields.memoStatuses||[],permissions:e.permissions||{},memoSearchData:e.memoSearchData})))((e=>{const s=e.memoSearchData;return(0,D.jsx)(o.A,{className:"shadow",children:(0,D.jsx)(d.A,{children:(0,D.jsxs)(b.A,{onSubmit:e=>e.preventDefault(),onReset:()=>e.setSearchData({assignedTo:e.currentUserId}),children:[(0,D.jsxs)(v.A,{children:[(0,D.jsx)(w.A,{children:"Request Id"}),(0,D.jsx)(S.A,{className:"rounded",type:"text",name:"requestId",onChange:e.onChange,value:s.requestId||""})]}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(w.A,{children:"Description"}),(0,D.jsx)(S.A,{className:"rounded",type:"text",name:"description",onChange:e.onChange,value:s.description||""})]}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(w.A,{children:"Requested By"}),(0,D.jsxs)(S.A,{className:"rounded",type:"select",name:"requestedBy",onChange:e.onChange,value:s.requestedBy||"",children:[(0,D.jsx)("option",{value:"",children:"--- ALL ---"}),e.users.map((e=>(0,D.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(w.A,{children:"Assigned To"}),(0,D.jsxs)(S.A,{className:"rounded",type:"select",name:"assignedTo",onChange:e.onChange,value:s.assignedTo||"",children:[(0,D.jsx)("option",{value:"",children:"--- ALL ---"}),e.users.map((e=>(0,D.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(w.A,{children:"Assigned On Range"}),(0,D.jsx)(S.A,{className:"rounded",type:"date",name:"assignedOnStart",max:s.assignedOnEnd?k()(s.assignedOnEnd).format("YYYY-MM-DD"):k()().format("YYYY-MM-DD"),onChange:e.onChange,value:s.assignedOnStart||""}),(0,D.jsx)(S.A,{className:"rounded",type:"date",name:"assignedOnEnd",min:s.assignedOnStart?k()(s.assignedOnStart).format("YYYY-MM-DD"):"",max:k()().format("YYYY-MM-DD"),onChange:e.onChange,value:s.assignedOnEnd||""})]}),(0,D.jsxs)(v.A,{children:[(0,D.jsx)(w.A,{children:"Status"}),(0,D.jsxs)(S.A,{className:"rounded",type:"select",name:"status",onChange:e.onChange,value:s.status||"",children:[(0,D.jsx)("option",{value:"",children:"--- ALL ---"}),e.memoStatuses.map((e=>{let{value:s,label:a}=e;return(0,D.jsx)("option",{value:s,children:a},s)}))]})]}),(0,D.jsx)(v.A,{children:(0,D.jsxs)(i.A,{type:"reset",color:"info",className:"float-right",children:["Reset ",(0,D.jsx)("i",{className:"fa fa-redo"})]})})]})})})}));var y=a(34431);const C=e=>({type:y.A.SET_MEMO_SEARCH_DATA,data:e});var _=a(83565);const R=(0,g.Ng)((e=>({users:e.allFields.users||[],memoSearchData:e.memoSearchData})))((e=>{const s=e.permissions,[a,g]=(0,t.useState)([]),b=localStorage.getItem(f.uW),v=_.parse(e.location.search),w=v.tag,S=v.title;(0,t.useEffect)((()=>{e.memoSearchData.tag!==w&&e.dispatch(C({tag:w})),N()}),[e.memoSearchData,w]);const N=()=>{(0,h.J2)(e.memoSearchData,((e,s)=>{e?j.oR.error("Error!"):g(s)}))},k=e=>{(0,h.cP)(e,((e,s)=>{e?j.oR.error("Error!"):s.success?(j.oR.success("Success"),N()):j.oR.warn(s.message)}))};return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(n.A,{children:[(0,D.jsx)(r.A,{md:3,children:(0,D.jsx)(E,{currentUserId:b,onChange:s=>{const{name:a,value:t}=s.target,n=e.memoSearchData;n[a]=t,e.dispatch(C({...n}))},setSearchData:s=>e.dispatch(C(s))})}),(0,D.jsx)(r.A,{md:9,children:(0,D.jsxs)(o.A,{className:"shadow",children:[(0,D.jsx)(l.A,{children:(0,D.jsxs)("h5",{children:[S||"Memo"," List"]})}),(0,D.jsx)(d.A,{children:(0,D.jsxs)(c.A,{responsive:!0,bordered:!0,hover:!0,children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{children:"S.N."}),(0,D.jsx)("th",{children:"Name"}),(0,D.jsx)("th",{children:"Description"}),(0,D.jsx)("th",{children:"Requested by"}),(0,D.jsx)("th",{children:"Status"}),(0,D.jsx)("th",{style:{width:"150px"},children:"Actions"})]})}),(0,D.jsx)("tbody",{children:a.map(((a,t)=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:t+1}),(0,D.jsxs)("td",{children:[s.memo===f.n7||s.memo===f.Xd||s.memo===f.gR?(0,D.jsx)(p.Link,{to:u.A.memoView+"?i="+x.A.getHash(a.id),children:a.form.name}):a.form.name,a.workflow_master&&a.workflow_master.assignedTo===b?(0,D.jsx)("span",{className:"ml-2 btn btn-warning btn-sm text-white blink_me",children:(0,D.jsx)("i",{className:"fa fa-lg fa-circle"})}):null]}),(0,D.jsx)("td",{children:a.form.description}),(0,D.jsx)("td",{children:(0,m._W)(e.users,a.createdBy)}),(0,D.jsx)("td",{children:a.workflow_master?(0,D.jsx)(D.Fragment,{children:a.workflow_master.currentLevel>=0?(0,D.jsx)("span",{title:"Pending on "+(0,m._W)(e.users,a.workflow_master.assignedTo),className:"btn btn-info btn-sm text-white",children:(0,D.jsx)("strong",{children:a.workflow_master.currentStatus})}):(0,D.jsx)("span",{className:"btn btn-success btn-sm text-white",children:(0,D.jsx)("strong",{children:a.workflow_master.currentStatus})})}):(0,D.jsx)("span",{className:"btn btn-secondary btn-sm text-white",children:(0,D.jsx)("strong",{children:"Not Started"})})}),(0,D.jsxs)("td",{children:[a.workflow_master&&"Pending"===a.workflow_master.currentStatus&&a.workflow_master.currentLevel<a.workflow_master.maxLevel?(0,D.jsx)(i.A,{title:"Skip one user",className:"mx-1 text-white",onClick:()=>(0,A.a)(a.workflow_master.id,N),size:"sm",color:"info",children:(0,D.jsx)("i",{className:"fa fa-forward"})}):null,s.memo===f.n7?(0,D.jsx)(i.A,{className:"mx-1 text-white",onClick:()=>k(a.id),size:"sm",color:"danger",children:(0,D.jsx)("i",{className:"fa fa-trash"})}):null]})]},a.id)))})]})})]})})]})})}))},96957:(e,s,a)=>{a.d(s,{J2:()=>l,R0:()=>d,TO:()=>i,cP:()=>c,i3:()=>r,oI:()=>o});var t=a(76400);const n="/memo",r=(e,s)=>{const a=e.memoId;t.E8.post(`${n}/start/${a}`).then((e=>s(null,e.data))).catch((e=>s(e)))},o=(e,s)=>{t.E8.post(`${n}`,e).then((e=>s(null,e.data))).catch((e=>s(e)))},l=(e,s)=>{t.E8.get(`${n}`,{params:e}).then((e=>s(null,e.data))).catch((e=>s(e)))},d=(e,s)=>{t.E8.get(`${n}/${e}`).then((e=>{s(null,e.data)})).catch((e=>s(e)))},c=(e,s)=>{t.E8.delete(`${n}/${e}`).then((e=>s(null,e.data))).catch((e=>s(e)))},i=(e,s)=>{t.E8.put(`${n}`,e).then((e=>s(null,e.data))).catch((e=>s(e)))}},68499:(e,s,a)=>{a.d(s,{Dn:()=>d,KK:()=>r,Mw:()=>o,QZ:()=>l});var t=a(76400);const n="/workflow",r=(e,s)=>{t.E8.put(`${n}/${e.id}`,e).then((e=>s(null,e.data))).catch((e=>s(e)))},o=(e,s)=>{t.E8.get(`${n}/${e}`).then((e=>s(null,e.data))).catch((e=>s(e)))},l=(e,s)=>{t.E8.get(`${n}/master/${e}`).then((e=>s(null,e.data))).catch((e=>s(e)))},d=(e,s)=>{t.E8.post(`${n}/submit/${e.action}`,e.data).then((e=>s(null,e.data))).catch((e=>s(e)))}},67735:(e,s,a)=>{a.d(s,{a:()=>o,w:()=>r});var t=a(68499),n=a(28096);const r=(e,s)=>{let a={};return s&&s.forEach((s=>{s.id===e&&(a=s)})),a.name||""},o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};(0,t.Dn)({action:"skip",data:{comment:"",workflowMasterId:e}},((e,a)=>{e?n.oR.error("Error!"):(n.oR.success("Success!"),s())}))}},58472:(e,s,a)=>{a.d(s,{A:()=>x});var t=a(58168),n=a(98587),r=a(65043),o=a(65173),l=a.n(o),d=a(98139),c=a.n(d),i=a(62373),h=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"],m={className:l().string,cssModule:l().object,size:l().string,bordered:l().bool,borderless:l().bool,striped:l().bool,dark:l().bool,hover:l().bool,responsive:l().oneOfType([l().bool,l().string]),tag:i.Wx,responsiveTag:i.Wx,innerRef:l().oneOfType([l().func,l().string,l().object])},u=function(e){var s=e.className,a=e.cssModule,o=e.size,l=e.bordered,d=e.borderless,m=e.striped,u=e.dark,x=e.hover,j=e.responsive,g=e.tag,p=e.responsiveTag,f=e.innerRef,A=(0,n.A)(e,h),b=(0,i.qO)(c()(s,"table",!!o&&"table-"+o,!!l&&"table-bordered",!!d&&"table-borderless",!!m&&"table-striped",!!u&&"table-dark",!!x&&"table-hover"),a),v=r.createElement(g,(0,t.A)({},A,{ref:f,className:b}));if(j){var w=(0,i.qO)(!0===j?"table-responsive":"table-responsive-"+j,a);return r.createElement(p,{className:w},v)}return v};u.propTypes=m,u.defaultProps={tag:"table",responsiveTag:"div"};const x=u}}]);
//# sourceMappingURL=4827.8e87614c.chunk.js.map